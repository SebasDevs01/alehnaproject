"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["74929"],{98206:function(e,t,n){n.d(t,{M2:function(){return c},_B:function(){return d},bn:function(){return l}});var r=n(5377),i=n(45996),a=n(4676),o=(0,n(10625).p)("mobileBasicPlayerAtom@tiktok/webapp-atoms",{mobileDefaultMute:!1,forcePause:!1,forcePlay:!1,canRetry:!0}),u=(0,a.i)(o,function(e,t){return{setMobileDefaultMute:function(e){t(o,function(t){return(0,i._)((0,r._)({},t),{mobileDefaultMute:e})})},setForcePause:function(e){t(o,function(t){return(0,i._)((0,r._)({},t),{forcePause:e})})},setForcePlay:function(e){t(o,function(t){return(0,i._)((0,r._)({},t),{forcePlay:e})})},setCanRetry:function(e){t(o,function(t){return(0,i._)((0,r._)({},t),{canRetry:e})})}}}),l=u.useServiceState,d=u.useServiceDispatchers;u.useAtomService;var c=function(){return l(function(e){return e.mobileDefaultMute})}},15790:function(e,t,n){n.d(t,{D:function(){return a},G:function(){return o}});var r=n(11854),i=n(72702),a=function(e){if(!e)return{diggCount:BigInt(0),shareCount:BigInt(0),commentCount:BigInt(0),playCount:BigInt(0),collectCount:BigInt(0),repostCount:BigInt(0),isReposted:!1};var t,n,r,i,a,o,u,l,d,c,s,f=e.stats,v=e.statsV2;return{diggCount:BigInt(null!=(n=null!=(t=null==v?void 0:v.diggCount)?t:null==f?void 0:f.diggCount)?n:0),shareCount:BigInt(null!=(i=null!=(r=null==v?void 0:v.shareCount)?r:null==f?void 0:f.shareCount)?i:0),commentCount:BigInt(null!=(o=null!=(a=null==v?void 0:v.commentCount)?a:null==f?void 0:f.commentCount)?o:0),playCount:BigInt(null!=(l=null!=(u=null==v?void 0:v.playCount)?u:null==f?void 0:f.playCount)?l:0),collectCount:BigInt(null!=(c=null!=(d=null==v?void 0:v.collectCount)?d:null==f?void 0:f.collectCount)?c:0),repostCount:BigInt(null!=(s=null==v?void 0:v.repostCount)?s:0),isReposted:Number(null==v?void 0:v.repostCount)>0}},o=function(e){return(0,i.F3)(function(t){return a(t[e])},r.bN)}},1179:function(e,t,n){n.d(t,{$T:function(){return o},W_:function(){return l},fy:function(){return u}});var r=n(40161),i=n(35144),a=n(54363),o=function(){var e,t=(0,i.x)().abTestVersion;return null!=(e=(0,a.V7)(t,"live_room_prerender"))?e:"v0"},u=function(e){var t=e.enter_from,n=e.enter_from_merge,i=e.enter_method,a=o();return["v1","v2"].includes(a)&&("homepage_hot"===n||"homepage_hot"===t)?"live_entrance_head"===i?r.r$.canPrerenderImmediate:"v1"===a?r.r$.canPrerenderEager:"v2"===a?r.r$.canPrerenderModerate:"":""},l=function(e){var t=e.enter_from,n=e.enter_from_merge,i=e.enter_method,a=o();return["v1","v2"].includes(a)&&("homepage_hot"===n||"homepage_hot"===t)?"live_entrance_head"===i?r.a2.Immediate:"v1"===a?r.a2.Eager:"v2"===a?r.a2.Moderate:null:null}},40161:function(e,t,n){n.d(t,{a2:function(){return o},r$:function(){return l},ss:function(){return u}});var r,i,a,o=((r={}).Immediate="immediate",r.Eager="eager",r.Moderate="moderate",r.Conservative="conservative",r),u=((i={}).insertSpeculationRulesForLive="prerender_live_room",i),l=((a={}).canPrerenderModerate="can-prerender-moderate",a.canPrerenderEager="can-prerender-eager",a.canPrerenderImmediate="can-prerender-immediate",a)},29807:function(e,t,n){n.d(t,{A2:function(){return d},tG:function(){return c}});var r,i=n(95170),a=n(5377),o=n(79262),u=n(84772),l=n(90542),d=((r={}).LiveCover="live_cover",r.SuggestedOthersPhoto="suggested_others_photo",r.NextIconClick="next_icon_click",r.Others="others",r.VideoHeadBrowser="video_head_browser",r.Creator="creator",r.VideoHead="video_head",r.LiveHead="live_head",r.OthersPhoto="others_photo",r.ClickOneColumnUser="click_main_btn",r.TopLiveCell="top_live_cell",r.VideoLiveCell="video_live_cell",r.FollowingTop="top_window",r.FollowingPreview="live_cover_preview",r),c=function e(){(0,i._)(this,e),this.handleLiveEntranceShow=function(e){l.f.event("livesdk_live_show",e)},this.handleLiveEntranceClick=function(e){l.f.event("livesdk_rec_live_play",e)},this.handleLiveStreamEntranceClick=function(e){l.f.event("livesdk_live_action",(0,a._)({live_type:"third_party"},e))}};c=function(e,t,n,r){var i,a=arguments.length,u=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,o._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(u=(a<3?i(u):a>3?i(t,n,u):i(t,n))||u);return a>3&&u&&Object.defineProperty(t,n,u),u}([(0,u._q)()],c)},71421:function(e,t,n){n.d(t,{Y:function(){return ei}});var r,i,a,o,u=n(5377),l=n(45996),d=n(6586),c=n(2787),s=n(40099),f=n(73580),v=n(80281),m=n(69597),p=n(59952),_=n(89241),y=n(4676),h=(0,n(10625).p)("mobileVideoPlayerAtom@tiktok/webapp-atoms",{currentVideo:null}),S=(0,y.i)(h,function(e,t){return{setCurrentVideo:function(e){t(h,function(t){return(0,l._)((0,u._)({},t),{currentVideo:e.currentVideo})})},updateVideo:function(e){this.setCurrentVideo(e)}}}),g=S.useServiceState;S.useServiceDispatchers,S.getStaticApi;var b=n(13610),P=n(72961),T=n(95170),C=n(90542),E=n(28298),w=n(65362),k=n(35383),M=n(48859),D=((r={})[r.HaveNothing=0]="HaveNothing",r[r.HaveMetaData=1]="HaveMetaData",r[r.HaveCurrentData=2]="HaveCurrentData",r[r.HaveFutureData=3]="HaveFutureData",r[r.HaveEnoughData=4]="HaveEnoughData",r),R=((i={})[i.PlayStop=0]="PlayStop",i[i.ResumePlaying=1]="ResumePlaying",i),F=((a={}).PlayQuality="video_play_quality",a.PlayEnded="video_play_end",a.PlayFailed="video_play_failed",a.BlockStart="video_block_start",a.Block="video_block",a.Request="video_request",a.RequestResponse="video_request_response",a.FirstFrame="first_feed_show_time",a),A=(o={},(0,k._)(o,M.ey.OneColumn,"one_column"),(0,k._)(o,M.ey.ThreeColumn,"three_column"),(0,k._)(o,M.ey.BrowserMode,"browser_mode"),(0,k._)(o,M.ey.VideoDetail,"video_detail"),(0,k._)(o,M.ey.Pip,"pip"),(0,k._)(o,M.ey.FullscreenMode,"fullscreen"),(0,k._)(o,M.ey.CreatorTab,"creator_tab"),(0,k._)(o,M.ey.MiniPlayer,"mini_player"),(0,k._)(o,M.ey.ImmersivePlayer,"immersive_player"),(0,k._)(o,M.ey.TiktokStories,"tiktok_stories"),o),I=function(){var e="undefined"==typeof window?null:window.navigator;return{cpu_core:(null==e?void 0:e.hardwareConcurrency)||0,memory_size:(null==e?void 0:e.deviceMemory)||0,HEVC_supported:+!!(0,w.ng)()}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return"";var t=e.match(/https?:\/\/([^/]+)\//i),n="";return(null==t?void 0:t[1])&&(n=t[1]),n},L=function(e){var t,n,r,i=e.id,a=e.authorId,o=e.playMode,u=e.forFriend,l=e.secret,d=e.play_url,c=e.awemeType,s=e.picCnt,f=e.playlist_id,v=e.popup_type,m=e.size;return{group_id:i,author_id:a,play_mode:null!=(r=A[o])?r:"others",logo_type:"",item_status:(t=void 0!==u&&u,n=void 0!==l&&l,t?E.qd.Friend:n?E.qd.Self:E.qd.Public),play_url:d,host:V(d),aweme_type:null!=c?c:0,pic_cnt:s,playlist_id:void 0===f?"":f,popup_type:void 0===v?"":v,size:void 0===m?-1:m}},U=function(e,t){return!t||/^(\d)*p$/i.test("".concat(t))?e&&t?"".concat(e,"_").concat(t):"unknownQuality_fromServer_".concat(e,"_").concat(t):t},B=function(e){var t=e.bitrate,n=e.format,r=e.codecType,i=e.encodedType,a=e.videoQuality,o=void 0===a?"":a,u=e.definition,l=e.encodeUserTag,d=e.originalDefinition;return{video_bitrate:void 0===t?-1:t,video_format:void 0===n?"":n,codec_format:void 0===r?"":r,encoded_type:void 0===i?"":i,bitrate_quality:o,video_quality:String(U(o,void 0===u?"":u)),video_encodeUserTag:void 0===l?"":l,original_definition:void 0===d?"":d}},x=function(e){var t=e.preload_size,n=e.preload_time,r=e.video_type,i=e.player_type;return{preload_size:void 0===t?-1:t,preload_time:void 0===n?-1:n,player_type:void 0===i?"defaultPlayer":i,video_type:void 0===r?"mp4":r}},H=function(e){return{watch_count_total:e.totalWatchCount,watch_count_foru:e.foruWatchCount}},O={isPause:null,isVideoLoaded:!1,isFirstPlayReported:!1,isFirstPlayEndReported:!1,isInPlaybackStage:!1,triggerPlayTimestamp:0,firstTriggerPlayTimestamp:0,loadStartTimestamp:0,blockStartTimestamp:0,blockStartProgress:0,playingStartTimestamp:0,pauseStartTimestamp:0,totalPauseDuration:0,volume:0,muted:!0,mutedStateChange:!1,videoSourceLoadTime:0,cacheDuration:0,cacheSize:0,dataPlayerType:0,playSize:0,cdnSizeVideo:0,frameInfo:{drop_frame:0,total_play_frame:-1,drop_frame_rate:-1,drop_frame_duration:0}},q={currentSrc:"",duration:0,error:null,currentTime:0,readyState:0,buffered:{start:function(){return 0},end:function(){return 0},length:0},volume:0,muted:!0,mutedStateChange:!1},z=1,N="",W="",Q=function(e){W=e},$=function(){function e(){var t=this;(0,T._)(this,e),this.innerStates=(0,u._)({},O),this.innerVideoAttributeStates=(0,u._)({},q),this.isFirstFrameReported=!1,this.resetState=function(){t.innerStates=(0,u._)({},O),N="",t.isFirstFrameReported=!1,t.innerVideoAttributeStates=(0,u._)({},q)},this.resetStateWhenSlideChange=function(){t.innerStates=(0,u._)({},O),t.innerVideoAttributeStates=(0,u._)({},q)},this.reset=function(e,n){N!==e&&(t.playEndEvent(n),t.blockEndEvent((0,l._)((0,u._)({},n),{endType:R.PlayStop})),t.innerStates=(0,u._)({},O))},this.resetWhenSlideChange=function(e){t.playEndEvent((0,u._)({},e,t.innerVideoAttributeStates)),t.blockEndEvent((0,u._)((0,l._)((0,u._)({},e),{endType:R.PlayStop}),t.innerVideoAttributeStates)),t.innerVideoAttributeStates=(0,u._)({},q)},this.updateFrameInfo=function(e){t.innerStates.frameInfo=e},this.handlePlay=function(){t.innerStates.triggerPlayTimestamp=Date.now(),t.innerStates.firstTriggerPlayTimestamp||(t.innerStates.firstTriggerPlayTimestamp=Date.now())},this.handlePause=function(e){var n=e.id,r=t.innerStates,i=r.playingStartTimestamp,a=r.isPause;n&&i&&!a&&(t.innerStates.pauseStartTimestamp=Date.now()),t.innerStates.isPause=!0},this.handleTimeUpdate=function(e){var n=t.innerStates,r=n.triggerPlayTimestamp,i=n.isFirstPlayReported,a=n.pauseStartTimestamp,o=n.videoSourceLoadTime,d=n.loadStartTimestamp,c=e.currentTime,s=void 0===c?0:c,f=e.duration,v=void 0===f?0:f,m=e.codecType,p=e.volume,_=e.muted,y=void 0===_||_,h=e.bitrateInfo,S=e.buffered,g=e.currentSrc,b=e.error,P=e.readyState;if(t.innerVideoAttributeStates.duration=v,t.innerVideoAttributeStates.currentTime=s,t.innerVideoAttributeStates.buffered=S,t.innerVideoAttributeStates.currentSrc=g,t.innerVideoAttributeStates.error=b,t.innerVideoAttributeStates.readyState=P,!(s<=0)){if(!i&&0!==r){var T=Date.now()-r-1e3*s,w=Date.now()-d,k=(0,l._)((0,u._)({},L(e),B(e),x(e),H(e),I()),{duration:T>0?Math.round(T):0,video_duration:Math.round(1e3*v),is_bytevc1:+((null!=m?m:"").indexOf("h265")>-1),muted:+!!y,bitrate_set:(0,E.OK)(h),quality_bitrate:h&&Array.isArray(h)?h.map(function(e){return"".concat(e.QualityType,":").concat(e.Bitrate)}):null,duration_from_load:Math.round(w),duration_with_load:Math.round(T+o),is_same:+(N===W)});C.f.event(F.PlayQuality,k),Q(N),t.innerStates.isFirstPlayReported=!0,t.innerStates.playingStartTimestamp=Date.now(),t.innerStates.volume=void 0===p?0:p,t.innerStates.muted=y}if(t.innerStates.mutedStateChange=t.innerStates.mutedStateChange||t.innerStates.muted!==y,t.innerStates.muted=y,!t.isFirstFrameReported&&performance&&t.firstFrameEvent(),t.innerStates.isPause){var M=a?Date.now()-a:0;t.innerStates.totalPauseDuration+=M}t.blockEndEvent((0,l._)((0,u._)({},e),{endType:R.ResumePlaying})),t.innerStates.isInPlaybackStage=!0,t.innerStates.isPause=!1}},this.handleEnded=function(){t.innerStates.isInPlaybackStage=!1},this.handleError=function(e){var n=t.innerStates,r=n.isVideoLoaded,i=n.isInPlaybackStage,a=e.error,o=e.codecType,d=e.duration,c=e.play_url,s=null!=a?a:{},f=s.code,v=s.message,m=c?(0,w.bp)(c):-1,p=(0,l._)((0,u._)({},L(e),B(e),H(e),I()),{error_code:String(void 0===f?0:f),error_info:void 0===v?"":v,is_bytevc1:+((void 0===o?"":o).indexOf("h265")>-1),duration:null!=d?d:0,isExpired:m,isSupportMP4:(0,w.vk)(),is_before:r&&i?0:1});C.f.event(F.PlayFailed,p)},this.handleWaiting=function(e){var n=e.currentTime,r=void 0===n?0:n,i=e.duration,a=t.innerStates,o=a.isInPlaybackStage,l=a.blockStartTimestamp,d=a.isPause;if(0!==r&&r!==(void 0===i?0:i)&&o&&!1===d&&0===l){var c=(0,u._)({},L(e),H(e),I());C.f.event(F.BlockStart,c),t.innerStates.blockStartTimestamp=Date.now(),t.innerStates.blockStartProgress=1e3*r}},this.handleLoadStart=function(e){var n=(0,u._)({},L(e),H(e),I(),(0,v.Mp)(e));C.f.event(F.Request,n),t.innerStates.loadStartTimestamp=Date.now()},this.handleLoadedData=function(e){t.responseEvent(e),t.innerStates.isVideoLoaded=!0},this.firstFrameEvent=function(){var e=performance.timeOrigin,n={feed_total:e?Math.round(Date.now()-e):-1};C.f.event(F.FirstFrame,n),t.isFirstFrameReported=!0}}var t=e.prototype;return t.updateNativePlayerCDNCache=function(e,t){this.innerStates.cacheDuration=e,this.innerStates.cacheSize=t},t.msePlayerCacheUpdate=function(e){void 0!==e&&(this.innerStates.cdnSizeVideo+=e)},t.updatePlayerType=function(e){this.innerStates.dataPlayerType=e},t.blockEndEvent=function(e){var t=e.currentTime,n=void 0===t?0:t,r=e.codecType,i=e.endType,a=e.should_filter,o=e.droppedRate,d=this.innerStates,c=d.blockStartTimestamp,s=d.blockStartProgress,f=d.isInPlaybackStage,v=d.isVideoLoaded,m=0===i;if(v&&f&&0!==c&&(1e3*n!==s||m)){var p=Date.now()-c-(1e3*n-s),_=(0,l._)((0,u._)({},L(e),B(e),x(e),I()),{duration:p>=0?Math.round(p):0,is_bytevc1:+((null!=r?r:"").indexOf("h265")>-1),end_type:i,position:Math.round(1e3*n),should_filter:void 0!==a&&a?"1":"0",droppedRate:o});C.f.event(F.Block,_),this.innerStates.blockStartTimestamp=0}},t.responseEvent=function(e){var t=this.innerStates.loadStartTimestamp,n=e.error,r=e.videoQuality,i=e.definition,a=e.play_url,o=e.codecType,d=a?(0,w.bp)(a):-1,c=Date.now()-t;this.innerStates.videoSourceLoadTime=c;var s=(0,l._)((0,u._)((0,l._)((0,u._)({},L(e),I(),H(e)),{error_code:String(null==n?void 0:n.code),duration:c,is_success:n?"0":"1",video_quality:r&&i?"".concat(r,"_").concat(i):""}),(0,v.Mp)(e)),{isExpired:d,isSupportMP4:(0,w.vk)(),is_bytevc1:+((null!=o?o:"").indexOf("h265")>-1)});C.f.event(F.RequestResponse,s)},t.playEndEvent=function(e){var t=this.innerStates,n=t.isFirstPlayReported,r=t.isFirstPlayEndReported,i=t.playingStartTimestamp,a=t.totalPauseDuration,o=t.firstTriggerPlayTimestamp,d=t.volume,c=t.frameInfo,s=e.bitrate;if(!r&&i){var f=e.buffered,v=e.duration,m=void 0===v?0:v,p=e.currentTime,_=e.readyState,y=e.volume,h=void 0===y?0:y,S=e.muted,g=e.codecType,b=i?Date.now()-i-a:0,P=b>1e3*m?1e3*m:b,T=(0,l._)((0,u._)((0,l._)((0,u._)({},L(e),B(e),x(e),I()),{is_success:n?"1":"0",video_duration:isNaN(m)?0:Math.round(1e3*m),play_duration:Math.round(1e3*(void 0===p?0:p)),buffering:+((null!=_?_:0)<=D.HaveCurrentData),duration:b>=0?Math.round(b):0,wait_duration:i>0?0:Date.now()-o,cur_cache_duration:void 0!==f&&f.length>0?1e3*Math.round(f.end(0)-f.start(0)):0,local_time_ms:Date.now(),volume_level:Number(h.toFixed(4)),volume_change:n?Number((h-d).toFixed(4)):0,muted:+!!S,click_mute:this.innerStates.mutedStateChange?S?2:1:0,session_order:z++,play_size:Math.round(s?s/8*(P/1e3):-1),data_player_type:this.innerStates.dataPlayerType,cache_size:1===this.innerStates.dataPlayerType?-10:Math.round(this.innerStates.cacheSize),cache_duration:1===this.innerStates.dataPlayerType?-10:Math.round(this.innerStates.cacheDuration),cdn_size_video:this.innerStates.cdnSizeVideo}),c),{is_bytevc1:+((null!=g?g:"").indexOf("h265")>-1)});C.f.event(F.PlayEnded,T),this.innerStates.isFirstPlayEndReported=!0}},e}(),j=n(19298),Y=n(63737),G=n(79066),K=n(16327),J=n(72516),X=n(48772),Z=function(e){return{buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}},ee=(0,s.memo)((0,s.forwardRef)(function(e,t){var n=e.playProgress,r=e.muteSetting,i=e.onUnmount,a=e.onEnded,o=e.onWaiting,d=e.onError,f=e.disableDownload,v=void 0!==f&&f,m=e.itemMute,p=(0,K._)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]),y=(0,s.useRef)(null),h=(0,s.useRef)(!1),S=(0,X.O)(r),g=S.mute,b=S.volume,P=S.playing,T=(0,_.S4)().setMute;(0,s.useImperativeHandle)(t,function(){var e=y.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:function(t){null==e||e.addEventListener("timeupdate",function(){var n,r,i=null!=(n=e.currentTime)?n:0,a=null!=(r=e.duration)?r:0;t(i/a,i,a)})},onCanPlay:function(t){null==e||e.addEventListener("canplay",t)},getPlayerAttributes:function(){return Z(e)}}});var C=(0,s.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,G._)(function(){var t,n,r,i,a,o;return(0,J.__generator)(this,function(u){switch(u.label){case 0:if(e>=3)return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,null==(t=y.current)?void 0:t.play()];case 2:return u.sent(),[3,4];case 3:return(null!=(o=null!=(a=(i=null!=(r=null==(n=u.sent())?void 0:n.message)?r:"").match("failed because the user didn't interact with the document first."))?a:i.match("The request is not allowed by the user agent or the platform in the current context"))?o:i.match("The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission."))?(T(!0),setTimeout(function(){C(e+1)},0)):C(e+1),null==d||d(n),[3,4];case 4:return[2]}})})()},[T]);(0,s.useEffect)(function(){y.current&&(y.current.volume=b)},[b]),(0,s.useEffect)(function(){C(),y.current&&Math.abs(y.current.currentTime-n)>.2&&(y.current.currentTime=n)},[n,C]),(0,s.useEffect)(function(){if(P)h.current&&(h.current=!1,C());else{var e;h.current=!0,null==(e=y.current)||e.pause()}},[P,C]),(0,s.useEffect)(function(){var e=y.current;return function(){null==i||i(Z(e))}},[]),(0,s.useEffect)(function(){v&&(y.current.oncontextmenu=function(e){return e.preventDefault(),!1})},[v,y]);var E=(0,s.useCallback)(function(e){null==o||o(e)},[o]),w=(0,s.useCallback)(function(e){null==a||a(e),C()},[a,C]);return(0,c.Y)("audio",(0,l._)((0,u._)({ref:y},p),{muted:void 0!==m&&m||g,playsInline:!0,autoPlay:!0,onEnded:w,onWaiting:E}))})),et=n(98206),en=function(e){return{buffered:null==e?void 0:e.buffered,currentSrc:null==e?void 0:e.currentSrc,currentTime:null==e?void 0:e.currentTime,duration:null==e?void 0:e.duration,readyState:null==e?void 0:e.readyState,error:null==e?void 0:e.error,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted}},er=(0,s.memo)((0,s.forwardRef)(function(e,t){e.playProgress,e.muteSetting;var n=e.onUnmount,r=e.onEnded,i=e.onWaiting,a=e.onError,o=e.disableDownload,d=void 0!==o&&o,f=e.itemMute,v=(0,K._)(e,["playProgress","muteSetting","onUnmount","onEnded","onWaiting","onError","disableDownload","itemMute"]),m=(0,s.useRef)(null),p=(0,et.M2)(),_=(0,et._B)(),y=_.setMobileDefaultMute,h=_.setForcePause;(0,s.useImperativeHandle)(t,function(){var e=m.current;return{play:null==e?void 0:e.play.bind(e),pause:null==e?void 0:e.pause.bind(e),onTimeUpdate:function(t){null==e||e.addEventListener("timeupdate",function(){var n,r,i=null!=(n=e.currentTime)?n:0,a=null!=(r=e.duration)?r:0;t(i/a,i,a)})},onCanPlay:function(t){null==e||e.addEventListener("canplay",t)},getPlayerAttributes:function(){return en(e)}}});var S=(0,s.useCallback)(function(){return(0,G._)(function(){var e,t,n,r;return(0,J.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,null==(t=m.current)||null==(e=t.play)?void 0:e.call(t)];case 1:return i.sent(),[3,3];case 2:return n=i.sent(),null==a||a(n),[2,null!=(r=n.message)?r:""];case 3:return[2,""]}})})()},[a]),g=(0,s.useCallback)(function(){S().then(function(e){(e.match("failed because the user didn't interact with the document first.")||e.match("The request is not allowed by the user agent or the platform in the current context"))&&(h(!1),y(!0))})},[h,y,S]);(0,s.useEffect)(function(){m.current&&g()},[g]),(0,s.useEffect)(function(){var e=m.current;return function(){null==n||n(en(e))}},[]),(0,s.useEffect)(function(){d&&(m.current.oncontextmenu=function(e){return e.preventDefault(),!1})},[d,m]);var b=(0,s.useCallback)(function(e){null==i||i(e)},[i]),P=(0,s.useCallback)(function(e){null==r||r(e),S()},[r,S]);return(0,c.Y)("audio",(0,l._)((0,u._)({ref:m},v),{muted:void 0!==f&&f||p,playsInline:!0,autoPlay:!0,onEnded:P,onWaiting:b}))})),ei=(0,s.memo)((0,s.forwardRef)(function(e,t){var n,r=e.playUrl,i=e.id,a=e.teaParams,o=e.index,y=e.mode,h=e.itemMute,S=e.onAudioPause,T=e.onAudioPlaying,C=e.onAudioPlay,E=e.onAudioEnded,w=e.onAudioError,k=e.onTimeUpdate,M=null!=(n=(0,b.U)(function(){return["isMobile","isAndroid"]},[]))?n:{},D=M.isAndroid,R=void 0!==D&&D,F=M.isMobile,A=void 0!==F&&F,I=(0,p.MY)().currentVideo,V=(0,_.ol)(),L=g(function(e){return e.currentVideo}),U=(0,s.useRef)(null),B=(0,s.useRef)(null),x=(0,f.Nj)(v.Gs),H=new $,O=(0,f.Nj)(m.AU),q=(0,d._)((0,s.useState)(!1),2),z=q[0],N=q[1],W=(0,s.useRef)(!1),Q=(0,s.useCallback)(function(){var e,t;null==(t=U.current)||null==(e=t.play)||e.call(t)},[]),G=(0,s.useCallback)(function(){var e,t;null==(t=U.current)||null==(e=t.pause)||e.call(t)},[]),K=(0,s.useCallback)(function(){var e;return(0,l._)((0,u._)({},a),{itemId:i,authorId:a.author_id,isScheduled:null!=(e=a.is_scheduled)&&e,autoplayStatus:0,playMode:y,awemeType:a.aweme_type})},[i,a,y]),J=(0,s.useMemo)(function(){if(A){if(!L)return!1;var e=L.id,t=L.index;return!R||e===i&&t===o}if(!I)return!1;var n=I.id,r=I.index,a=I.mode;return n===i&&r===o&&a===y},[A,I,i,o,y,L,R]);(0,s.useImperativeHandle)(t,function(){return{play:function(){Q(),B.current=!0},pause:function(){G(),B.current=!1},onTimeUpdate:function(e){var t;null==(t=U.current)||t.onTimeUpdate(e)},get currentTime(){var e,t;return null!=(t=null==(e=U.current)?void 0:e.getPlayerAttributes().currentTime)?t:0},get duration(){var n,r;return null!=(r=null==(n=U.current)?void 0:n.getPlayerAttributes().duration)?r:0},get currentCanPlay(){return J&&z}}},[Q,G,J,z]),(0,s.useEffect)(function(){J?J&&!W.current&&(W.current=!0):(N(!1),W.current&&(x.handlePlayTime(K()),W.current=!1))},[J]);var X=(0,j.jj)();(0,s.useEffect)(function(){var e=null===B.current||B.current;X&&e?Q():G()},[X,Q,G,x,J,y]);var Z=(0,s.useCallback)(function(){var e,t=(0,P.L$)(null==(e=U.current)?void 0:e.getPlayerAttributes()),n=a.bitrate,o=a.author_id,l=a.format,d=a.encodedType,c=a.videoQuality,s=a.encodeUserTag,f=a.codecType,v=a.definition,m=a.secret,p=a.forFriend,_=a.aweme_type,h=a.pic_cnt;return(0,u._)({id:i,authorId:o,playMode:y,bitrate:n,format:l,encodedType:d,videoQuality:c,encodeUserTag:s,codecType:f,definition:v,secret:m,forFriend:p,play_url:r,awemeType:_,picCnt:h},null!=t?t:{})},[i,y,a,r]),et=(0,j.iJ)({isCurrentVideo:J}),en=et.handlePauseWithLoading,ei=et.handlePlayingWithLoading,ea=(0,s.useCallback)(function(){H.handleLoadStart(Z())},[H,Z]),eo=(0,s.useCallback)(function(e){null==C||C(e)},[C]),eu=(0,s.useCallback)(function(){var e,t=(0,P.L$)(null==(e=U.current)?void 0:e.getPlayerAttributes()),n=t.currentTime,r=void 0===n?0:n,i=t.duration,a=(0,l._)((0,u._)({},K()),{currentTime:r});H.handleTimeUpdate(Z()),x.handleTimeUpdate(a),null==k||k(r/(void 0===i?0:i))},[H,Z,k,x,K]),el=(0,s.useCallback)(function(e){null==S||S(e),en(),W.current&&x.handlePlayTime(K())},[S,en,x,K]),ed=(0,s.useCallback)(function(e){null==T||T(e),ei(),O.reportVideoInteract({endTime:Date.now(),videoSource:r})},[T,ei,O,r]),ec=(0,s.useCallback)(function(e){null==E||E(e),H.handleEnded()},[E,H]);return((0,s.useEffect)(function(){return function(){H.resetWhenSlideChange((0,u._)({},Z())),W.current&&(x.handlePlayTime(K()),W.current=!1)}},[r]),J)?A?(0,c.Y)(er,{ref:U,c:!0,muteSetting:h||Y.T5[y].forceMute,defaultMute:Y.T5[y].defaultMute,playProgress:null!=V?V:0,src:r,onTimeUpdate:eu,onError:w,onPause:el,onPlay:eo,onPlaying:ed,onEnded:ec,onLoadStart:ea}):(0,c.Y)(ee,{ref:U,c:!0,muteSetting:h||Y.T5[y].forceMute,defaultMute:Y.T5[y].defaultMute,playProgress:null!=V?V:0,src:r,onTimeUpdate:eu,onError:w,onPause:el,onPlay:eo,onPlaying:ed,onEnded:ec,onLoadStart:ea}):null}))}}]);