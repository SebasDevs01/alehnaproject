"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["8324"],{82726:function(e,t,n){n.d(t,{VL:function(){return c},qW:function(){return u}});var r=n(5377),a=n(45996),i=n(4676),o=(0,n(10625).p)("videoActualResolutionState@tiktok/webapp-atoms",{actualResolution:""}),l=(0,i.i)(o,function(e,t){return{setVideoActualResolution:function(e){t(o,function(t){return(0,a._)((0,r._)({},t),{actualResolution:e})})}}}),u=(l.useAtomService,l.useServiceState),c=l.useServiceDispatchers;l.getStaticApi},18779:function(e,t,n){n.d(t,{Ek:function(){return c},I7:function(){return d}});var r=n(5377),a=n(45996),i=n(16327),o=n(4676),l=(0,n(10625).p)("llmPopupAtom@tiktok/webapp-atoms",{isVisible:!1,lastInference:null,actionHooksMap:{}}),u=(0,o.i)(l,function(e,t){return{showPopup:function(e){var n=e.actionHooksMap;t(l,{isVisible:!0,lastInference:(0,i._)(e,["actionHooksMap"]),actionHooksMap:void 0===n?{}:n})},hidePopup:function(){t(l,function(e){return(0,a._)((0,r._)({},e),{isVisible:!1})})},clearInference:function(){t(l,function(e){return(0,a._)((0,r._)({},e),{lastInference:null,actionHooksMap:{}})})}}}),c=u.useAtomService,d=u.useServiceState;u.useServiceDispatchers},95244:function(e,t,n){n.d(t,{Y:function(){return a}});var r,a=((r={}).LOGIN_TO_LIKE="login_to_like",r.LOGIN_TO_COMMENT="login_to_comment",r.LOGIN_TO_FAVORITE="login_to_favorite",r.LOGIN_TO_SHARE_WITH_FRIEND="login_to_share_with_friend",r.LOGIN_FOR_BETTER_RECOMMENDATION="login_for_better_recommendation",r.REDIRECT_TO_CREATOR_PAGE="redirect_to_creator_page",r.REDIRECT_TO_EXPLORE_PAGE="redirect_to_explore_page",r.SHARE_TO_OTHER_SOCIAL_MEDIA="share_to_other_social_media",r)},93408:function(e,t,n){n.d(t,{Gh:function(){return s},ey:function(){return c},gc:function(){return u},yR:function(){return v},zU:function(){return l},zf:function(){return d}});var r,a,i=n(35383),o=n(95244),l=!0,u=31536e6,c=((r={}).CLOSE_LOGIN_LIKE="close_login_like",r.CLOSE_LOGIN_COMMENT="close_login_comment",r.CLOSE_LOGIN_FAVORITE="close_login_favorite",r.CLOSE_LOGIN_SHARE="close_login_share",r.CLOSE_SHARE_POPUP="close_share_popup",r.AVATAR_HOVER="avatar_hover",r.HIGH_VV_COUNT="high_vv_count",r.LOW_ENGAGEMENT="low_engagement",r),d="llm_inference_cool_down",s=(a={},(0,i._)(a,o.Y.LOGIN_TO_LIKE,{messageKey:"llmAssist_web_msg1_body",defaultMessage:"Want to see more videos like this? Like this video by logging in",ctaKey:"llmAssist_web_msg1CTA_btn",defaultCta:"Log in to like"}),(0,i._)(a,o.Y.LOGIN_TO_COMMENT,{messageKey:"llmAssist_web_msg2_body",defaultMessage:"Leave a comment and join the conversation",ctaKey:"llmAssist_web_msg2CTA_btn",defaultCta:"Log in to comment"}),(0,i._)(a,o.Y.LOGIN_TO_FAVORITE,{messageKey:"llmAssist_web_msg3_body",defaultMessage:"Log in to save this video and watch it later",ctaKey:"llmAssist_web_msg3CTA_btn",defaultCta:"Log in to save"}),(0,i._)(a,o.Y.LOGIN_TO_SHARE_WITH_FRIEND,{messageKey:"llmAssist_web_msg4_body",defaultMessage:"Share this video with your friends!",ctaKey:"llmAssist_web_msg4CTA_btn",defaultCta:"Log in to share"}),(0,i._)(a,o.Y.LOGIN_FOR_BETTER_RECOMMENDATION,{messageKey:"llmAssist_web_msg5_body",defaultMessage:"See more videos like this and other personalized content",ctaKey:"llmAssist_web_msg5CTA_btn",defaultCta:"Log in"}),(0,i._)(a,o.Y.REDIRECT_TO_EXPLORE_PAGE,{messageKey:"llmAssist_web_msg6_body",defaultMessage:"Discover popular categories on the Explore page",ctaKey:"llmAssist_web_msg6CTA_btn",defaultCta:"Explore"}),(0,i._)(a,o.Y.REDIRECT_TO_CREATOR_PAGE,{messageKey:"llmAssist_web_msg7_body",defaultMessage:"View this creator's profile",ctaKey:"llmAssist_web_msg7CTA_btn",defaultCta:"View"}),(0,i._)(a,o.Y.SHARE_TO_OTHER_SOCIAL_MEDIA,{messageKey:"llmAssist_web_msg8_body",defaultMessage:"Share this video link anywhere!",ctaKey:"llmAssist_web_msg8CTA_btn",defaultCta:"Share"}),a),v={1:o.Y.LOGIN_TO_LIKE,2:o.Y.LOGIN_TO_COMMENT,3:o.Y.LOGIN_TO_FAVORITE,4:o.Y.LOGIN_TO_SHARE_WITH_FRIEND,5:o.Y.LOGIN_FOR_BETTER_RECOMMENDATION,6:o.Y.REDIRECT_TO_EXPLORE_PAGE,7:o.Y.REDIRECT_TO_CREATOR_PAGE,8:o.Y.SHARE_TO_OTHER_SOCIAL_MEDIA}},35755:function(e,t,n){n.d(t,{V:function(){return k}});var r=n(79066),a=n(6586),i=n(72516),o=n(40099),l=n(43264),u=n(95244),c=n(95794),d=n(287),s=n(60724),v=n(18779),f=n(93408),p=n(5377),_=n(42646),y=n(56904),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.Y.LOGIN_TO_LIKE;return{actionString:e}},m=function(e){var t=e.triggerEvent,n=u.Y.LOGIN_TO_LIKE;switch(t){case f.ey.CLOSE_LOGIN_LIKE:n=u.Y.LOGIN_TO_LIKE;break;case f.ey.CLOSE_LOGIN_COMMENT:n=u.Y.LOGIN_TO_COMMENT;break;case f.ey.CLOSE_LOGIN_FAVORITE:n=u.Y.LOGIN_TO_FAVORITE;break;case f.ey.CLOSE_LOGIN_SHARE:n=u.Y.LOGIN_TO_SHARE_WITH_FRIEND;break;case f.ey.HIGH_VV_COUNT:n=u.Y.LOGIN_FOR_BETTER_RECOMMENDATION;break;case f.ey.LOW_ENGAGEMENT:n=u.Y.REDIRECT_TO_EXPLORE_PAGE;break;case f.ey.AVATAR_HOVER:n=u.Y.REDIRECT_TO_CREATOR_PAGE;break;case f.ey.CLOSE_SHARE_POPUP:n=u.Y.SHARE_TO_OTHER_SOCIAL_MEDIA;break;default:n=u.Y.LOGIN_TO_LIKE}return h(n)},g=function(e){switch(e){case"close_login_like":return"The user clicked the like button and then closed the login popup";case"close_login_comment":return"The user tried to comment on a video and then closed the login popup";case"close_login_favorite":return"The user tried to favorite a video and then closed the login popup";case"close_login_share":return"The user tried to share a video to friends and then closed the login popup";case"close_share_popup":return"The user tried to share a video to other social media platform, but did not complete, and closed the share popup";case"avatar_hover":return"The user hovered over a video creator's avatar";case"high_vv_count":return"The user has watched more than 5 videos";case"low_engagement":return"The user has watched multiple videos with very short viewing time";default:return e}},b=n(23630),P=function(e){return{vv_count:0,play_duration:0,avg_play_duration:0,vv_finish:0,page_view:0,like_cnt:0,comment_cnt:0,favorite_cnt:0,follow_cnt:0,share_cnt:0,login_button_clicked_cnt:0,first_active_date:0,launch_mode:"",region:"",hardware_score:"",network_downlink:"",time_of_day_landing:0,day_of_week:"",is_login:!1,trigger_event:g(e)}},T=function(e){try{var t,n=(0,c._S)(s.ne)||"{}",r=JSON.parse(n),a=new Date().toLocaleDateString("en-US"),i=Object.keys(r[a]||{})[0];if(!i||!(null==(t=r[a])?void 0:t[i]))return P(e);var o=r[a][i];return{vv_count:o.vv||0,play_duration:60*o.play_duration||0,avg_play_duration:o.vv>0?60*o.play_duration/o.vv:0,vv_finish:o.video_finish||0,page_view:o.page_view||0,like_cnt:o.like_cnt||0,comment_cnt:o.comment_cnt||0,favorite_cnt:o.favorite_cnt||0,follow_cnt:o.follow_cnt||0,share_cnt:o.share_cnt||0,login_button_clicked_cnt:o.login_button_clicked_cnt||0,first_active_date:o.first_active_date||0,launch_mode:o.launch_mode||"",region:o.region||"",hardware_score:String(o.hardware_score||""),network_downlink:String(o.network_downlink||""),time_of_day_landing:o.time_of_day_landing||0,day_of_week:(0,b.O)(o.day_of_week||""),is_login:!!o.is_login,trigger_event:g(e)}}catch(t){return console.error("Error preparing SPF request:",t),P(e)}},k=function(){var e,t=null!=(e=(0,l.W)(function(){return["user","webIdCreatedTime"]},[]))?e:{},n=t.user,h=t.webIdCreatedTime,g=!!n,P=(0,a._)((0,o.useState)(!1),2),k=P[0],C=P[1],E=(0,b.z)(),S=E.isInSPFTreatment,R=E.isInSPFEarlyInterestSelector,A=E.isInSPFNormalInterestSelector,w=(0,a._)((0,v.Ek)(),2)[1].showPopup,I=(0,o.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r._)(function(){var n,a,o;return(0,i.__generator)(this,function(l){switch(l.label){case 0:return[4,(0,r._)(function(){var t;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,r._)(function(){var t,n,r,a,o;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,4,,5]),!f.zU)return[3,1];return t=m({userMetrics:{},triggerEvent:e}),[3,3];case 1:return n=T(e),[4,_.h.get("/api/spf/prompt/",{query:(0,p._)({},n,{aid:1988,app_language:"en",device_platform:"web_pc",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:y.Z4.FixedWww})];case 2:if((r=i.sent())&&200===r.statusCode||console.error("API error: ".concat((null==r?void 0:r.statusMsg)||"Unknown error")),void 0===(a=r.action_event)||!(o=f.yR[a]))return[2,null];t={actionString:o},i.label=3;case 3:if(!t.actionString||!f.Gh[t.actionString])return[2,null];return[2,t.actionString];case 4:return console.error("LLM inference error:",i.sent()),[2,null];case 5:return[2]}})})()];case 1:if(t=n.sent())return[2,{actionString:t}];return[2,null]}})})()];case 1:if(n=l.sent())return w({actionString:o=(a=n.actionString)&&Object.keys(t).includes(a)?a:u.Y.REDIRECT_TO_EXPLORE_PAGE,actionHooksMap:t}),[2,o];return[2,null]}})})()},[w]);return{maybeTriggerInference:(0,o.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r._)(function(){var n,r;return(0,i.__generator)(this,function(a){switch(a.label){case 0:if(!S||(R||A)&&"1"!==(0,c._S)(s.Is,"0")||g||k||!(0,d.m)(h)||(n=(0,c._S)(f.zf))&&Date.now()-parseInt(n,10)<f.gc)return[2,null];a.label=1;case 1:return a.trys.push([1,,3,4]),C(!0),[4,I(e,t)];case 2:return(r=a.sent())&&(0,c.AP)(f.zf,Date.now().toString()),[2,r];case 3:return C(!1),[7];case 4:return[2]}})})()},[S,R,A,g,k,h,I])}}},23630:function(e,t,n){n.d(t,{O:function(){return o},z:function(){return l}});var r=n(72961),a=n(43264),i=n(54363),o=function(e){return({0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"})["string"==typeof e?parseInt(e,10):e]||""},l=function(){var e,t=(0,r.L$)((0,a.W)(function(){return["abTestVersion"]},[])).abTestVersion,n=null!=(e=(0,i.qt)(t,"webapp_spf"))?e:"v0";return{isInSPFTreatment:"v0"!==n,isInSPFEarlyInterestSelector:"v1"===n,isInSPFNormalInterestSelector:"v2"===n,isInSPFIneffectiveInterestSelector:"v3"===n}}},77514:function(e,t,n){n.d(t,{e:function(){return a}});var r=n(69513),a=(0,n(82761).$)("CoreContentContext@tiktok/fe-shared")({armCoreContentEvent:r.A})},39037:function(e,t,n){n.d(t,{K:function(){return m},v:function(){return g}});var r=n(40099),a=n(35383),i=n(60724),o=n(95533),l=n(47149),u=n(95794),c=n(95244),d=n(93408),s=n(35755),v=function(){try{var e,t=(0,u._S)(i.ne)||"{}",n=JSON.parse(t),r=new Date().toLocaleDateString("en-US"),a=Object.keys(n[r]||{})[0];if(!a||!(null==(e=n[r])?void 0:e[a]))return;var o=n[r][a];return o.vv>0?60*o.play_duration/o.vv:0}catch(e){console.error("Error getting avg_play_duration from feature store:",e);return}},f=function(){var e=(0,s.V)().maybeTriggerInference,t=(0,r.useCallback)(function(){o.q.handleEnterExplore({enter_method:l.c.SPFCTAExplore}),window.location.href="/explore"},[]);return{triggerInferenceBasedOnVideoView:(0,r.useCallback)(function(n){try{var r=v(),i=(0,u._S)("w_g_vv"),o=i?parseInt(i,10):0;if(o>5){var l=(0,a._)({},c.Y.REDIRECT_TO_EXPLORE_PAGE,t);n&&(l[c.Y.LOGIN_FOR_BETTER_RECOMMENDATION]=n),e(d.ey.HIGH_VV_COUNT,l)}else o>=3&&void 0!==r&&r<2&&e(d.ey.LOW_ENGAGEMENT,(0,a._)({},c.Y.REDIRECT_TO_EXPLORE_PAGE,t))}catch(e){console.error("Error triggering LLM inference based on video view:",e)}},[e,t])}},p=n(48859),_=n(59952),y=n(19642),h=n(37706),m=function(e){var t=(0,_.nr)().updateGlobalVVCount,n=(0,y.eu)(),a=f().triggerInferenceBasedOnVideoView,i=(0,h.G)({modalConfig:{query:{enter_method:"spf_cta_recommend"}}}),o=(0,r.useCallback)(function(){t(e),a(i)},[t,e,a,i]),l=(0,r.useCallback)(function(){(e===p.ey.VideoDetail||e===p.ey.BrowserMode&&n)&&(t(e),a(i))},[t,e,n,a,i]);return(0,r.useMemo)(function(){return{handleBreakCount:o,handleVvCountOnEnd:l}},[o,l])},g=function(e){var t=(null==e?void 0:e.UrlList)||[];return t.length<1?null:t}},55503:function(e,t,n){n.d(t,{K:function(){return v}});var r=n(5377),a=n(45996),i=n(2787),o=n(40099),l=n(55169),u=n(41150),c=n(17505),d=n(36500),s=(0,l.Rq)({resolved:{},chunkName:function(){return"video-player"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("2075").then(n.bind(n,73930))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 73930}},(0,r._)({},u.TN)),v=(0,o.memo)((0,o.forwardRef)(function(e,t){var n=(0,o.useRef)(null);(0,o.useImperativeHandle)(t,function(){return{play:function(e){var t,r;(null==(t=n.current)?void 0:t.play)&&(null==(r=n.current)||r.play(e))},pause:function(){var e,t;(null==(e=n.current)?void 0:e.pause)&&(null==(t=n.current)||t.pause())},seek:function(e){var t,r;(null==(t=n.current)?void 0:t.seek)&&(null==(r=n.current)||r.seek(e))},seekTime:function(e){var t,r;(null==(t=n.current)?void 0:t.seekTime)&&(null==(r=n.current)||r.seekTime(e))},onSeeked:function(e){var t,r;(null==(t=n.current)?void 0:t.onSeeked)&&(null==(r=n.current)||r.onSeeked(e))},onSeeking:function(e){var t,r;(null==(t=n.current)?void 0:t.onSeeking)&&(null==(r=n.current)||r.onSeeking(e))},onTimeUpdate:function(e){var t,r;(null==(t=n.current)?void 0:t.onTimeUpdate)&&(null==(r=n.current)||r.onTimeUpdate(e))},getFullscreen:function(e){var t;null==(t=n.current)||t.getFullscreen(e)},exitFullscreen:function(e){var t;null==(t=n.current)||t.exitFullscreen(e)},replay:function(){var e,t;(null==(e=n.current)?void 0:e.replay)&&(null==(t=n.current)||t.replay())},updatePlayer:function(e){var t,r;(null==(t=n.current)?void 0:t.updatePlayer)&&(null==(r=n.current)||r.updatePlayer(e))},changeResolution:function(e){var t,r;(null==(t=n.current)?void 0:t.changeResolution)&&(null==(r=n.current)||r.changeResolution(e))},getResolutionInfo:function(){var e;return null==(e=n.current)?void 0:e.getResolutionInfo()},get currentTime(){var e,t;return null!=(t=null==(e=n.current)?void 0:e.currentTime)?t:0},get duration(){var r,a;return null!=(a=null==(r=n.current)?void 0:r.duration)?a:0},get currentCanPlay(){var i,o;return null!=(o=null==(i=n.current)?void 0:i.currentCanPlay)&&o}}});var l=(0,c.Sc)(),u=l.isUseNativePlayer,v=l.adaptBitrateVid;return u?(0,i.Y)(s,(0,a._)((0,r._)({},e),{ref:n})):(0,i.Y)(d.A,(0,a._)((0,r._)({},e),{adaptBitrateVid:v,ref:n}))}))},56940:function(e,t,n){n.d(t,{CZ:function(){return d},Ec:function(){return u},K3:function(){return c},Le:function(){return o},R:function(){return l}});var r=n(12751),a=n(48859),i=n(14610),o=(0,r.default)("div",{target:"e1sq7r4z0",label:"0be0dc34--DivContainer"})(function(e){var t=e.horizontal,n=e.mode,r=e.theme.colors;return[{width:"100%",height:"100%",overflow:"hidden",position:"relative",backgroundColor:n===a.ey.ThreeColumn?r.BGPlaceholderOpaque:r.BGPlaceholderDefault,backgroundSize:t?"contain":"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},n===a.ey.BrowserMode||n===a.ey.ThreeColumn||n===a.ey.FullscreenMode&&{display:"flex",alignItems:"center",justifyContent:"center"}]}),l=(0,r.default)("img",{target:"e1sq7r4z1",label:"0be0dc34--ImgPoster"})(function(e){var t=e.horizontal,n=e.mode,r=e.fetchPriority,i=void 0===r?"auto":r;return n!==a.ey.BrowserMode&&n!==a.ey.VideoDetail&&n!==a.ey.FullscreenMode?{width:"100%",height:"100%",objectFit:"cover",fetchPriority:i}:{width:"100%",height:"100%",objectFit:t?"contain":"cover",fetchPriority:i}}),u=(0,r.default)("div",{target:"e1sq7r4z2",label:"0be0dc34--DivBasicPlayerWrapper"})(function(e){var t=e.horizontal,n=void 0===t||t;return{position:"absolute",left:0,top:0,width:"100%",height:"100%","& .xgplayer video":{display:"block",width:"100%",height:"100%",objectFit:n?"contain":"cover"},"& .tiktok-web-player video":{display:"block",width:"100%",height:"100%",objectFit:n?"contain":"cover"}}}),c=(0,r.default)(i.R,{target:"e1sq7r4z3",label:"0be0dc34--StyledLoading"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),d=(0,r.default)("video",{target:"e1sq7r4z4",label:"0be0dc34--VideoBasic"})(function(e){return{display:"block",width:"100%",height:"100%",objectFit:e.horizontal?"contain":"cover"}})},36500:function(e,t,n){n.d(t,{A:function(){return eU}});var r=n(5377),a=n(45996),i=n(16327),o=n(6586),l=n(2787),u=n(69513),c=n(32224),d=n(40099),s=n(24683),v=n(35144),f=n(73580),p=n(80281),_=n(69597),y=n(48859),h=n(59952),m=n(19642),g=n(89241),b=n(82726),P=n(72961),T=n(32049),k=n(15764),C=n(6232),E=n(13610),S=n(43264),R=n(23636),A=n(33611),w=n(50840),I=n(36413),M=n(33751),O=n(65362),L=n(79066),D=n(72516),V=n(73522),x=n(71551),N=n(55301),F=n(89140),H=n(90542),B=n(94805),U=n(81269),G=n(41386),q=n(54333),W=n(28731),Q=n(27542);function z(e,t,n){try{if(!e)return"";var r=new URL(e).host;if(t.filter(function(e){return e===r}).length>0)return"anonymous";if(n.filter(function(e){return e===r}).length>0)return"use-credentials";return""}catch(e){return""}}var j={player_type:"playerType",video_play_mode:"videoPlayMode",preloader:"preloader",muted:"muted",format:"format"},K=null;function Y(e,t){var n,r,a,i,o,l,u,c,d,s,v,f,p=null!=(d=null==e||null==(n=e.element)?void 0:n.error)?d:null,_=null==e||null==(r=e.element)?void 0:r.buffered,y=null==e?void 0:e.currentTime,h=null==e?void 0:e.type,m=(null==e?void 0:e.curDefinition)||{};return{buffered:_,currentTime:y,ended:null==e||null==(a=e.element)?void 0:a.ended,currentSrc:null!=t?t:null==e||null==(i=e.element)?void 0:i.currentSrc,duration:null==e?void 0:e.duration,readyState:null==e||null==(o=e.element)?void 0:o.readyState,networkState:null==e||null==(l=e.element)?void 0:l.networkState,error:p?{code:null==p?void 0:p.code,message:null!=(s=null==e||null==(u=e.element)?void 0:u.error)?s:(null==p?void 0:p.message)||"UNKNOWN_ERROR_MESSAGE",MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4}:null,playerType:h,volume:null==e?void 0:e.volume,muted:null==e?void 0:e.muted,videoBitrate:null==m?void 0:m.bitrate,videoQuality:null==m?void 0:m.definition,codecType:null!=(v=null==m?void 0:m.codecType)?v:"h264",play_url:null!=(f=null==e||null==(c=e.element)?void 0:c.currentSrc)?f:t}}function X(e,t){!U.r.level||(0,O.fU)()||(window[e]=t)}function J(){return{enableReuse:!1,enableMultiple:!0,minBuffer:0,defaultMSE:!1}}var $=null,Z=null,ee=[],et={group1:["v16-webapp.tiktok.com","v16m-webapp.tiktokcdn-us.com"],group2:["v16-webapp-prime.tiktok.com","v16-webapp-prime.us.tiktok.com","v19-webapp-prime.us.tiktok.com"]};function en(e,t,n){if(t.length>0){ee=[],t.forEach(function(e){ee.push(e)}),V.i.clearTask(e);var r=t.map(function(e,t){return{order:t,data:e}});V.i.addPreloadList(r,e)}}function er(e,t){V.i.changeCodec(t,e)}var ea=function(e){return z(e.url,et.group1,et.group2)===B.uJ?{credentials:"include"}:{}},ei=function(e,t){var n=t.playerPreload,i=t.playerUpgrade,o=t.playerUpgradePreload,l=t.playerDemux,u=t.preloadType,c=null==i?void 0:i.preload;V.i.update((0,a._)((0,r._)({getRequestOptionsCallback:ea},n,c,null==o?void 0:o.preloaderConfig,null==l?void 0:l.preloaderConfig),{preloadType:void 0===u?0:u}),e),(0,M.as)((null==n?void 0:n.maxQueueCount)||3),window.MultiMediaPreloader=V.i};function eo(e){return e===R.b.ACTIVE}var el=function(e){e&&W.DS.setCustomTracker({event:function(e,t){H.f.event(e,t)}})},eu=function(e){var t=e.config.H264DefinitionList;if(t&&t.length>0){var n=t[0];return e.emit("playCatch","MP4_3",{errorCode:8200,message:"width and height is 0"}),e.setConfig({defaultBitrate:n.bitrate,defaultDefinition:n.definition,url:n.url,codecType:n.codecType}),e.src=n.url,e.play(),!0}return!1};function ec(e){return e?(0,G._)(e,Array)?e.length>0?e[0]:"":e:""}function ed(e,t,n){var r,a=(null==e?void 0:e.playerOpenMse)||"v0",i=null==e||null==(r=e.previewConfig)?void 0:r.videoPlayMode;return n&&i?i:"v1"===a||"v2"===a?R.d.MSE:(null==t?void 0:t.videoPlayMode)||R.d.AUTO}function es(e){return"three_column"===e}function ev(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?(0,q._)(t).concat((0,q._)(n)):t}function ef(e,t){return("v1"===e||"v2"===e)&&(!!t&&"h265"===t.codec||!!w.a.canUseHevc("v2"===e?1:2))}var ep=["video_detail","homepage_hot"],e_=n(28298),ey={color:"#fff",backgroundColor:"#2a9d1f",position:"absolute",zIndex:2,top:"30px"},eh=function(e){if(!e)return{};var t=e.format,n=e.renderState,r=e.resolution,a=e.playerType;return{render_state:void 0===n?"":n,video_type:void 0===t?"":t,video_quality:void 0===r?"":r,codec_format:e.codecType,player_type:void 0===a?"":a}},em=(0,d.memo)((0,d.forwardRef)(function(e,t){var n=e.containerId,i=e.classList,o=e.player,u=e.bitrateInfo,c=e.oncanplay,s=e.onplay,v=e.onwaiting,f=e.onended,p=e.ontimeupdate,_=e.onloadstart,y=e.onloadeddata,h=e.onvolumechange,m=e.onVideoPlayEnd,g=e.onResolutionReady,b=e.onerror,P=e.onpause,T=e.onplaying,E=e.onbreak,S=e.onseeking,A=e.onseeked,I=e.onloadedmetadata,L=e.subtitle,D=e.teaParams,V=e.videoDimensionParams,x=e.mode,N=e.id,F=e.containerRef,B=e.hitPreload,G=e.eventTrigger,q=(0,d.useMemo)(function(){var e,t={};if(!D)return t;var n=null==o?void 0:o.attributes,r=e_.qd.Public;D.forFriend&&(r=e_.qd.Friend),D.secret&&(r=e_.qd.Self);var a="";if(null==n?void 0:n.src){var i=n.src.match(/^(?:https?:\/\/)?([^\/\s:]+)/);a=i?i[1]:""}var l={group_id:N,author_id:D.author_id||"",play_mode:(0,e_.AI)(x),logo_type:"unwatermarked",item_status:r,play_url:n?n.src:"",host:a,aweme_type:D.aweme_type||0,pic_cnt:D.pic_cnt||0,playlist_id:D.playlist_id||"",popup_type:D.popup_type||"",size:D.size,log_id:D.log_id||"none",is_ad:D.isAd,video_width:V?V.video_width:0,video_height:V?V.video_height:0,video_duration:V?V.video_duration:0,player_type:(null==o?void 0:o.playerType)||""},u=w.M.getDeviceScore(),c=u.dScore,d=u.netScore,s=null==(e=$||Z)?void 0:e.device;return Object.assign({},{cpu_core:(null==s?void 0:s.cpu)||0,memory_size:(null==s?void 0:s.memory)||0,HEVC_supported:+(null!=s&&!!s.isHEVCSupported),hardware_score:c,network_score:d},l)},[D,V,N,x]),W=(0,d.useRef)(0),Q=(0,d.useCallback)(function(){if(!o||!D)return null;var e=o.curDefinition||{};return(0,e_.H4)(e.definition,D.definition)},[o,D]),z=(0,d.useCallback)(function(){return o&&D&&(o.curDefinition||{}).bitrate||0},[o,D]),j=(0,d.useCallback)(function(){return o&&D?(o.curDefinition||{}).codecType:null},[o,D]),K=(0,d.useCallback)(function(){var e="";if(!D)return e;var t=Q();return D.videoQuality&&t&&(e="".concat(D.videoQuality,"_").concat(t)),e},[D,Q]),Y=(0,d.useCallback)(function(){var e={};if(D){var t,n=z(),r=j(),a=K(),i=(0,M.ZQ)(),l=(null==o?void 0:o.state)||"default";N&&(t=i.getPreloadCacheInfo(N)),e.video_bitrate=n||D.bitrate,e.video_format=D.format,e.codec_format=r||"h264",e.encoded_type=D.encodedType,e.bitrate_quality=D.videoQuality,e.video_quality=a,e.video_encodeUserTag=D.encodeUserTag,e.original_definition=D.definition,e.preload_size=t?t.byteLength:-1,e.preload_time=t?Math.floor(t.duration):-1,e.player_type=o?o.type:"defaultPlayer",e.video_type="mp4",e.render_state=l}return e},[D,Q,z,j,K,N,o]),X=(0,d.useCallback)(function(){var e=j();return e||(e="h264"),!!e&&e.indexOf("h265")>-1},[j]),J=(0,d.useCallback)(function(e){if((0,k.uQ)(C.Y.VideoRequest),q&&1!==x){var t=eh(e);H.f.event(e_.zD.Request,(0,r._)({},q,t))}},[q,x]),ee=(0,d.useCallback)(function(e){if(q&&1!==x&&o){var t,n=eh(e),r=Y(),a=X(),i=0;o.attributes&&(t=o.attributes.error,i=o.attributes.duration);var l=e.code||0,u=e.message||"";l<=0&&t&&(l=t.code,u=t.message);var c=Object.assign({},r,{error_code:String(l),error_info:u,is_bytevc1:+!!a,duration:Math.round(1e3*i),isExpired:e.isExpired||0,isSupportMP4:Number((0,O.vk)()),is_before:+(0!==e.status),retry_c:e.retryCount||0,retry_l:e.retryList||[]},q,n);H.f.event(e_.zD.PlayFailed,c)}},[q,Y,X,x]),et=(0,d.useCallback)(function(e){if(null==E||E(),q&&1!==x){var t,n,i=eh(e),l=Y(),u=X(),c=0,d=e.currentTime,s=0,v=1,f=!1,p=e.duration-e.pauseDuration;(null==o?void 0:o.attributes)&&(t=o.attributes.error,c=o.attributes.duration||0,s=o.attributes.readyState,n=o.attributes.buffered,v=o.attributes.volume,f=o.attributes.muted);var _=Math.min(p,1e3*c),y=z();y<=0&&(y=(null==D?void 0:D.bitrate)?D.bitrate:0);var h=null==e?void 0:e.costTimes,g=y/8*(_/1e3),b=Object.assign({},l,{is_success:t?"0":"1",video_duration:Math.round(1e3*c),play_duration:Math.round(1e3*d),buffering:+(s<=2),duration:Math.round(p),wait_duration:0,cur_cache_duration:(0,e_.L8)(n),local_time_ms:Date.now(),volume_level:v,volume_change:0,muted:+!!f,click_mute:0,session_order:0,play_size:Math.round(g),data_player_type:2,cache_size:0,cache_duration:0,cdn_size_video:0,is_bytevc1:+!!u,drop_frame:0,total_play_frame:0,drop_frame_rate:0,drop_frame_duration:0,cost_times:h,end_state:null==e?void 0:e.endState},q,i),P=(0,e_.Ug)(o),T=(0,a._)((0,r._)({vid:N,playPos:Math.round(1e3*d),stayDuration:(null==h?void 0:h.stay_dur)||0,videoQuality:1},P),{logid:(null==D?void 0:D.log_id)||"nonw",endState:null==e?void 0:e.endState,costTimes:h});null==m||m(T),H.f.event(e_.zD.PlayEnded,b)}},[q,Y,X,z,D,x]),en=(0,d.useCallback)(function(e){if((0,k.uQ)(C.Y.VideoFirstFrame),q&&1!==x){var t=eh(e),n=Object.assign({},{feed_total:e.duration},q,t),a=(0,k.xt)();H.f.event(e_.zD.FirstFrame,(0,r._)({},n,a))}},[q,x]),er=(0,d.useCallback)(function(e){if(q&&1!==x){var t=0,n=!1;(null==o?void 0:o.attributes)&&(t=o.attributes.duration,n=o.attributes.muted);var r=X(),a=Object.assign({},Y(),{duration:Math.round(e.duration),is_bytevc1:+!!r,video_duration:Math.round(1e3*t),muted:+!!n,bitrate_set:(0,e_.OK)(u),quality_bitrate:(0,e_.n2)(u),duration_from_load:Math.round((null==e?void 0:e.durationFromLoaded)||0),duration_with_load:Math.round((null==e?void 0:e.durationWithLoaded)||0),is_same:0,retry_c:e.retryCount||0,retry_l:e.retryList||[]},q);H.f.event(e_.zD.PlayQuality,a)}},[q,X,u,Y,x]),ea=(0,d.useCallback)(function(e){if(q&&1!==x&&(null==o?void 0:o.state)===R.b.ACTIVE){var t=eh(e),n=Y(),r=0;(null==o?void 0:o.attributes)&&(r=o.attributes.currentTime);var a=X(),i=Object.assign({},n,{duration:Math.round(e.duration),is_bytevc1:+!!a,position:Math.round(1e3*r),should_filter:"0",droppedRate:0,end_type:0,block_type:W.current},q,t);H.f.event(e_.zD.Block,i)}},[q,X,Y,x]),ei=(0,d.useCallback)(function(e){e.preventDefault()},[]),eo=(0,d.useCallback)(function(){(0,k.uQ)(C.Y.VideoCanPlay),null==c||c()},[c]),el=(0,d.useCallback)(function(e){null==_||_(e)},[_]),eu=(0,d.useCallback)(function(e){null==y||y(e)},[y]),ec=(0,d.useCallback)(function(e){null==s||s(e)},[s]),ed=(0,d.useCallback)(function(e){null==v||v(e)},[v]),es=(0,d.useCallback)(function(e){null==f||f(e)},[f]),ev=(0,d.useCallback)(function(){2>((null==o?void 0:o.readyState)||0)&&"v1"===G||null==p||p()},[p,o,G]),ef=(0,d.useCallback)(function(e){null==b||b(e)},[b]),ep=(0,d.useCallback)(function(e){null==P||P(e)},[P]),em=(0,d.useCallback)(function(e){null==T||T(e)},[T]),eg=(0,d.useCallback)(function(e){null==A||A(e)},[A]),eb=(0,d.useCallback)(function(e){null==S||S(e)},[S]),eP=(0,d.useCallback)(function(e){null==I||I(e)},[I]),eT=(0,d.useCallback)(function(e){null==h||h(e)},[h]),ek=(0,d.useCallback)(function(e){e.id=N,null==g||g(e)},[g,N]);return(0,d.useEffect)(function(){return function(){(null==o?void 0:o.metrics)&&o.metrics.stop()}},[N]),(0,d.useEffect)(function(){if(null==o?void 0:o.metrics)return o.metrics.bind("PlayEnded",et),function(){o.metrics&&o.metrics.clear("PlayEnded")}},[et]),(0,d.useEffect)(function(){if(null==o?void 0:o.metrics)return o.metrics.on("VideoRequest",J),o.metrics.on("Block",ea),o.metrics.on("PlayQuality",er),o.metrics.on("PlayFailed",ee),o.metrics.on("FirstFrame",en),o.element&&o.element.addEventListener("contextmenu",ei),o.event&&(o.event.on("canplay",eo),o.event.on("play",ec),o.event.on("waiting",ed),o.event.on("ended",es),o.event.on("timeupdate",ev),o.event.on("error",ef),o.event.on("pause",ep),o.event.on("playing",em),o.event.on("loadstart",el),o.event.on("loadeddata",eu),o.event.on("volumechange",eT),o.event.on("resolutionReady",ek),o.event.on("seeking",eb),o.event.on("seeked",eg),o.event.on("loadedmetadata",eP)),function(){o.metrics&&(o.metrics.off("VideoRequest",J),o.metrics.off("Block",ea),o.metrics.off("PlayQuality",er),o.metrics.off("PlayFailed",ee),o.metrics.off("FirstFrame",en),o.element&&o.element.removeEventListener("contextmenu",ei),o.event&&(o.event.off("canplay",eo),o.event.off("play",ec),o.event.off("waiting",ed),o.event.off("ended",es),o.event.off("timeupdate",ev),o.event.off("error",ef),o.event.off("pause",ep),o.event.off("playing",em),o.event.off("loadstart",el),o.event.off("loadeddata",eu),o.event.off("volumechange",eT),o.event.off("resolutionReady",ek),o.event.off("seeking",eb),o.event.off("seeked",eg),o.event.off("loadedmetadata",eP)))}},[ec,eo,ed,es,ev,ef,ep,em,el,eu,J,ea,er,ee,en,ei,c,_,y,ek,eP,eg,eb,eT]),(0,l.FD)("div",{id:void 0===n?"":n,className:(void 0===i?[]:i).join(" "),ref:F,children:[L?(0,l.Y)("track",{default:!0,kind:"subtitles",srcLang:L.language,src:L.url}):null,U.r.level>0?(0,l.FD)("div",{style:ey,children:[null==o?void 0:o.uuid,"_",null==o?void 0:o.state,B?"_hitPreload":""]}):null]})})),eg={playerReuse:"v0",playerPreload:{vid:"v0",maxQueueCount:3,preloadMaxCacheCount:5,preloadTime:10,segmentMinDuration:10,minBufferLength:10,startPreloadControl:!1,startPreloadMinBuffer:0,startPreloadMinPosTime:0},bitrateSelect:{vid:"v0",selector:"default",qualityType:20,hevcQualityType:14,config:{bitrateLower:2e5,bitrateRange:[2e5,15e5],bitrateUpper:2e6,mode:"buffer-info",paramBf:.3,paramBp:.5,paramLower:.6,paramUpper:1.5,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlLower:10,paramVlUpper:10,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7}},playerUpgrade:{vid:"v0",playerType:"XG",preload:{},playerConfig:{},maxCacheCount:5},playerH265Soft:{vid:"v0",enableSoftwareH265:0,config:void 0},playerDash:{vid:"v0",format:"MP4"},playerOpenMse:"v0",eventTrigger:"v0",playerHevc:"v0",audioEqualizer:{vid:"v0",enable:!1}},eb={Chrome:{cpuCore:0,dScore:0,score:-2,gpuScore:0,hevcQualityType:14,checkLevel:2,pageNames:["video_detail","homepage_hot","homepage_follow","others_homepage","explore_page"],playModes:["video_detail","one_column","browser_mode","immersive_player","three_column"]},Edge:{cpuCore:0,dScore:0,score:-2,gpuScore:0,hevcQualityType:14,checkLevel:2,pageNames:["video_detail","homepage_hot","homepage_follow","others_homepage","explore_page"],playModes:["video_detail","one_column","browser_mode","immersive_player","three_column"]}},eP="PlayerLife",eT="PlayerCall",ek=(0,d.memo)((0,d.forwardRef)(function(e,t){var n,i=e.id,u=e.url,c=e.mode,s=e.muteSetting,v=e.playProgress,f=e.duration,p=e.playbackRate,_=void 0===p?1:p,m=e.onLoadStart,b=e.onLoadedData,P=e.onCanPlay,T=e.onPause,E=e.onPlay,S=e.onPlaying,I=e.onTimeUpdate,G=e.onWaiting,q=e.onEnded,W=e.onError,ey=e.onUnmount,eh=e.onVideoChange,ek=e.onBreak,eC=e.onVideoVolumeChange,eE=e.onVideoPlayEnd,eS=e.onAutoplayPrevented,eR=e.onResolutionReady,eA=e.userResolution,ew=e.subtitleStruct,eI=e.subtitleList,eM=e.curSubtitle,eO=e.onSubtitleCallback,eL=void 0===eO?function(e){}:eO,eD=e.bitrateInfo,eV=e.defaultDefinition,ex=e.preloadUrlsList,eN=e.preloader,eF=e.defaultBitrate,eH=void 0===eF?-1:eF,eB=e.playerInitHost,eU=e.teaParams,eG=e.autoPlay,eq=e.autoReplay,eW=void 0===eq||eq,eQ=e.size,ez=e.pathId,ej=void 0===ez?"":ez,eK=e.metrics,eY=e.playbackAbTestInfo,eX=void 0===eY?eg:eY,eJ=e.isTTP,e$=e.videoDimensionParams,eZ=e.vIndex,e0=void 0===eZ?-1:eZ,e1=e.extInfo,e2=void 0===e1?{}:e1,e4=e.renderState,e3=void 0===e4?R.b.ACTIVE:e4,e5=e.urlList,e6=e.videoSource,e7=(0,o._)((0,d.useState)(null),2),e9=e7[0],e8=e7[1],te=(0,d.useRef)(null),tt=(0,d.useRef)(new Date().getTime()),tn=(0,d.useRef)(!1),tr=(0,d.useRef)(0),ta=(0,d.useRef)(null),ti=(0,d.useRef)(),to=(0,d.useRef)(null),tl=(0,d.useRef)(function(){if(K)return K;for(var e={playerType:"",videoPlayMode:"",preloader:"",format:"",codec:""},t=(location.search||"").replace("?","").split("&"),n=0;n<t.length;n++){var r=t[n].split("=");void 0!==j[r[0]]&&(e[j[r[0]]]=r[1])}return K=e,e}()),tu=(0,d.useRef)(e3),tc=(0,d.useRef)(R.P.XG),td=(0,d.useRef)(null),ts=(0,h.Ul)(),tv=(0,d.useRef)(!1),tf=(0,d.useRef)(null),tp=(0,o._)((0,d.useState)(!1),2),t_=tp[0],ty=tp[1];eB&&(et=eB);var th=(0,o._)((0,d.useState)(!1),2),tm=th[0],tg=th[1],tb=(n=(0,g.i3)(),c===y.ey.ThreeColumn?s:s||n),tP=(0,g.R4)(),tT=(0,g.S4)().setMute,tk=w.M.checkHevcResult(!0),tC=(0,d.useMemo)(function(){return(0,r._)({},eX,U.r.playbackAbTestInfo)},[eX]),tE=null==tC?void 0:tC.playerH265Soft,tS=(0,d.useCallback)(function(e,t){(0,O.AX)(t)&&er(tc.current,R.C.H264)},[i,c,ej,to]),tR=(0,d.useCallback)(function(){null==eS||eS()},[i,c,ej]);(0,d.useEffect)(function(){var e;eN.setPreloadIndex(null!=(e=null==ts?void 0:ts.index)?e:0)},[ts]),(0,d.useEffect)(function(){var e,t,n,a,i,o=(0,e_.AI)(c);w.M.playMode=o,w.M.pageName=ej,w.a.getInstance().needPersist=!0,w.M.setHevcEffectiveConditions(eb),tk=w.M.checkHevcResult(!0);var l=tC.playerReuse,u=tC.playerHevc,d=tC.playerPoolControl;N.m.setPlayerH265SoftInfo(tE),(0,O.Tb)("setPlayerH265SoftInfo0",null==tE?void 0:tE.enableSoftwareH265);var s=N.m.use(),v=N.m.canUse(),f=ef(void 0===u?"v0":u,tl.current),p=tk.open||s||f?R.C.H265:R.C.H264,_=tC.playerUpgrade,y=tC.playerDash;tc.current=function(e,t,n){if(n.playerType===R.P.NEW_TT||n.playerType===R.P.XG)return n.playerType;var r=R.P.XG;return e?r:r=t===R.P.NEW_TT?R.P.NEW_TT:R.P.XG}(v,(null==_?void 0:_.playerType)||R.P.XG,tl.current);var h=(e=(null==y?void 0:y.format)||R.V.MP4,t=tc.current,"three_column"!==o&&t===R.P.NEW_TT?e:R.V.MP4);V.i.changeFormat(h),n=tc.current,a=v?"v0":l,i=null,n===R.P.NEW_TT?(Z||(Z=new x.mx(J())),i=Z):($||($=new x.SN(J())),i=$),a&&i.setConfig((0,r._)({enableReuse:"v0"!==a,needReset:"v1"===a},void 0===d?{}:d)),td.current=i,X("_multimediaPool",td.current),er(tc.current,p)},[]),(0,d.useEffect)(function(){N.m.setPlayerH265SoftInfo(tE),(0,O.Tb)("setPlayerH265SoftInfo1",null==tE?void 0:tE.enableSoftwareH265);var e=N.m.canUse(),t=ef(tC.playerHevc),n=tk.open||t||N.m.use()?R.C.H265:R.C.H264;if(tc.current===R.P.NEW_TT&&e){var r=ee;V.i.clearAll(R.P.NEW_TT),r&&en(tc.current,r,i);var a=null==ta?void 0:ta.current;a&&V.i.attachPlayer(a),er(tc.current,n)}else er(tc.current,n);(0,O.Tb)(eT,"changePreloadCodec",i,n,tk.open,"state:".concat(N.m.state),"isNewTT:".concat(tc.current," softHevcCanUse:").concat(e),N.m.checkResult)},[i,tk.open,tk.openSrc,null==tE?void 0:tE.enableSoftwareH265,N.m.state]);var tA=(0,d.useCallback)(function(e){var t,n=e.player;if(n){var r=n.element;(0,O.y8)(r)&&(eu(n),er(tc.current,R.C.H264)),null==(t=ta.current)||t.off("loadedmetadata",tA)}},[i,c,ej,to]),tw=function(e){(0,O.Tb)(eT,"handlerPreloadInfoReady",e),(0,M.ZQ)().setPreloadCacheInfo(i,e),ty(!0)},tI=(0,d.useMemo)(function(){return eI&&eI.length>0?eI:[]},[eI]),tM=(0,d.useMemo)(function(){return ex.length},[i,ex]);(0,d.useEffect)(function(){var e,t=tC.playerPreload,n="number"==typeof(e=(null==t?void 0:t.vid)||"v0")?e:"boolean"==typeof e?+!!e:0===e.indexOf("v")&&2===e.length?parseInt(e[1],10):parseInt(e,10),r=N.m.use();(0,O.Tb)(eP,"addPreloadList",i,r,ex.map(function(e){return e.id})),n>0&&en(r||tc.current!==R.P.NEW_TT?R.P.XG:R.P.NEW_TT,ex,i)},[i,tM]),(0,d.useEffect)(function(){var e,t,n,r,a;tI.length>0?(ti.current?ti.current.setSubTitles(tI):(ti.current=new x.SX({subTitlesList:tI}),null==(e=ti.current)||e.on("update",function(e){eL(e)}),null==(t=ti.current)||t.on("change",function(e){eL(e)}),null==(n=ti.current)||n.on("error",function(e){eL(e)})),ta.current&&ti.current.attach(null==(r=ta.current)?void 0:r.element)):null==(a=ti.current)||a.switchOff()},[tI,i]),(0,d.useEffect)(function(){var e,t;eM?null==(e=ti.current)||e.switch(eM):null==(t=ti.current)||t.switchOff()},[eM,i]),(0,d.useEffect)(function(){ta.current&&(null==eK||eK.setPlayerType(tc.current))},[eK,e9]),(0,d.useEffect)(function(){(0,O.Tb)(eP,"renderState",null==(e=ta.current)?void 0:e.uuid,i,e3,tb,tP);var e,t,n,r,a=e3,o=tu.current;if(ta.current){e3===R.b.BACKUP&&(a=R.b.RETAIN),tu.current=a,null==eK||eK.setRenderState(a,i),o===R.b.ACTIVE&&a!==R.b.ACTIVE&&(null==(r=ta.current)||null==(n=r.metrics)||n.stop());var l=td.current;null==l||l.updatePlayer(ta.current,a),eo(a)&&eG&&(ta.current.play(),ta.current.forceAutoplay=!0),a!==R.b.ACTIVE?ta.current.pause():X("__ttplayer",ta.current)}else e3===R.b.RETAIN&&(a=R.b.BACKUP),tu.current=a,null==eK||eK.setRenderState(a,i);(0,O.Tb)(eP,null==(t=ta.current)?void 0:t.uuid,i,"renderStateChange",i,"renderState:".concat(e3," preState:").concat(o," state:").concat(a," muted:").concat(tb," volume:").concat(tP," autoplay:").concat(eG),null==eK?void 0:eK.renderState)},[e3,eK]),(0,d.useEffect)(function(){if(!e9){var e,t=w.M.playMode,n={vIndex:e0,extInfo:(0,a._)((0,r._)({},e2),{log_id:(null==eU?void 0:eU.log_id)||"none",is_ad:+(null!=eU&&!!eU.isAd)})},o=e5&&e5.length>0?e5:u,l=tc.current===R.P.NEW_TT,c={bitrate:eH,definition:eV,duration:f,codecType:R.C.H264,url:o,format:R.V.MP4,vtype:R.V.MP4,vid:i,bitrateList:[]},d=(0,A.$)(eD||[],c),s=function(e,t,n,i){var o,l,u,c,d,s,v,f,p,_,y,h,m,g,b,P,T,k,C,E,S,I,M,L,D,V,x,F,H,U,G,q,W,j,K,Y,X,J,$,Z,ee,en,er,ei,eo,el,eu,e_,ey,eh,em,eg,eb,eP,eT,ek,eC,eE,eS,eR,eA,ew,eI,eM,eO,eL,eD,eV,ex,eN,eF,eH,eB,eU,eG,eq,eW,eQ,ez,ej,eK,eY,eX,eJ,e$,eZ,e0,e1,e2,e4,e3,e5,e6,e7,e9,e8;return e?(o=n.videoSource,l=n.id,u=n.autoplay,c=n.teaParams,d=n.volume,s=n.muted,v=n.url,f=n.appLoggerParams,p=n.hevcResult,_=n.switchPlayerTime,y=n.userResolution,h=n.startTime,m=w.M.channelInfo,g=w.M.regionInfo,P=(b=i||{}).playerHevc,T=b.bitrateSelect,k=b.playerPreload,C=b.playerDash,E=b.playerUpgrade,S=b.audioEqualizer,I=b.playerRequest,M=b.playerStuck,L=b.previewConfig,D=b.playerDemux,V=b.playerAutoSeek,x=b.playerEos,F=ef(P),H=(null==p?void 0:p.open)||F?"h265":"h264",U=o.bitrateList,G=o.audioBitrateList,q=(0,A.OK)(U,G),W="",v&&(W=z(ec(v),et.group1,et.group2)),j=W===B.uJ?{credentials:"include"}:{},K={channel:null==m?void 0:m.channel,channel_domain:null==m?void 0:m.domain,channel_type:null==m?void 0:m.type},Y=es(w.M.playMode),X=(null==g?void 0:g.region)||"",J=(null==g?void 0:g.wid)||"",$=(null==g?void 0:g.isLogin)||!1,Z=(null==f?void 0:f.extInfo)||{},ee=(C||{}).format===R.V.DASH?R.V.DASH:R.V.MP4,en=ed(i,t,Y),er=(null==E?void 0:E.playerConfig)||(null==E?void 0:E.multiplexConfig)||{fallback:ee!==R.V.DASH},D&&(er=Object.assign({},er,D.multiplexConfig||{})),I&&(er.loaderOptions=Object.assign({},er.loaderOptions,{splitRequest:I.splitRequest||0})),(null==V?void 0:V.vid)==="v1"&&(er.autoSeekWhenWaiting=!0),(null==x?void 0:x.vid)==="v1"&&(er.eosFallback=!0),M&&(er.loaderOptions=Object.assign({},er.loaderOptions,M.loaderOptions)),"AUTO"===en&&(er.fallback=!0),ei=(null==E?void 0:E.mp4ParserConfig)||{},eo=(null==E?void 0:E.maxCacheCount)||0,el={selector:(null==T?void 0:T.selector)||"default",selectConfig:(null==T?void 0:T.config)||{},quality:(null==T?void 0:T.qualityType)||20,hevcQuality:(null==T?void 0:T.hevcQualityType)||14},eu=ev(Y,null==T?void 0:T.disableResolutions,null==L?void 0:L.disableResolutions),e_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0;if(null!==t&&n){var r=n.pIndex||-1;if(t>=0&&r>=0&&t<=r&&ep.includes(e))return n}}(w.M.pageName,null==f?void 0:f.vIndex,null==T?void 0:T.playSelector),(0,O.Tb)("generatePlayerConfigTT",l,e_,Y,en,o,U,el,eu),ey=w.a.getHevcDisableInfo(),eh=N.m.getStats(),{playerType:"NEW_TT",playerConfig:{autoplay:void 0===u||u,volume:d,muted:s,playbackRate:1,codecType:H,vtype:ee,format:ee,startTime:h||0,crossOrigin:W,mp4EncryptPlayer:{closeDowngrade:!1,minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:!0,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:0,segmentMinDuration:10,reqOptions:j,getRequestOptionsCallback:ea},getRequestOptionsCallback:ea},strategyConfig:{enableSubtitle:!0,enablePreloader:(null==t?void 0:t.preloader)!=="0",enableLogger:!0,preloaderConfig:(0,a._)((0,r._)({minBufferLength:10,preloadCacheType:1,preloadMaxCacheCount:5,preloadTime:10,preloadSize:209715,segmentMinDuration:10,reqOptions:j},void 0===k?{}:k),{getRequestOptionsCallback:ea}),playSelector:e_,bitrateAdapter:(0,a._)((0,r._)({},el),{hevcQuality:14,quality:20,userSelectResolution:y||"auto"}),videoPlayMode:en,multiplexConfig:er,mp4ParserConfig:ei,maxCacheCount:eo,audioEqualizer:{enable:(null==S?void 0:S.enable)||!1,targetLoudness:(null==S?void 0:S.targetLoudness)||0},hevcDisableResolution:eu},videoInfo:(0,r._)({},o),loggerParams:{lineAppId:1988,playerCoreVersion:"",codec_type:H,tag:w.M.pageName,preTag:w.M.prePageName,preSubtag:w.M.prePlayMode,subtag:w.M.playMode,vid:l,region:X,webId:J,uid:(null==g?void 0:g.uid)||J,isLogin:$,channelConfig:K,switchPlayerTime:_,bitrateSet:q,pIndex:(null==f?void 0:f.vIndex)||-1,ext:(0,r._)((0,a._)((0,r._)({},Z,ey),{log_id:(null==c?void 0:c.log_id)||"",is_ad:+(null!=c&&!!c.isAd)}),eh),deviceScore:w.b.shortData,strategyVersion:Q.v},envInfo:{tag:w.M.pageName,subtag:w.M.playMode,preTag:w.M.prePageName,preSubtag:w.M.prePlayMode,isLogin:$}}):(eg=n.videoSource,eb=n.id,eP=n.autoplay,eT=n.teaParams,ek=n.volume,eC=n.muted,eE=n.url,eS=n.appLoggerParams,eR=n.hevcResult,eA=n.switchPlayerTime,ew=n.userResolution,eI=n.startTime,eM=w.M.channelInfo,eO=w.M.regionInfo,eL=ec(eE),eD=N.m.use(),eV=ef(null==i?void 0:i.playerHevc),ex=(null==eR?void 0:eR.open)||eV||eD?"h265":"h264",eN="".concat(eb),eF=eg.bitrate,eH=eg.definition,eU=void 0===(eB=eg.bitrateList)?[]:eB,eG=eg.audioBitrateList,eq=eg.duration,eW=eg.volumeInfo,eQ=(0,A.OK)(eU,void 0===eG?[]:eG),ez="",eL&&(ez=z(eL,et.group1,et.group2)),ej=ez===B.uJ?{credentials:"include"}:{},eK={channel:null==eM?void 0:eM.channel,channel_domain:null==eM?void 0:eM.domain,channel_type:null==eM?void 0:eM.type},eY=(null==eO?void 0:eO.region)||"",eX=(null==eO?void 0:eO.wid)||"",eJ=(null==eO?void 0:eO.isLogin)||!1,e$=(null==i?void 0:i.playerPreload)||{},eZ=(null==eS?void 0:eS.extInfo)||{},e0=null==i?void 0:i.bitrateSelect,e1=(null==i||null==(em=i.playerH265Soft)?void 0:em.disableResolution)||[],e2=null==i?void 0:i.previewConfig,e3=ed(i,t,e4=es(w.M.playMode)),e5={selector:(null==e0?void 0:e0.selector)||"default",selectConfig:(null==e0?void 0:e0.config)||{},quality:(null==e0?void 0:e0.qualityType)||20,hevcQuality:(null==e0?void 0:e0.hevcQualityType)||14},e6=ev(e4,null==e0?void 0:e0.disableResolutions,null==e2?void 0:e2.disableResolutions),(0,O.Tb)("generatePlayerConfig",eH,eN,e4,eU,e5,e6),e7=w.a.getHevcDisableInfo(),e9=N.m.getStats(),e8={loudness:(null==eW?void 0:eW.loudness)||0,peak:(null==eW?void 0:eW.peak)||0},{enableSubtitle:!0,enablePreloader:(null==t?void 0:t.preloader)!=="0",enableLogger:!0,preloader:(0,a._)((0,r._)({minBufferLength:10,preloadCacheType:1,preloadMaxCacheCount:5,preloadTime:10,preloadSize:209715,segmentMinDuration:10,reqOptions:ej},e$),{getRequestOptionsCallback:ea}),mp4EncryptPlayer:{closeDowngrade:!1,minBufferLength:10,maxBufferLength:30,needPreloadRangeList:!0,needPreloadCheck:"MSE"!==e3,needAutoBitrate:!0,removeBufferLen:60,resumePlayWaterLevel:0,segmentMinDuration:10,h265Degrade:!0,reqOptions:ej,getRequestOptionsCallback:ea},logger:{appId:548444,line_app_id:1988,playerCoreVersion:"",codec_type:ex,tag:w.M.pageName,preTag:w.M.prePageName,preSubtag:w.M.prePlayMode,subtag:w.M.playMode,vid:eb,region:eY,webId:eX,uid:(null==eO?void 0:eO.uid)||eX,isLogin:eJ,channelConfig:eK,switchPlayerTime:eA,bitrateSet:eQ,pIndex:(null==eS?void 0:eS.vIndex)||-1,ext:(0,r._)((0,a._)((0,r._)({},eZ,e7),{log_id:(null==eT?void 0:eT.log_id)||"",is_ad:+(null!=eT&&!!eT.isAd)}),e9),deviceScore:w.b.shortData,strategyVersion:Q.v},video:{codecType:ex,defaultBitrate:eF,defaultDefinition:eH,definitionList:[],duration:void 0===eq?0:eq,autoplay:void 0===eP||eP,volume:null!=ek?ek:.7,muted:eC||!1,vqscore:0,mvmaf:"",volumeInfo:e8},extra:{url:eL,actualUrl:eL,vid:eN,ignores:["play","start"],reqAuth:ez,closeMSE:!1,startTime:eI||0},hevcResult:eR,bitrateList:eU,bitrateAdapter:(0,a._)((0,r._)({},e5),{hevcQuality:14,quality:20,userSelectResolution:ew||"auto"}),enableHevcSoftwareDecode:eD,softHevcDisableResolution:e1,hevcDisableResolution:e6})}(l,tl.current,{videoSource:e6||(0,a._)((0,r._)({},c),{bitrateList:d}),id:i,autoplay:eG,teaParams:eU,volume:tP,muted:tb,url:o,appLoggerParams:n,vqscore:0,hevcResult:tk,switchPlayerTime:tt.current,userResolution:eA,startTime:v},tC);tv.current=!1,tf.current=null,te.current=s;var p=td.current,_=p.usePlayer(s,tu.current);p.mountDom(_,to.current),en(tc.current,ex,i),(0,O.Tb)(eP,"usePlayer",_.uuid,i,"autoPlay:".concat(eG," volume:").concat(tP," mute:").concat(tb," playMode:").concat(t),s,t,ej,tk,tE,"enableHevcSoftwareDecode:".concat(s.enableHevcSoftwareDecode),"playProgress:".concat(v),e6),"three_column"===t&&(_.objectFit="cover"),_.on("playCatch",tS),_.on("autoplay_was_prevented",tR),_.on(B.Wu,tw),_&&(ta.current=_,null==(e=ti.current)||e.attach(_.player),e8("xgplayer")),el(1),p.setCustomTracker({event:function(e,t){(0,O.Tb)("VodLogger",e,t),H.f.event(e,t)}})}},[eQ,i,u,c,eN,tT,eV,eJ]);var tO=(0,d.useCallback)(function(e){null==E||E(e)},[E]),tL=(0,g.VN)();(0,d.useImperativeHandle)(t,function(){var e=ta.current;return{play:function(){return(0,L._)(function(){var e,t;return(0,D.__generator)(this,function(n){switch(n.label){case 0:if((0,O.Tb)(eT,"play",null==(e=ta.current)?void 0:e.uuid,tu.current,!eo(tu.current)),!ta.current||!eo(tu.current))return[2,Promise.resolve()];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null==(t=ta.current)?void 0:t.play()];case 2:return n.sent(),[3,4];case 3:return console.info("Video play error: ",n.sent()),[3,4];case 4:return[2]}})})()},pause:function(){var e,t;(0,O.Tb)(eT,"pause",null==(e=ta.current)?void 0:e.uuid,tu.current);try{null==(t=ta.current)||t.pause(),F.A.emit("video_pause",{itemId:i,playMode:c})}catch(e){console.info("Video pause error: ",e)}},seek:function(t){if((0,O.Tb)(eT,"seek",t),e){F.A.emit("video_seek",{itemId:i,playMode:c});var n=e.duration;n&&ta.current&&ta.current.seek(n*t)}},seekTime:function(t){null==e||e.seek(t)},onSeeked:function(t){null==e||e.on("seeked",t)},onSeeking:function(t){null==e||e.on("seeking",t)},onTimeUpdate:function(t){null==e||e.on("timeupdate",function(){var n,r,a=null!=(n=null==e?void 0:e.currentTime)?n:0,i=null!=(r=null==e?void 0:e.duration)?r:0;t(a/i,a,i)})},onCanPlay:function(t){null==e||e.on("canplay",t)},getFullscreen:function(t){return(0,L._)(function(){return(0,D.__generator)(this,function(n){switch(n.label){case 0:return[4,null==e?void 0:e.enterFullscreen(t)];case 1:return n.sent(),[2]}})})()},exitFullscreen:function(t){return(0,L._)(function(){return(0,D.__generator)(this,function(n){switch(n.label){case 0:return[4,null==e?void 0:e.exitFullscreen(t)];case 1:return n.sent(),[2]}})})()},getPlayerAttributes:function(){return Y(e,u)},replay:function(){(null==e?void 0:e.replay)&&(null==e||e.replay())},getPlaybackQuality:function(){var t;return null==e||null==(t=e.element)?void 0:t.getVideoPlaybackQuality()},updatePlayer:function(e){if(ta.current){var t;null==(t=td.current)||t.updatePlayer(ta.current,e3)}},changeResolution:function(e){if(ta.current){var t;null==(t=td.current)||t.changeResolution(ta.current,e)}},getResolutionInfo:function(){if(ta.current){var e;return null==(e=td.current)?void 0:e.getResolutionInfo(ta.current)}return null},get renderState(){return tu.current}}});var tD=(0,d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,L._)(function(){var t,n,r,a,i,o,l,u,c,d;return(0,D.__generator)(this,function(s){switch(s.label){case 0:if(!eo(tu.current)||e>=3)return[2];s.label=1;case 1:if(s.trys.push([1,5,,6]),!(null==(n=null==(t=ta.current)?void 0:t.player)?void 0:n.isCanplay))return[3,3];return[4,null==(r=ta.current)?void 0:r.play()];case 2:return s.sent(),[3,4];case 3:null==(a=ta.current)||a.on("canplay",function(){return(0,L._)(function(){var e;return(0,D.__generator)(this,function(t){switch(t.label){case 0:if(!eo(tu.current))return[3,2];return[4,null==(e=ta.current)?void 0:e.play()];case 1:t.sent(),t.label=2;case 2:return[2]}})})()}),s.label=4;case 4:return[3,6];case 5:if(u=(l=null!=(o=null==(i=s.sent())?void 0:i.message)?o:"").indexOf(B.LA.AbortRequest)>-1,d=null!=(c=l.match(B.LA.NoInteract))?c:l.match(B.LA.SafariNoInteract),u)return[2];return d?(tT(!0),setTimeout(function(){tD(e+1)},0)):tD(e+1),[3,6];case 6:return[2]}})})()},[tT]),tV=(0,d.useCallback)(function(){try{var e,t;(null==(e=ta.current)?void 0:e.replay)&&(null==(t=ta.current)||t.replay()),F.A.emit("video_replay",{itemId:i,playMode:c})}catch(e){setTimeout(function(){tT(!0)},0)}},[tT,i,c]);(0,d.useEffect)(function(){e9&&ta.current&&eo(tu.current)&&(ta.current.volume=tP,ta.current.muted=tb,ta.current.playbackRate=_,null==eC||eC(tb?0:tP))},[e9,tb,_,tP,eC]),(0,d.useEffect)(function(){var e=ta.current;if(e9&&e&&eo(tu.current)){var t="undefined"!=typeof document&&!document.hidden;eG&&e9&&(c===y.ey.MiniPlayer||t)&&tD(),(0,O.Tb)("videoCanplay",i,e.uuid,e.currentTime,v,"videoCanplay:".concat(tm," autoPlay:").concat(eG)),v>0&&c!==y.ey.VideoDetail&&e&&Math.abs(e.currentTime-v)>.2&&tm&&e.seek(v)}},[tm,eG,v,tD,e9,c]);var tx=(0,d.useCallback)(function(e){var t;(0,O.Tb)("callback handlePlayerWaiting",null==(t=ta.current)?void 0:t.uuid),e9&&(null==G||G(e))},[e9,G]),tN=(0,d.useCallback)(function(){e9&&(null==ek||ek())},[e9,ek]),tF=(0,d.useCallback)(function(e){var t;(0,O.Tb)("callback handlePlayerEnded",null==(t=ta.current)?void 0:t.uuid),e9&&(null==q||q(e),eW&&tV())},[e9,q,tV,eW]),tH=(0,d.useCallback)(function(e){(0,O.Tb)("callback handleLoadStart",null==(t=ta.current)?void 0:t.uuid);var t,n,r,a=null==(n=ta.current)?void 0:n.element,i=a?null==a?void 0:a.style.background:null;tv.current&&(null==ta||null==(r=ta.current)?void 0:r.element)&&(tf.current=i||"",ta.current.element.style.background="#000"),null==m||m(e)},[m]),tB=(0,d.useCallback)(function(e){var t;(0,O.Tb)("callback handleLoadedData",null==(t=ta.current)?void 0:t.uuid),tv.current=!0,null==b||b(e)},[b]),tU=(0,d.useCallback)(function(e){if(ta.current&&eo(tu.current)){var t=ta.current,n=t.volume,r=t.muted;eo(tu.current)&&r&&tT(!0),null==eC||eC(r?0:n)}},[eC]),tG=(0,d.useCallback)(function(){null==I||I()},[I]),tq=(0,d.useCallback)(function(e){var t;(0,O.Tb)("handleError",null==(t=ta.current)?void 0:t.uuid,e),null==W||W(e)},[W]),tW=(0,d.useCallback)(function(){null==P||P(),tg(!0);var e,t=tf.current;(null==ta||null==(e=ta.current)?void 0:e.element)&&null!==t&&(ta.current.element.style.background=t,tf.current=null)},[P]),tQ=(0,d.useCallback)(function(e){var t;(0,O.Tb)("callback handlePause",null==(t=ta.current)?void 0:t.uuid),null==T||T(e)},[T]),tz=(0,d.useCallback)(function(e){var t;(0,O.Tb)("callback handlePlaying",null==(t=ta.current)?void 0:t.uuid),null==S||S(e)},[S]),tj=(0,d.useCallback)(function(e){var t;(0,O.Tb)(eT,"handlePrevention",null==(t=ta.current)?void 0:t.uuid,i,tu.current),e9&&setTimeout(function(){try{if(!eo(tu.current))return;if(tr.current>=3)return void(null==eS||eS());if("xgplayer"===e9||!(null==e?void 0:e.errorName)||(null==e?void 0:e.errorName)==="NotAllowedError"){if(c===y.ey.MiniPlayer)return void tQ(e);tT(!0);var t=ta.current;ta.current&&(ta.current.muted=!0),null==t||t.play()}tr.current+=1}catch(e){console.error("handle autoplay error",e)}},0)},[e9,c]);return(0,d.useEffect)(function(){if(e9){var e=ta.current;return null==e||e.on(B.CN,tj),function(){var e;(null==(e=ta.current)?void 0:e.element)&&ta.current.off(B.CN,tj)}}},[e9,tj]),(0,d.useEffect)(function(){return e9?function(){var e,t=ta.current;(0,O.Tb)(eP,"release off events",null==(e=ta.current)?void 0:e.uuid),t&&(t.off("playCatch",tS),t.off(B.Wu,tw),t.off("autoplay_was_prevented",tR))}:void ei(tc.current,tC)},[e9,tS]),(0,d.useEffect)(function(){var e,t;(0,O.Tb)(eT,"playing",null==(e=ta.current)?void 0:e.uuid,i,tu.current,"playing:".concat(tL," isPausedForced:").concat(tn.current)),tL?tn.current&&eG&&(tn.current=!1,tD()):(tn.current=!0,null==(t=ta.current)||t.pause())},[eG,tL,tD]),(0,d.useEffect)(function(){return function(){(0,k.uQ)(C.Y.PlayerDestroy),ey(Y(ta.current,u))}},[]),(0,d.useEffect)(function(){var e;return(0,O.Tb)(eP,"releasePlayer0",null==(e=ta.current)?void 0:e.uuid,i),function(){var e,t,n,r,a,o=ta.current;null==o||null==(e=o.metrics)||e.stop(),null==o||o.off("playCatch",tS),null==o||o.off(B.Wu,tw),null==o||o.off("autoplay_was_prevented",tR),(0,O.Tb)(eP,"releasePlayer1",null==(t=ta.current)?void 0:t.uuid,i,tu,u,c),null==(n=td.current)||n.releasePlayer(ta.current),null==(r=ti.current)||r.detach(),null==(a=ti.current)||a.destroy(),ti.current=null,tg(!1),ta.current=null,null==eh||eh(!1)}},[]),(0,l.Y)(em,{containerId:"xgwrapper-".concat(c,"-").concat(i),classList:["xgplayer-container","tiktok-web-player"],player:ta.current,containerRef:to,bitrateInfo:eD,oncanplay:tW,onplay:tO,onwaiting:tx,onended:tF,onbreak:tN,ontimeupdate:tG,onerror:tq,onpause:tQ,onplaying:tz,onloadstart:tH,onloadeddata:tB,onvolumechange:tU,onVideoPlayEnd:eE,onResolutionReady:eR,subtitle:c===y.ey.VideoDetail&&ew?ew:void 0,teaParams:eU,videoDimensionParams:e$,hitPreload:t_,mode:c,id:i,eventTrigger:(null==tC?void 0:tC.eventTrigger)||"v0"})})),eC=n(85223),eE=n(13208),eS=n(98556),eR=n(17505),eA=n(89379),ew=n(8016),eI=n(55778),eM=n(19298),eO=n(63737),eL=n(29781),eD=n(32221),eV=n(24373),ex=n(77514),eN=n(39037),eF=n(56940),eH=null,eB=null,eU=(0,d.memo)((0,d.forwardRef)(function(e,t){var n,L,D,V,x,N=e.poster,F=e.videoCover,H=e.lazyLoading,B=e.horizontal,U=e.playUrl,G=e.id,q=e.teaParams,W=e.index,Q=e.mode,z=e.itemMute,j=e.desc,K=e.topSearchQueryAfterViewWord,Y=e.duration,X=e.playbackRate,J=e.onVideoPause,$=void 0===J?u.A:J,Z=e.onVideoPlaying,ee=void 0===Z?u.A:Z,et=e.onVideoPlay,en=e.onVideoEnded,er=e.onVideoError,ea=e.onTimeUpdate,ei=e.onLoadStart,eo=e.onLoadedData,el=e.onVolumeChange,eu=e.onVideoUnmount,ec=e.onUserHandlePlayVideo,ed=e.onUserHandlePauseVideo,es=e.onVideoInit,ev=void 0===es?u.A:es,ef=e.e2eTag,ep=e.subtitleStruct,e_=e.subtitleList,ey=e.curSubtitle,eh=e.onSubtitleCallback,em=e.onResolutionReady,eg=e.disableDownload,eb=e.volumeInfo,eP=void 0===eb?u.A:eb,eT=e.bitrateInfo,eU=e.bitrate,eG=e.posterStyle,eq=e.playModeForTea,eW=e.autoPlay,eQ=void 0===eW||eW,ez=e.autoReplay,ej=void 0===ez||ez,eK=e.size,eY=e.playerStyle,eX=e.fetchPriority,eJ=void 0===eX?"auto":eX,e$=e.renderState,eZ=void 0===e$?R.b.ACTIVE:e$,e0=e.posterAlt,e1=e.videoInfo,e2=(0,h.Ul)(),e4=null!=(n=(0,m.eu)())&&n,e3=(0,g.ol)()||0,e5=(0,h.hM)(),e6=(0,b.qW)().actualResolution,e7=(0,h.fD)(),e9=(0,f.Nj)(p.Gs),e8=(0,f.Nj)(_.AU),te=(0,d.useRef)(null),tt=(0,d.useRef)(null),tn=(0,m.J3)(),tr=(0,g.S4)(),ta=(0,eR.HLh)(),ti=(0,o._)((0,d.useState)(!1),2),to=ti[0],tl=ti[1],tu=(0,o._)((0,d.useState)(U),2),tc=tu[0],td=tu[1],ts=(0,o._)((0,d.useState)(!1),2),tv=ts[0],tf=ts[1],tp=(0,d.useRef)(null),t_=(0,f.Nj)(eA.V$),ty=(0,P.L$)(e1),th=ty.PlayAddrStruct,tm=ty.videoID,tg=(0,A.WB)((0,P.L$)(e1)),tb=(0,eN.v)(th),tP=null!=eq?eq:Q,tT=(0,eR.Yud)(),tk=(0,eR.VgG)(),tC=(0,eR.QcT)();if(!eH&&(eH=(0,s.V)())&&(w.M.channelInfo={domain:eH.tea,channel:eH.teaChannel,type:null!=(L=eH.teaChannelType)?L:"tcpy"}),!eB&&(eB=(0,v.x)())){var tE=eB.user,tS=eB.wid,tR=eB.region,tA=eB.odinId;w.M.regionInfo={region:tR,uid:(null==tE?void 0:tE.uid)||tA||tS,wid:tS,isLogin:!!tE}}var tw=(0,h.w)(W,Q,G),tI=[R.b.ACTIVE,R.b.BACKUP,R.b.RETAIN].includes(eZ)&&(tP===y.ey.OneColumn||tP===y.ey.BrowserMode);(0,d.useEffect)(function(){if(e2){var e=e2.index;if((0,c.A)(e)&&(W-e<0||W-e>=3)){tv&&(tf(!1),tp.current=null);return}}if(!tv){var t=new I.K("webapp-desktop",{playReport:e9,experienceReport:e8});t.firstFrameAB=tk,t.videoPlayAB=tC,tf(!0),tp.current=t}},[tv,e2,W,e9,e8]);var tM=(0,d.useCallback)(function(){try{var e,t;null==ec||ec(),null==(t=te.current)||null==(e=t.play)||e.call(t)}catch(e){}},[]),tO=(0,d.useCallback)(function(){var e,t;null==(t=te.current)||null==(e=t.pause)||e.call(t),null==ed||ed()},[]);(0,d.useEffect)(function(){var e=null!=e2?e2:{},t=e.id,n=e.mode;t===G&&Q===n||td(U)},[e2,G,Q,U]),(0,d.useEffect)(function(){tw||tl(!1)},[tw]),(0,eC.XK)({isCurrentVideo:tw,index:W,mode:Q}),(0,d.useImperativeHandle)(t,function(){return{play:function(e){tM(),tt.current=!0,e&&e9.triggerResume({enter_method:"click_resume",playMode:Q})},pause:function(){tO(),tt.current=!1,e9.triggerPause({enter_method:"click_pause",playMode:tP,currentBackendSourceEventTracking:q.currentBackendSourceEventTracking})},seek:function(e){var t;null==(t=te.current)||t.seek(e)},seekTime:function(e){var t;null==(t=te.current)||t.seekTime(e)},onSeeked:function(e){var t;null==(t=te.current)||t.onSeeked(e)},onSeeking:function(e){var t;null==(t=te.current)||t.onSeeking(e)},onTimeUpdate:function(e){var t;null==(t=te.current)||t.onTimeUpdate(e)},getFullscreen:function(e){var t;null==(t=te.current)||t.getFullscreen(e)},exitFullscreen:function(e){var t;null==(t=te.current)||t.exitFullscreen(e)},replay:function(){var e;null==(e=te.current)||e.replay()},updatePlayer:function(e){var t;null==(t=te.current)||t.updatePlayer(e)},changeResolution:function(e){var t;null==(t=te.current)||t.changeResolution(e)},getResolutionInfo:function(){var e;return null==(e=te.current)?void 0:e.getResolutionInfo()},get currentTime(){var e,t;return null!=(t=null==(e=te.current)?void 0:e.getPlayerAttributes().currentTime)?t:0},get duration(){var n,r;return null!=(r=null==(n=te.current)?void 0:n.getPlayerAttributes().duration)?r:0},get currentCanPlay(){return tw&&to}}},[to,tw,tO,tM,e9,tP,q.currentBackendSourceEventTracking]);var tL=(0,eM.jj)();(0,d.useEffect)(function(){var e,t=null===tt.current||tt.current,n=(0,P.L$)(null==(e=te.current)?void 0:e.getPlayerAttributes()).ended&&!ej;tL&&t&&eQ&&!n||Q===y.ey.MiniPlayer&&t?tM():(tO(),tw&&!tL&&e9.triggerPause({enter_method:"switch_tab",playMode:tP,currentBackendSourceEventTracking:q.currentBackendSourceEventTracking}))},[eQ,tL,tM,tO,e9,tw,tP,ej,Q,q.currentBackendSourceEventTracking]);var tD=(0,eL.Zd)({id:G}),tV=(0,eL.Hs)(G),tx=(0,eL.yy)(G,W),tN=(0,eD.WH)(G),tF=(0,d.useMemo)(function(){var e,t=(0,P.L$)(null==(e=te.current)?void 0:e.getPlayerAttributes()).videoQuality,n=q.definition;return(0,ew.H4)(t,n)},[q]),tH=(0,d.useCallback)(function(){var e,t=(0,P.L$)(null==(e=te.current)?void 0:e.getPlayerAttributes()),n=t.videoBitrate,o=(t.videoQuality,t.codecType),l=(0,i._)(t,["videoBitrate","videoQuality","codecType"]),u=q.bitrate,c=q.author_id,d=q.format,s=q.encodedType,v=q.videoQuality,f=q.encodeUserTag,p=q.secret,_=q.forFriend,y=q.definition,h=q.playlist_id,m=q.popup_type,g=q.size;return(0,a._)((0,r._)({id:G,authorId:c,playMode:tP,bitrate:null!=n?n:u,format:d,encodedType:s,videoQuality:v,encodeUserTag:f,codecType:o,definition:tF,secret:p,forFriend:_,originalDefinition:y,playlist_id:h,popupType:m},null!=l?l:{},tV,tx),{size:g})},[G,q,tF,tP,tV,tx]),tB=(0,g.i3)(),tU=(0,d.useMemo)(function(){var e=q.group_id,t=q.author_id,n=q.is_scheduled,a=q.search_id,i=q.search_keyword,o=q.search_result_id,l=q.question_id,u=q.collection_id,c=q.collection_name,d=q.isPaidPartnership,s=q.poi_id,v=q.playlist_id,f=q.popup_type,p=q.enter_tab,_=q.diversify_id,y=q.enter_method,h=q.is_sub_only_video,m=q.tab_name,g=q.isPinnedItem,b=q.isReposted,P=q.is_just_watched,T=q.index_from_just_watched,k=q.currentBackendSourceEventTracking,C=q.inspiration_session_id,E=q.inspiration_result_id,S=q.inspiration_keyword,R=q.inspiration_type,A=q.rank,w=q.is_fullscreen,I=q.token_type;return(0,r._)({itemId:e,authorId:t,isScheduled:!!n,autoplayStatus:1,searchId:a,searchKeyword:i,searchResultId:o,questionId:l,playMode:tP,isMute:tB,collectionId:u,collectionName:c,isPaidPartnership:!!d,poiId:s,playlistId:v,popupType:f,enterTab:p,diversifyId:_,enterMethod:y,isSubOnlyVideo:h,isCopyrightMuted:z,isPinnedItem:g,isReposted:b,tab_name:m,isAutoScroll:e4,resolution:e6,is_auto_resolution:e7,is_just_watched:P,index_from_just_watched:T,currentBackendSourceEventTracking:k,inspiration_session_id:C,inspiration_result_id:E,inspiration_keyword:S,inspiration_type:R,rank:A,is_fullscreen:w,token_type:I},tV,tx,tN)},[tB,z,q,e4,e6,e7,tP,tV,tx,tN]),tG=(0,d.useCallback)(function(){var e,t=(0,P.L$)(null==(e=te.current)?void 0:e.getPlayerAttributes()),n=t.currentTime,i=t.duration;return(0,a._)((0,r._)({},tU),{currentTime:void 0===n?0:n,duration:void 0===i?0:i,index:W})},[W,tU]);(0,d.useEffect)(function(){q&&tv&&tp.current&&(tp.current.videoPlayHandleParams=tG())},[tG,q,tv]);var tq=(0,d.useMemo)(function(){return(0,T.fU)()?"":(0,eI.N2)(window.location.pathname)},[]),tW=(0,eM.iJ)({isCurrentVideo:tw}),tQ=tW.loading,tz=tW.handleCanPlayWithLoading,tj=tW.handlePauseWithLoading,tK=tW.handlePlayingWithLoading,tY=tW.handleWaitingWithLoading,tX=(0,d.useCallback)(function(){var e,t,n;null==(t=tp.current)||t.updateMetricsParams({playbackAttribute:null==(e=te.current)?void 0:e.getPlayerAttributes(),videoQualityParams:tH()}),null==(n=tp.current)||n.onLoadStart(),null==ei||ei()},[tH]),tJ=(0,d.useCallback)(function(){var e,t,n;null==(t=tp.current)||t.updateMetricsParams({playbackAttribute:null==(e=te.current)?void 0:e.getPlayerAttributes(),videoQualityParams:tH()}),null==(n=tp.current)||n.onLoadedData(),null==eo||eo()},[tH]),t$=(0,d.useCallback)(function(){var e,t,n;null==(t=tp.current)||t.updateMetricsParams({playbackAttribute:null==(e=te.current)?void 0:e.getPlayerAttributes(),videoQualityParams:tH()}),tz(),tl(!0),null==ev||ev(!0),null==(n=tp.current)||n.onCanPlay()},[tH,tz,ev]),tZ=(0,d.useCallback)(function(e){var t,n,r;null==(n=tp.current)||n.updateMetricsParams({playbackAttribute:null==(t=te.current)?void 0:t.getPlayerAttributes(),videoQualityParams:tH()}),null==(r=tp.current)||r.onPlay(),null==et||et(e),tr.setCanAutoPlay(!0)},[tH,et,Q]),t0=(0,d.useCallback)(function(){var e,t,n,i,o=(0,P.L$)(null==(e=te.current)?void 0:e.getPlayerAttributes()),l=o.currentTime,u=o.duration,c=o.playerType,d=(0,M.ZQ)().getPreloadCacheInfo(G),s=d.byteLength,v=d.duration;null==(n=tp.current)||n.updateMetricsParams({playbackAttribute:(0,a._)((0,r._)({},tD,null==(t=te.current)?void 0:t.getPlayerAttributes()),{preload_size:s,preload_time:v,player_type:c,bitrateInfo:eT}),videoQualityParams:tH()}),null==(i=tp.current)||i.onTimeUpdate(),null==ea||ea((void 0===l?0:l)/(void 0===u?0:u)),eE.e.handleFirstFrameVideo()},[tH,ea,G,eT,tD]),t1=(0,eM.TL)(),t2=(0,d.useCallback)(function(e){var t=e.httpCode,n=e.errorCode,r=e.errorMessage,a=e.url,i=e.response,o=e.mode,l=e.pathId;t_.emitEvent("video_mse_error",{},{httpCode:String(void 0===t?-1:t),errorCode:String(void 0===n?-1:n),errorMessage:void 0===r?"":r,url:void 0===a?"":a,response:void 0===i?"":i,mode:void 0===o?"":o,pathId:void 0===l?"":l})},[t_]),t4=(0,d.useCallback)(function(e){tn.setPlayerError(),null==er||er(e);var t,n,a,i,o=tH(),l=null==(t=te.current)?void 0:t.getPlayerAttributes();t1((0,r._)({},l,o)),null==(a=tp.current)||a.updateMetricsParams({playbackAttribute:null==(n=te.current)?void 0:n.getPlayerAttributes(),videoQualityParams:tH()}),null==(i=tp.current)||i.onError()},[tH,er,t1]),t3=(0,d.useCallback)(function(e){var t,n,r;$(e),tj(),null==(n=tp.current)||n.updateMetricsParams({playbackAttribute:null==(t=te.current)?void 0:t.getPlayerAttributes(),videoQualityParams:tH()}),null==(r=tp.current)||r.onPause()},[tH,$,tj]),t5=(0,d.useCallback)(function(e){var t,n,r;ee(e),tK(),null==(n=tp.current)||n.updateMetricsParams({playbackAttribute:null==(t=te.current)?void 0:t.getPlayerAttributes(),videoQualityParams:tH()}),null==(r=tp.current)||r.onPlaying()},[tH,ee,tK]),t6=(0,d.useCallback)(function(){tY();var e=null==(t=te.current)?void 0:t.getPlayerAttributes();if(e){null==(r=tp.current)||r.updateMetricsParams({playbackAttribute:null==(n=te.current)?void 0:n.getPlayerAttributes(),videoQualityParams:tH()});var t,n,r,a,i,o,l=e.buffered,u=e.currentTime,c=void 0===u?0:u,d=e.duration;if(.5>Math.abs(((null!=(i=null==l?void 0:l.length)?i:0)>0&&null!=(o=null==l?void 0:l.start(0))?o:0)-c)||.5>Math.abs((void 0===d?0:d)-c))return;null==(a=tp.current)||a.onWaiting()}},[tH,tY]),t7=(0,eN.K)(Q),t9=t7.handleVvCountOnEnd,t8=t7.handleBreakCount,ne=(0,d.useCallback)(function(){t8()},[]),nt=(0,d.useCallback)(function(e){null==el||el(e)},[]),nn=(0,d.useCallback)(function(e){var t,n,r;null==(n=tp.current)||n.updateMetricsParams({playbackAttribute:null==(t=te.current)?void 0:t.getPlayerAttributes(),videoQualityParams:tH()}),null==(r=tp.current)||r.onEnded(),null==en||en(e),t9()},[tH,en]),nr=(0,d.useCallback)(function(e){var t,n,i,o,l=(0,M.ZQ)().getPreloadCacheInfo(G),u=l.byteLength,c=l.duration;null==(n=tp.current)||n.updateMetricsParams({playbackAttribute:null==(t=te.current)?void 0:t.getPlayerAttributes(),videoQualityParams:tH()});var d=null==(i=te.current)?void 0:i.getPlaybackQuality(),s=d?d.droppedVideoFrames/d.totalVideoFrames*100:0;null==(o=tp.current)||o.onUnmount((0,a._)((0,r._)({},e),{preload_size:u,preload_time:c,droppedRate:s})),null==eu||eu()},[tH,G]),na=(0,d.useCallback)(function(e){e.preventDefault},[]);(0,d.useEffect)(function(){tw||null==$||$({})},[tw,$]),(0,d.useEffect)(function(){tw&&(0,k.uQ)(C.Y.PlayerMounted)},[tw]);var ni=(0,d.useCallback)(function(){null==ev||ev()},[ev]),no=B||Q===y.ey.BrowserMode||Q===y.ey.VideoDetail||Q===y.ey.Pip||Q===y.ey.FullscreenMode,nl=(0,d.useMemo)(function(){return(0,O.J)(q)},[q]),nu=(null!=(D=(0,E.U)(function(){return["isTTP"]},[]))?D:{}).isTTP,nc=(null!=(V=(0,S.W)(function(){return["region"]},[]))?V:{}).region,nd=(null!=(x=(0,S.W)(function(){return["abTestVersion"]},[]))?x:{}).abTestVersion,ns=(0,eR.pdh)("desktop"),nv=(0,eR.ZC0)(),nf=(0,eR.iM7)("desktop"),np=w.M;np.isTTP=nu,nd&&(np.abTestVersion=nd.versionName,w.M.setABTest(tT)),ns&&(np.hevcAbVersion=ns,w.M.setHevcTestData(nf));var n_=(0,f.Nj)(M.JX),ny=n_.getPreloadUrls(),nh=(0,eM.au)(ny),nm=(0,eR.NYA)().playerInitHost,ng=(0,eR.oJW)().videoOrder,nb=K?"".concat(K,". ").concat(j):j,nP=null!=e0?e0:nb,nT=(0,d.useContext)(ex.e).armCoreContentEvent,nk=(0,d.useCallback)(function(){null==nT||nT(),t_.reportActualFMP(),t_.reportPageReady(Q),eS.A.reportCoreResourceLoadEnd(),eS.A.reportCoreRender(),eE.e.handleActualFMP()},[nT,t_,Q]);(0,eC.w9)({isCurrentVideo:tw,index:W,mode:Q});var nC=(0,d.useCallback)(function(e){var t=e.errorCode,n=e.errorMessage,r=e.logid,a=e.endState;t_.emitEvent("video_play_end",{count:1},{is_success:"".concat(0===t),error_code:String(t),error_msg:n,logid:r,end_state:"".concat(a)})},[t_]);return(0,d.useEffect)(function(){eS.A.reportCoreResourceLoadStart()},[]),(0,l.FD)(eF.Le,{horizontal:B,mode:Q,style:eY,children:[N?(0,l.Y)(eF.R,{horizontal:no,mode:Q,src:N,alt:nP,loading:void 0===H||H?"lazy":"eager",style:eG,onLoad:nk,fetchPriority:eJ}):F?(0,l.Y)(eV.x,{video:F,objectFit:no?"contain":"cover",style:eG,alt:nP,onLoad:nk,fetchPriority:eJ}):null,(tw||tI)&&(0,l.FD)(eF.Ec,{horizontal:no,"data-e2e":ef,children:[(0,l.Y)(ek,{videoSource:tg,ref:te,id:G,vid:tm,url:tc,urlList:tb,playbackRate:void 0===X?1:X,mode:Q,muteSetting:z||eO.T5[Q].forceMute,defaultMute:eO.T5[Q].defaultMute,playProgress:eZ===R.b.ACTIVE?e3:0,duration:Y,onUnmount:nr,onLoadStart:tX,onLoadedData:tJ,onTimeUpdate:t0,onError:t4,onCanPlay:t$,onPause:t3,onPlay:tZ,onPlaying:t5,onWaiting:t6,onEnded:nn,onBreak:ne,onVideoChange:ni,onResolutionReady:em,userResolution:e5,onContextMenu:na,onVideoVolumeChange:nt,onVideoPlayEnd:nC,subtitleStruct:ep,subtitleList:e_,curSubtitle:ey,onSubtitleCallback:eh,disableDownload:void 0===eg||eg,volumeInfo:eP,bitrateInfo:eT,defaultDefinition:nl,preloader:n_,preloadUrlsList:nh,playerInitHost:nm,defaultBitrate:eU,videoOrder:ng,teaParams:q,autoPlay:eQ,autoReplay:ej,size:eK,pathId:tq,metrics:tp.current,playbackAbTestInfo:(0,r._)({},tT,nv),handleMseError:t2,isTTP:!!nu&&"US"===nc,vIndex:W,renderState:eZ,onAutoplayPrevented:function(){ta&&tr.setCanAutoPlay(!1)}}),tQ&&(0,l.Y)(eF.K3,{})]})]})}))},14610:function(e,t,n){n.d(t,{R:function(){return b},W:function(){return k}});var r,a,i,o=n(72516),l=n(24643),u=n(40099),c=n(18499),d=n(35383),s=n(75431),v=n(12751),f=(0,s.keyframes)({"25%":{cx:100,r:1.2*36},"50%":{cx:140,r:36},"75%":{cx:100,r:.6*36},"100%":{cx:60,r:36}},"label:0be0dc34--greenAnimation"),p=(0,s.keyframes)({"25%":{cx:100,r:24},"50%":{cx:60,r:36},"75%":{cx:100,r:1.2*36},"100%":{cx:140,r:36}},"label:0be0dc34--redAnimation");(r=a||(a={}))[r.Red=0]="Red",r[r.Green=1]="Green",r[r.Black=2]="Black";var _={strokeWidth:0,r:36,cy:99},y=(i={},(0,d._)(i,0,{fill:"#fe2c55",cx:128,animation:"".concat(p," 1s cubic-bezier(.05, 0, 1, 1) infinite")}),(0,d._)(i,1,{fill:"#3af2ff",cx:60,animation:"".concat(f," 1s cubic-bezier(.05, 0, 1, 1) infinite")}),(0,d._)(i,2,{fill:"#0f0f0f",cx:60,animation:"".concat(f," 1s cubic-bezier(.05, 0, 1, 1) infinite")}),i),h=(0,v.default)("circle",{target:"e4outi90",label:"0be0dc34--Circle"})(function(e){var t=e.circleType,n=e.isBlack;return[_,y[t],n?{fill:"#000"}:null]}),m=(0,v.default)("svg",{target:"e4outi91",label:"0be0dc34--SvgContainer"})({display:"block"},function(e){return e.center?{margin:"6px auto"}:null}),g={default:48,small:32},b=(0,u.memo)((0,u.forwardRef)(function(e,t){var n=e.size,r=void 0===n?48:n,a=e.center,i=e.maskKey,u=void 0===i?Date.now():i,c=(0,o.__rest)(e,["size","center","maskKey"]),d="string"==typeof r?g[r]:r;return(0,l.jsxs)(m,Object.assign({center:void 0!==a&&a,preserveAspectRatio:"none",viewBox:"0 0 200 200",width:d,height:d},c,{ref:t},{children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("mask",Object.assign({id:"redhole-".concat(u)},{children:[(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,l.jsx)(h,{circleType:0,isBlack:!0})]})),(0,l.jsxs)("mask",Object.assign({id:"greenhole-".concat(u)},{children:[(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"white"}),(0,l.jsx)(h,{circleType:1,isBlack:!0})]}))]}),(0,l.jsx)(h,{strokeWidth:2,stroke:"#3AF2FF",circleType:2}),(0,l.jsx)(h,{circleType:1,mask:"url(#redhole-".concat(u,")")}),(0,l.jsx)(h,{circleType:0,mask:"url(#greenhole-".concat(u,")")})]}))})),P="tiktok-loading-icon-container";function T(e){var t,n=document.getElementById(P);if(n)return n;var r=document.createElement("div");return r.id=P,r.style.cssText="display: inline-block; position: fixed; left: calc(50% - 15px); top: 38%; z-index: 100",(e&&null!=(t=document.querySelector(e))?t:document.body).appendChild(r),r}var k={show:function(e){return c.render((0,l.jsx)(b,{size:30}),T(e))},hide:function(){try{var e=T();c.unmountComponentAtNode(e)}catch(e){console.error("hide loading error",e)}}}},94805:function(e,t,n){n.d(t,{CN:function(){return l},LA:function(){return a},Wu:function(){return o},uJ:function(){return i}});var r,a=((r={}).NoInteract="failed because the user didn't interact with the document first.",r.Interrupted="request was interrupted by a call to pause",r.SafariNoInteract="The request is not allowed by the user agent or the platform in the current context",r.FireFox="The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.",r.LoadInterrupt="request was interrupted by a new load request",r.Abort="The operation was aborted",r.AbortRequest="new load request",r),i="use-credentials",o="PRELOAD_INFO",l="autoplay_was_prevented"},36413:function(e,t,n){n.d(t,{K:function(){return p}});var r=n(95170),a=n(45275),i=n(5377),o=n(45996),l=n(54333),u=n(23636),c=n(48859),d=n(81269),s=n(65362);function v(){var e=performance.timeOrigin||performance.timing.navigationStart;return Math.round(Date.now()-e)}function f(e){return!e||e.length<1?0:e.end(0)}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"webapp",n=arguments.length>1?arguments[1]:void 0,a=n.playReport,i=n.experienceReport;(0,r._)(this,e),this.project=t,this._platform="",this._url="",this._playMode=c.ey.OneColumn,this._videoQualityHandleParams=null,this._videoPlayHandleParams=null,this._playbackAttributes=null,this.isIos=!1,this.isAndroid=!1,this.videoExperienceReport=i,this.videoPlayReport=a,this.renderState="default",this.playerType="",this.id="",this.loadedDuration=0,this.loadStartDuration=0,this.startDuration=0,this.firstFrameTrigger="v0",this.videoPlayVersion="",this.lastTime=0,this.timeupdateCount=0,this.startPlaying=-1,this.paused=!0}var t=e.prototype;return t.isActive=function(){return this.renderState!==u.b.BACKUP&&this.renderState!==u.b.RETAIN&&this.renderState!==u.b.RELEASE&&this.renderState!==u.b.DESTROY},t.updateMetricsParams=function(e){var t=e.playbackAttribute,n=e.videoQualityParams;t&&(this.playbackAttributes=t),n&&(this.videoQualityHandleParams=n)},t.onPlay=function(){this.loadStartDuration||(this.loadStartDuration=v()),this.log("onPlay")},t.onPlaying=function(){this.log("onPlaying"),this.startPlaying<0&&this.isActive()&&(this.startPlaying=Date.now()),"v2"===this.videoPlayVersion&&this.isActive()&&this.handleTimeupdate("playing"),this.videoExperienceReport.reportVideoInteract({endTime:Date.now(),videoSource:this._url})},t.onPause=function(){this._videoPlayHandleParams&&this._playbackAttributes&&this.isActive()&&this.videoPlayReport.handlePause((0,i._)({},this._videoPlayHandleParams,this._playbackAttributes));var e=0;this.startPlaying>0&&(e=Date.now()-this.startPlaying,this.startPlaying=-1),this.paused=!0,this.log("onPause",0,"duration:".concat(e))},t.onWaiting=function(){this._videoPlayHandleParams&&this._playbackAttributes&&this.isActive()&&this.videoPlayReport.handleWaiting((0,i._)({},this._videoPlayHandleParams,this._playbackAttributes))},t.onLoadStart=function(){var e=v();this.loadStartDuration=e,this.log("onLoadStart",e),this.loadedDuration=0,this.isActive()&&(this.startDuration=e)},t.onLoadedData=function(){var e=v();this.log("onLoadedData",e),this.loadedDuration=e,"v1"===this.videoPlayVersion&&this.isActive()&&this.handleTimeupdate("loadeddata"),"v2"===this.firstFrameTrigger&&this.sendFirstFrameReport("loadeddata")},t.onCanPlay=function(){this.log("onCanPlay"),this.videoExperienceReport.getCurrentPageReport()||(this.videoExperienceReport.reportVideoFirstScreen({endTime:Date.now(),videoSource:this._url}),this.videoExperienceReport.reportVideoAddition({endTime:Date.now(),videoSource:this._url}))},t.onCanPlayThrough=function(){this.isIos&&(this.videoExperienceReport.getCurrentPageReport()||(this.videoExperienceReport.reportVideoFirstScreen({endTime:Date.now(),videoSource:this._url}),this.videoExperienceReport.reportVideoAddition({endTime:Date.now(),videoSource:this._url})))},t.sendFirstFrameReport=function(e){if(!this.videoExperienceReport.getFirstFrameReport()&&this._playbackAttributes&&("v1"!==this.firstFrameTrigger&&"v2"!==this.firstFrameTrigger||!(this.loadedDuration<=0))){var t,n={startDuration:this.loadStartDuration,loadedDuration:this.loadedDuration,triggerFrom:e};this.videoExperienceReport.reportVideoFirstFrame(null!=(t=this._playbackAttributes.currentTime)?t:-1,n)}},t.handleTimeupdateLog=function(e,t){if(!(d.r.level<1)){var n=this._playbackAttributes||{},r=n.readyState,a=n.buffered;if(!(this.timeupdateCount>3)||this.paused){var i=f(void 0===a?null:a);(void 0===r?-1:r)>1&&(this.loadedDuration||i>1)&&this.isActive()&&this.timeupdateCount++,this.log("handleTimeupdate",e,"triggerFrom:".concat(t," loadStart:").concat(this.loadedDuration," loadedData:").concat(this.loadedDuration)),this.paused=!1}}},t.onTimeUpdate=function(){var e=(this._playbackAttributes||{}).buffered,t=this.loadedDuration>0?"timeupdate_1":"timeupdate";if("v1"===this.videoPlayVersion||"v2"===this.videoPlayVersion){var n=f(void 0===e?null:e);(this.loadStartDuration>0&&this.loadedDuration>0||0===this.loadStartDuration&&n>1)&&this.handleTimeupdate(t)}else this.handleTimeupdate(t);this.sendFirstFrameReport(t)},t.onError=function(){this._videoPlayHandleParams&&this.isActive()&&this.videoPlayReport.handleError(this._videoPlayHandleParams)},t.onEnded=function(){this._videoPlayHandleParams&&this.videoPlayReport.handleEnded(this._videoPlayHandleParams)},t.onSlideChange=function(e){var t,n;0!==(null!=(n=null==(t=this._playbackAttributes)?void 0:t.duration)?n:0)&&this._videoPlayHandleParams&&this.videoPlayReport.handlePlayTime(this._videoPlayHandleParams)},t.onUnmount=function(e){this.isIos||this.onSlideChange(e)},t.onProgress=function(e,t){},t.mseCDNCache=function(e){},t.pauseAction=function(e){this.videoPlayReport.triggerPause({enter_method:e,playMode:this.playMode})},t.setPlayerType=function(e){this.playerType=e},t.setRenderState=function(e,t){this.renderState=e,this.id=t,this.log("setRenderState"),this.isActive()&&(this.startDuration=v())},t.handleTimeupdate=function(e){if(this._videoQualityHandleParams&&this._videoPlayHandleParams&&this._playbackAttributes){var t=v();this.handleTimeupdateLog(t,e);var n=this._playbackAttributes.readyState,r=void 0===n?-1:n;"webapp-mobile"===this.project?this.videoPlayReport.handleTimeUpdate((0,o._)((0,i._)({},this._videoPlayHandleParams,this._playbackAttributes),{render_state:this.renderState}),!0):this.isActive()&&r&&r>=2&&this.videoPlayReport.handleTimeUpdate((0,o._)((0,i._)({},this._videoPlayHandleParams,this._playbackAttributes),{render_state:this.renderState,player_type:this.playerType,loadstart_dur:t-this.loadStartDuration,loadeddata_dur:this.loadedDuration>0?t-this.loadedDuration:0,trigger_from:e}))}},t.onSeeking=function(){this.log("onSeeking")},t.onSeeked=function(){this.log("onSeeked")},t.onLoadedMetadata=function(){this.log("onLoadedMetadata")},t.log=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(!(d.r.level<1)){var i=this._playbackAttributes||{},o=i.readyState,u=i.buffered,c=i.currentTime;if(!(this.timeupdateCount>3)||this.paused){var p,_=t||v(),y=f(void 0===u?null:u);s.Tb.apply(void 0,["Metrics",this.id,this.renderState,e,"costTime:".concat(_-this.lastTime," fromLoadStart:").concat(_-this.loadStartDuration," fromStart:").concat((p=this.startDuration)<=0||_<p?-1:_-p," readyState:").concat(void 0===o?-1:o," renderState:").concat(this.renderState," bufferEnd:").concat(y," currentTime:").concat(void 0===c?0:c," time:").concat(_," videoPlayVersion:").concat(this.videoPlayVersion)].concat((0,l._)(r))),this.lastTime=_}}},(0,a._)(e,[{key:"firstFrameAB",set:function(e){this.firstFrameTrigger=e}},{key:"videoPlayAB",set:function(e){this.videoPlayVersion=e}},{key:"platform",set:function(e){this._platform=e,this.isIos="ios"===this._platform,this.isAndroid="android"===this._platform}},{key:"playMode",set:function(e){this._playMode=e}},{key:"url",set:function(e){this._url=e}},{key:"videoQualityHandleParams",set:function(e){this._videoQualityHandleParams=e}},{key:"videoPlayHandleParams",set:function(e){this._videoPlayHandleParams=e}},{key:"playbackAttributes",set:function(e){this._playbackAttributes=e}}]),e}()},28298:function(e,t,n){n.d(t,{AI:function(){return u},H4:function(){return f},L8:function(){return s},OK:function(){return c},Ug:function(){return p},n2:function(){return d},qd:function(){return l},zD:function(){return o}});var r,a,i=n(5377),o=((r={}).PlayQuality="video_play_quality",r.PlayEnded="video_play_end",r.PlayFailed="video_play_failed",r.BlockStart="video_block_start",r.Block="video_block",r.Request="video_request",r.RequestResponse="video_request_response",r.FirstFrame="first_feed_show_time",r),l=((a={})[a.Public=0]="Public",a[a.Self=1]="Self",a[a.Friend=2]="Friend",a),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return["one_column","three_column","browser_mode","video_detail","pip","fullscreen","creator_tab","mini_player","immersive_player"][e]},c=function(e){return e?e.map(function(e){return e.GearName||""}):null},d=function(e){return e?e.map(function(e){return e.QualityType&&e.Bitrate?"".concat(e.QualityType,":").concat(e.Bitrate):""}).filter(function(e){return!!e}):null},s=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++)t+=e.end(n)-e.start(n);return Math.round(1e3*t)},v=new Map([[2,"adapt_lowest_1080p"],[3,"adapt_lower_1080p"],[4,"adapt_1080p"],[7,"adapt_lowest_1440p"],[10,"normal_720p"],[11,"low_720p"],[12,"adapt_high_720p"],[13,"adapt_higher_720p"],[14,"adapt_lower_720p"],[15,"adapt_lowest_720p"],[16,"higher_720p"],[17,"highest_720p"],[18,"adapt_720p"],[19,"adapt_low_720p"],[191,"lower_720p"],[20,"normal_540p"],[21,"adapt_lower_540p"],[22,"adapt_high_540p"],[23,"adapt_higher_540p"],[24,"lower_540p"],[25,"lowest_540p"],[26,"higher_540p"],[27,"highest_540p"],[28,"adapt_540p"],[29,"adapt_lowest_540p"],[291,"adapt_low_540p"],[30,"normal_480p"],[31,"low_480p"],[32,"high_480p"],[33,"medium_480p"],[34,"lower_480p"],[35,"lowest_480p"],[36,"higher_480p"],[37,"highest_480p"],[38,"adapt_480p"],[39,"adapt_lower_480p"],[391,"adapt_high_480p"],[40,"normal_360p"],[41,"low_360p"],[42,"high_360p"],[43,"medium_360p"],[44,"lower_360p"],[45,"lowest_360p"],[46,"higher_360p"],[47,"highest_360p"],[48,"adapt_360p"],[49,"adapt_lowest_360p"],[50,"adapt_high_360p"]]),f=function(e,t){if(!e)return t;if("string"==typeof e&&e.indexOf("xgpreload_config")>-1)return e;var n=Number(e);if(!v.has(n)){var r=String(e).match(/^([a-zA-Z]*)+_([0-9]+)_0$/i);return r?"".concat(r[1],"_").concat(r[2],"p"):"_".concat(e)}return v.get(n)};function p(e){var t,n,r={isFinish:0,pt:0,vt:0,firstframeDuration:100,errorCode:0,errorMessage:"",codecType:"h264",resolution:"",url:""},a=null==e||null==(n=e.player)||null==(t=n.plugins)?void 0:t.xgVodLogger;if(null==a?void 0:a.getFinalInfo){var o=a.getFinalInfo();return(0,i._)({},r,o)}return r}},33751:function(e,t,n){n.d(t,{JX:function(){return l},ZQ:function(){return v},as:function(){return u}});var r=n(95170),a=n(79262),i=n(84772),o=3,l=function e(){var t=this;(0,r._)(this,e),this.preloadQueue=[],this.preloadStartIndex=-1,this.currentPage="",this.preloadUrlsPool=new Set,this.setPreloadQueue=function(e){e.length&&(t.preloadQueue=null!=e?e:[],e.forEach(function(e){var n=e.id;n&&t.preloadUrlsPool.add(n)}))},this.setPreloadIndex=function(e){e>=0&&(t.preloadStartIndex=e)},this.getPreloadUrls=function(){var e=t.preloadStartIndex;return t.preloadQueue.slice(e+1,e+o+1)},this.getPreloadedPool=function(){return t.preloadUrlsPool},this.reset=function(){t.preloadQueue=[],t.preloadStartIndex=-1,t.preloadUrlsPool.clear()},this.setCurrentPage=function(e){t.currentPage=e||"unknown"},this.clearAllVideoCaches=function(){t.currentPage&&t.preloadUrlsPool.clear()}};l=function(e,t,n,r){var i,o=arguments.length,l=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==("undefined"==typeof Reflect?"undefined":(0,a._)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(l=(o<3?i(l):o>3?i(t,n,l):i(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l}([(0,i._q)()],l);var u=function(e){o=e},c={byteLength:-1,duration:-1,type:-1,vid:"unknown"},d=function e(){var t=this;(0,r._)(this,e),this.preloadVideoId="",this.preloadVideoCache=c,this.setPreloadCacheInfo=function(e,n){e&&n&&e!==t.preloadVideoId&&(t.preloadVideoId=e,t.preloadVideoCache=n)},this.getPreloadCacheInfo=function(e){return e&&t.preloadVideoId&&e===t.preloadVideoId?t.preloadVideoCache:c}},s=null,v=function(){return s||(s=new d),s}}}]);