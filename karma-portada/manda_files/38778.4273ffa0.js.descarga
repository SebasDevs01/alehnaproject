"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["38778"],{61937:function(e,t,n){n.d(t,{I9:function(){return d},Tq:function(){return m},tR:function(){return h}});var r=n(35383),i=n(5377),o=n(45996),a=n(16327),c=n(11201),s=n(73455),u=n(4676),l=n(10625),d=(0,s._)((0,l.p)("commentItemAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"webapp.comment.items"}),_=(0,u.i)(d,function(e,t){var n;return n={setItem:function(e){t(d,function(t){return(0,o._)((0,i._)({},t),(0,r._)({},e.cid,e))})},setItemDiggState:function(n){e(d)[n.cid]&&t(d,function(e){var t,a;return(0,o._)((0,i._)({},e),(0,r._)({},n.cid,(0,o._)((0,i._)({},e[n.cid]),{user_digged:n.digged,is_author_digged:null!=(a=n.is_author_digged)?a:null==(t=e[n.cid])?void 0:t.is_author_digged})))})},setItemDiggCount:function(n){e(d)[n.cid]&&t(d,function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n.cid,(0,o._)((0,i._)({},e[n.cid]),{digg_count:n.count})))})}},(0,r._)(n,"removeItem",function(e){t(d,function(t){return t[e],(0,a._)(t,[e].map(c._))})}),(0,r._)(n,"multiSetCommentItem",function(e){t(d,function(t){var n=(0,i._)({},t);return e.forEach(function(e){n[e.cid]=(0,i._)({},n[e.cid],e)}),n})}),(0,r._)(n,"multiRemoveCommentItem",function(e){t(d,function(t){var n=(0,i._)({},t);return e.forEach(function(e){delete n[e]}),n})}),(0,r._)(n,"reduceOrIncreaseCommentCount",function(n){var a,c,s=n.cid,u=n.isReduce,l=e(d);if(l[s]){var _=Number(null!=(c=null==(a=l[s])?void 0:a.reply_comment_total)?c:0);t(d,function(e){return(0,o._)((0,i._)({},e),(0,r._)({},s,(0,o._)((0,i._)({},e[s]),{reply_comment_total:u?_-1:_+1})))})}}),n}),m=(_.useAtomService,_.useServiceState),h=(_.useServiceDispatchers,_.getStaticApi)},31847:function(e,t,n){n.d(t,{lN:function(){return V},BY:function(){return B},_B:function(){return W},kH:function(){return z},OL:function(){return G}});var r=n(79066),i=n(35383),o=n(5377),a=n(45996),c=n(6586),s=n(54333),u=n(72516),l=n(54122),d=n(61945),_=n(18499),m=n(73455),h=n(4676),f=n(10625),p=n(64781),v=n(8686),g=n(35144),y=n(90542),w=n(35702),C=n(13495),S=n(57007),k=n(55453),R=n(77214),b=n(83751),I=n(35379),E=n(7871),P=n(72702),T=n(61937),F=n(91781),O=n(26869),M=n(75434),L=n(91402),A=n(42646),x=n(56904),U=(0,L.M)({csr:function(e){return(0,r._)(function(){return(0,u.__generator)(this,function(t){return[2,A.h.get("/api/comment/list/",{query:(0,a._)((0,o._)({},e),{count:20,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:x.Z4.FixedWww})]})})()},ssr:function(e){return(0,r._)(function(){var t,n,r;return(0,u.__generator)(this,function(i){switch(i.label){case 0:t=(0,M.yK)(),n=(0,O.stringifyUrl)({url:"consul://tiktok.comment.api/api/comment/list/",query:(0,a._)((0,o._)({},e),{aid:1988,count:20,device_platform:"web_pc",fromWeb:1})}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.fetch(n,{method:"GET",timeout:5e3,headers:(0,a._)((0,o._)({},t.headers),{referer:t.href})})];case 2:return[2,i.sent().json()];case 3:return r=i.sent(),t.logger.error("ssr fetch catch err: ".concat(r)),[2,{status_code:S.s.UnknownError,reply_style:1,has_more:1,cursor:"0"}];case 4:return[2]}})})()}}),V={awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!1,isFirstLoad:!1,fetchType:"load_by_current",currentAspect:"all"},N=(0,m._)((0,f.p)("commentAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"webapp.comment"}),D=(0,h.i)(N,function(e,t){return{switchAspect:function(n){return(0,r._)(function(n){var r,c,s,d;return(0,u.__generator)(this,function(u){switch(u.label){case 0:if(r=n.itemId,c=n.aspect,(null==(s=e(N)[r])?void 0:s.loading)||(null==(d=e(N)[r])?void 0:d.currentAspect)===c)return[2];return t(N,function(e){return(0,a._)((0,o._)({},e),(0,i._)({},r,(0,l.A)((0,a._)((0,o._)({},V),{currentAspect:c}))))}),[4,this.fetchComment({aweme_id:r,cursor:0,fetch_type:"load_by_current",commentAspect:c})];case 1:return u.sent(),[2]}})}).apply(this,arguments)},setCommentItem:function(e){var n=e.itemId,r=void 0===n?"":n,c=e.item;c&&t(N,function(e){var t;return(0,a._)((0,o._)({},e),(0,i._)({},r,(0,o._)({},null!=(t=e[r])?t:V,c)))})},setReplyLoading:function(n){var r,i,s,u,l=(0,c._)(K(e,n),2),d=l[0],_=l[1];d&&(d.replyCache=(0,a._)((0,o._)({},null!=(u=d.replyCache)?u:{comments:null!=(i=d.reply_comment)?i:[],cursor:null!=(s=null==(r=d.reply_comment)?void 0:r.length)?s:"0",hasMore:!0}),{loading:n.loading}),j(t,n.itemId,_,(0,o._)({},d)))},setReplyComment:function(n){var r=(0,c._)(K(e,n),2),i=r[0],s=r[1];i&&j(t,n.itemId,s,(0,a._)((0,o._)({},i),{reply_comment:n.comments}))},setReplyCommentCache:function(n){var r,i,a=(0,c._)(K(e,n),2),s=a[0],u=a[1];s&&(s.replyCache={comments:n.comments,cursor:n.cursor,hasMore:n.hasMore,loading:null!=(i=null==(r=s.replyCache)?void 0:r.loading)&&i},j(t,n.itemId,u,(0,o._)({},s)))},deleteCommentFromList:function(n){var r=n.index,i=n.subIndex,a=n.itemId;if(void 0===i)j(t,a,r);else{var c,s,u=e(N)[a];if(!u)return;var l=(0,o._)({},u.comments[r]);null==(c=l.reply_comment)||c.splice(i,1),null==(s=l.replyCache)||s.comments.splice(i,1),j(t,a,r,l)}},addCommentToFirst:function(e){t(N,function(t){var n,r;return(0,a._)((0,o._)({},t),(0,i._)({},e.aweme_id,(0,a._)((0,o._)({},V,t[e.aweme_id]),{comments:[{cid:e.cid,reply_comment:[],replyCache:null}].concat((0,s._)(null!=(r=null==(n=t[e.aweme_id])?void 0:n.comments)?r:[]))})))})},addReplyToFirst:function(n){var r,i,c,u,l=n.comment,d=n.position,_=e(N),m=l.aweme_id,h=_[m];if(h){var f=h.comments[d];if(f){var p=(0,o._)({},f);p.reply_comment=[{cid:l.cid,reply_comment:null,replyCache:null}].concat((0,s._)(null!=(i=f.reply_comment)?i:[])),p.replyCache=(0,a._)((0,o._)({},null!=(c=p.replyCache)?c:{cursor:"0",hasMore:!0,loading:!1}),{comments:[{cid:l.cid,reply_comment:null,replyCache:null}].concat((0,s._)(null!=(u=null==(r=p.replyCache)?void 0:r.comments)?u:[]))}),j(t,m,d,p)}}},handlePostSuccess:function(e){var t=this,n=q([e]),r=n.users,i=n.commentItems;(0,_.unstable_batchedUpdates)(function(){t.addCommentToFirst(e),(0,I.Gp)().multiSetUser(r),(0,T.tR)().multiSetCommentItem(i),(0,P.ud)().reduceOrIncreaseCommentCount({id:e.aweme_id,isReduce:!1})})},handleReplySuccess:function(e){var t=this,n=e.comment,r=e.position,i=q([n],{ignoreReply:!0}),o=i.users,a=i.commentItems,c=(0,T.tR)();(0,_.unstable_batchedUpdates)(function(){t.addReplyToFirst({comment:n,position:r}),(0,I.Gp)().multiSetUser(o),c.multiSetCommentItem(a),c.reduceOrIncreaseCommentCount({cid:n.reply_id}),(0,P.ud)().reduceOrIncreaseCommentCount({id:n.aweme_id,isReduce:!1})})},fetchComment:function(t,n){return(0,r._)(function(){var r,i,o,a,c,s,l,m,h,f,v,g,y,w,k,E,F,O,M,L,A,x,V,D,z,W,B,G;return(0,u.__generator)(this,function(u){switch(u.label){case 0:var H;if(r=this,i=e(N),o=t.aweme_id,a=t.insert_ids,s=void 0===(c=t.fetch_type)?"load_by_current":c,m=null!=(l=i[t.aweme_id])?l:{awemeId:void 0,cursor:"0",comments:[],hasMore:!0,loading:!0,currentAspect:"all"},v=(f="string"==typeof(H=null!=(h=t.commentAspect)?h:m.currentAspect)&&H.startsWith("topic_")?{subTopicId:H.split("_")[1]}:"number"==typeof H?{subCategory:H}:{}).subTopicId,g=f.subCategory,y=(0,b.PJ)(e(b.WH)),!m.hasMore)return[2];w=m.cursor,this.setCommentItem({item:{awemeId:o,loading:!0},itemId:o}),u.label=1;case 1:if(u.trys.push([1,10,,11]),!(v||g))return[3,3];return[4,(0,p.iB)({itemID:o,subTopicId:v,subCategory:g,cursor:w})];case 2:return O=u.sent(),[3,5];case 3:return[4,U({insert_ids:"0"===w?a:void 0,aweme_id:o,cursor:w,is_non_personalized:y})];case 4:O=u.sent(),u.label=5;case 5:if(F=O,(0,C.G)(F.status_code,[S.s.Ok]),!(F.status_code===S.s.Ok&&(null==(k=F.comments)?void 0:k.length)))return[3,8];if(A=(L=q(F.comments,{logId:null==(M=F.log_pb)?void 0:M.impr_id})).users,x=L.comments,V=L.commentItems,!n)return[3,7];return D=n.translateTo,z=n.count,W=V.filter(function(e){return"un"!==e.comment_language&&e.comment_language!==D}).slice(0,z),[4,(0,R.mx)().fetchCommentTranslation(W,D,!0)];case 6:u.sent(),u.label=7;case 7:return B=m.comments,G=(0,d.A)(B.concat(x),"cid"),(0,_.unstable_batchedUpdates)(function(){(0,I.Gp)().multiSetUser(A),(0,T.tR)().multiSetCommentItem(V),r.setCommentItem({item:{comments:G,hasMore:!!F.has_more,cursor:F.cursor,loading:!1,isFirstLoad:0===Number(w),fetchType:s},itemId:o}),F.total&&(0,P.ud)().setCommentCount({id:o,commentCount:Number(F.total)})}),[3,9];case 8:F.status_code!==S.s.Ok||(null==(E=F.comments)?void 0:E.length)||F.has_more||this.setCommentItem({item:{hasMore:!!F.has_more,loading:!1},itemId:o}),u.label=9;case 9:return[3,11];case 10:return u.sent(),this.setCommentItem({item:{loading:!1},itemId:o}),[3,11];case 11:return[2]}})}).call(this)},fetchCommentReply:function(t){return(0,r._)(function(){var n,i,l,m,h,f,p,v,g,y,w,k,R,b,E;return(0,u.__generator)(this,function(P){switch(P.label){case 0:if(n=this,l=(i=(0,c._)(H(e,t),2))[0],!(m=i[1]))return[2,void console.warn("No item here in fetch commoent reply")];this.setReplyLoading((0,a._)((0,o._)({},l),{loading:!0})),P.label=1;case 1:var F;return P.trys.push([1,3,,4]),[4,(F={comment_id:l.cid,item_id:l.itemId,cursor:null!=(f=null==(h=m.replyCache)?void 0:h.cursor)?f:"0"},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,A.h.get("/api/comment/list/reply/",{query:(0,a._)((0,o._)({},F),{count:3,aid:1988,app_language:"ja-JP",device_platform:"web_pc",current_region:"JP",fromWeb:1,enter_from:"tiktok_web"}),baseUrlType:x.Z4.FixedWww})]})})())];case 2:return p=P.sent(),(0,C.G)(p.status_code,[S.s.Ok]),p.status_code===S.s.Ok&&(y=(g=q(p.comments,{logId:null==(v=p.log_pb)?void 0:v.impr_id})).users,w=g.comments,k=g.commentItems,b=null!=(R=m.reply_comment)?R:[],E=(0,d.A)(b.concat(w),"cid"),(0,_.unstable_batchedUpdates)(function(){(0,I.Gp)().multiSetUser(y),(0,T.tR)().multiSetCommentItem(k),n.setReplyComment((0,o._)({comments:(0,s._)(E)},l)),n.setReplyCommentCache((0,o._)({comments:(0,s._)(E),hasMore:!!p.has_more,cursor:p.cursor},l)),n.setReplyLoading((0,a._)((0,o._)({},l),{loading:!1}))})),[3,4];case 3:return P.sent(),this.setReplyLoading((0,a._)((0,o._)({},l),{loading:!1})),[3,4];case 4:return[2]}})}).call(this)},handleCollapseReply:function(t){if(!(0,c._)(K(e,t),1)[0])return void console.warn("item is null");this.setReplyComment((0,a._)((0,o._)({},t),{comments:[]}))},handleShowMoreReply:function(t){return(0,r._)(function(){var n,r,i,s,l,d,_,m;return(0,u.__generator)(this,function(u){return(i=(r=(n=(0,c._)(H(e,t),2))[0]).cid,s=r.itemId,l=n[1],y.f.sendEvent("show_more_reply",{parent_comment_id:i,group_id:s}),l)?l.reply_comment&&l.replyCache&&(d=l.reply_comment.length)<(_=l.replyCache.comments.length)?(m=d+3>_?_:d+3,[2,this.setReplyComment((0,a._)((0,o._)({},t),{comments:l.replyCache.comments.slice(0,m)}))]):[2,this.fetchCommentReply(t)]:[2,void console.warn("item is null")]})}).call(this)},handleCommentLike:function(t){return(0,r._)(function(){var n,c,s,l,d,m,h,f,p,C,R,b,F,O,M,L,U;return(0,u.__generator)(this,function(V){switch(V.label){case 0:if(c=e(T.I9),s=e(I.p9),l=c[t.cid],m=null==(d=(0,g.x)().user)?void 0:d.uid,h=null==(n=e(P.Pu)[t.itemId])?void 0:n.authorId,p=s.users[null!=(f=null==l?void 0:l.user)?f:""],!l)return[2,void console.warn("No comment item here in hendle comment like")];C=l.user_digged?2:1,V.label=1;case 1:var N;return V.trys.push([1,3,,4]),[4,(N={aweme_id:t.itemId,cid:t.cid,digg_type:C},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,A.h.post("/api/comment/digg/",{query:(0,a._)((0,o._)({},N),{aid:1988,channel_id:S.F.Hot}),headers:(0,i._)({},x.nk,A.h.csrfToken),baseUrlType:x.Z4.FixedWww})]})})())];case 2:return R=V.sent(),b=(0,E.T)(),(null==R?void 0:R.status_code)===S.s.Ok?y.f.sendEvent(1===C?"like_comment":"cancel_like_comment",{comment_id:t.cid,group_id:t.itemId,comment_user_id:null!=(F=null==p?void 0:p.id)?F:"",author_id:t.teaAuthorId,enter_method:t.enterMethod}):(null==R?void 0:R.status_code)===S.s.CommentLikePermissionDisable?(w.F.destroy(),w.F.open({content:b(2===C?"comment_turnoff_unlike":"comment_turnoff_like"),duration:3,getContainer:k.M,getContainerPosition:"fixed"})):(null==R?void 0:R.status_code)?(w.F.destroy(),w.F.open({content:b("Sorry, something wrong with the server, please try again."),duration:3,widthType:"half",getContainer:k.M,getContainerPosition:"fixed"})):(w.F.destroy(),w.F.open({content:b("comment_nointernet_toast"),duration:3,widthType:"half",getContainer:k.M,getContainerPosition:"fixed"})),R.status_code===S.s.Ok?(1===C?(O=1,M=l.digg_count+1,m===h&&(L=!0)):(O=0,M=Math.max(l.digg_count-1,0),m===h&&(L=!1)),U=(0,T.tR)(),(0,_.unstable_batchedUpdates)(function(){U.setItemDiggState({cid:t.cid,digged:O,is_author_digged:L}),U.setItemDiggCount({cid:t.cid,count:M})})):R.status_code===S.s.CommentLikePermissionDisable&&(0,P.ud)().updateItem({id:t.itemId,itemCommentStatus:v.v.OFF}),[3,4];case 3:return V.sent(),[3,4];case 4:return[2]}})})()},handleCommentDelete:function(e){return(0,r._)(function(){var t,n,o,a,c,s,l,d;return(0,u.__generator)(this,function(m){switch(m.label){case 0:t=this,n=(0,E.T)(),o=e.itemId,a=e.cid,c=e.parentCid,s=e.subIndex,m.label=1;case 1:var h;return m.trys.push([1,3,,4]),[4,(h={cid:a},(0,r._)(function(){return(0,u.__generator)(this,function(e){return[2,A.h.post("/api/comment/delete/",{query:h,baseUrlType:x.Z4.FixedWww,headers:(0,i._)({},x.nk,A.h.csrfToken)})]})})())];case 2:return(l=m.sent()).status_code===S.s.Ok?w.F.open({content:n("comment_delete_success"),duration:3,widthType:"half",getContainer:k.M,getContainerPosition:"fixed"}):w.F.open({content:n("comment_delete_failed"),duration:3,widthType:"half",getContainer:k.M,getContainerPosition:"fixed"}),l.status_code===S.s.Ok&&(d=(0,T.tR)(),(0,_.unstable_batchedUpdates)(function(){t.deleteCommentFromList(e),d.removeItem(a),(0,P.ud)().reduceOrIncreaseCommentCount({id:o,isReduce:!0}),void 0!==s&&c&&d.reduceOrIncreaseCommentCount({cid:c,isReduce:!0})})),[3,4];case 3:return m.sent(),[3,4];case 4:return[2]}})}).call(this)},switchVideo:function(e){return(0,r._)(function(){var t,n;return(0,u.__generator)(this,function(r){switch(r.label){case 0:return t=e.currId,n=e.insertCid,[4,this.fetchComment({insert_ids:n,aweme_id:t})];case 1:return r.sent(),[2]}})}).call(this)},handleCommentsPreload:function(e){var t=this,n=e.aweme_id,r=e.fetch_type,i=e.has_more,o=e.cursor,a=e.total,c=q(e.comments),s=c.users,u=c.comments,l=c.commentItems;(0,_.unstable_batchedUpdates)(function(){(0,I.Gp)().multiSetUser(s),(0,T.tR)().multiSetCommentItem(l),t.setCommentItem({item:{comments:u,hasMore:!!i,cursor:o,loading:!1,isFirstLoad:!0,fetchType:r},itemId:n}),a&&(0,P.ud)().setCommentCount({id:n,commentCount:Number(a)})})}}}),z=D.useAtomService,W=D.useServiceState,B=D.useServiceDispatchers,G=D.getStaticApi;function H(e,t){var n=(0,c._)(K(e,t),2);return[t,n[0],n[1]]}function K(e,t){var n=t.itemId,r=t.cid,i=e(N)[n];if(!i)return[void 0,-1];var o=i.comments,a=o.findIndex(function(e){return e.cid===r});return -1!==a?[o[a],a]:[void 0,-1]}function j(e,t,n,r){-1!==n&&e(N,function(e){var c,u,d=null!=(u=null==(c=e[t])?void 0:c.comments)?u:[],_=[];return _=r?(0,s._)(d.slice(0,n)).concat([(0,l.A)((0,o._)({},d[n],r))],(0,s._)(d.slice(n+1))):(0,s._)(d.slice(0,n)).concat((0,s._)(d.slice(n+1))),(0,a._)((0,o._)({},e),(0,i._)({},t,(0,a._)((0,o._)({},V,e[t]),{comments:_})))})}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.reduce(function(e,n){var r=n.user,i=n.reply_comment;return e.users.push((0,F.bg)(r)),(null!=i?i:[]).forEach(function(t){var n=t.user;e.users.push((0,F.bg)(n))}),e.comments.push(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{cid:t.cid,logId:r.logId,reply_comment:null==(n=t.reply_comment)?void 0:n.map(function(t){return e(t,r)}),replyCache:null}}(n,t)),(0,F.PT)(n,t).forEach(function(t){e.commentItems.push(t)}),e},{users:[],comments:[],commentItems:[]})}},91781:function(e,t,n){n.d(t,{PT:function(){return function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,c.A)(t,"user","reply_comment");if(i.user=null!=(n=t.user.unique_id)?n:"",!t.reply_comment||r.ignoreReply)return[i];var o=t.reply_comment.reduce(function(t,n){return e(n).forEach(function(e){t.push(e)}),t},[]);return[i].concat((0,a._)(o))}},bg:function(){return _}});var r,i=n(35383),o=n(5377),a=n(54333),c=n(53036),s=n(48007),u=n(8561),l=(r={},(0,i._)(r,s.m33.FollowRelationUnknown,u.yf.UNKNOW),(0,i._)(r,s.m33.NoRelationStatus,u.yf.NONE),(0,i._)(r,s.m33.FollowingStatus,u.yf.FOLLOW),(0,i._)(r,s.m33.FollowEachOtherStatus,u.yf.MUTAL),(0,i._)(r,s.m33.FollowRequestStatus,u.yf.FOLLOWING_REQUEST),r);function d(e){var t,n;return null!=(n=null==e||null==(t=e.url_list)?void 0:t.find(function(e){return!/\.webp/.test(e)}))?n:""}function _(e,t){var n=e.avatar_larger,r=e.avatar_medium,i=e.avatar_thumb,a=e.uid,c=e.short_id,_=e.unique_id,m=e.sec_uid,h=e.room_id,f=e.nickname,p=e.is_block,v=e.is_blocked,g=e.follow_status,y=e.signature,w=e.show_favorite_list,C=e.custom_verify,S=e.enterprise_verify_reason,k=e.comment_setting,R=e.duet_setting,b=e.is_ad_fake,I=e.is_private_account,E=e.secret,P=e.show_secret_banner,T=e.stitch_setting,F=e.follower_status;return{avatarLarger:d(n),avatarMedium:d(r),avatarThumb:d(i),id:a,shortId:c,uniqueId:null!=_?_:"",secUid:null!=m?m:"",roomId:h?String(h):void 0,nickname:f,relation:function(e){var t=e.is_block,n=e.is_blocked,r=e.follow_status,i=e.follower_status;if(null!=r)return t?u.yf.BLOCK:n?u.yf.BLOCKED:r===s.m33.NoRelationStatus&&i===s.FU4.FollowerFollowStatus?u.yf.FOLLOWER:l[r]}({is_block:p,is_blocked:v,follow_status:g,follower_status:F}),signature:y,openFavorite:w,verified:!!(C||S),commentSetting:k,duetSetting:R,stitchSetting:T,isADVirtual:b,privateAccount:!!I||!!E,secret:!!E,createTime:0,showPrivateBanner:!!P,extraInfo:(0,o._)({followerStatus:F},t)}}},85223:function(e,t,n){n.d(t,{Rx:function(){return u},Uf:function(){return a},XK:function(){return s},w9:function(){return c}});var r=n(40099),i=n(48859),o=n(13208),a=function(e){o.e.init(),o.e.setPage({pageName:e}),(0,r.useEffect)(function(){return function(){o.e.pageSwitch()}},[e])},c=function(e){var t=e.isCurrentVideo,n=e.index,a=e.mode;(0,r.useEffect)(function(){var e=i.Jr[a];t&&o.e.setPlayStatusAndTriggerVideoSwitch({index:n,playMode:e})},[t,n,a])},s=function(e){var t=e.isCurrentVideo,n=e.index,a=e.mode;(0,r.useEffect)(function(){var e=i.Jr[a];t&&o.e.videoSwitchInteractionEnd({index:n,playMode:e})},[t,n,a])},u=function(){return(0,r.useCallback)(function(e){o.e.setEnterMethod({enterMethod:e}),o.e.videoSwitchInteractionStart()},[])}},13208:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(95170),i=n(5377),o=n(45996),a=n(90542),c=function(e){a.f.sendEvent("page_switch_actual_fmp",e)},s=function(e){a.f.sendEvent("page_switch_first_frame_video",e)},u=function(e){a.f.sendEvent("video_switch_actual_fmp",e)},l=function(e){a.f.sendEvent("video_switch_first_frame_video",e)},d=function(e){a.f.sendEvent("video_switch_interaction_latency",e)},_=function(e){a.f.sendEvent("video_switch_total_latency",e)},m=function(e){a.f.sendEvent("page_ready",e)},h=function(e){a.f.sendEvent("browser_mode_opening_latency",e)},f=function(){function e(t){(0,r._)(this,e),this._startTime=null,this._count=0,this._reportFunc=t}var t=e.prototype;return t.deInit=function(){this._startTime=null},t.resetStartTime=function(){this._startTime=performance.now(),this._count+=1},t.report=function(){if(null!==this._startTime){var e=performance.now()-this._startTime;this._startTime=null,this._reportFunc(e)}},e}(),p=new(function(){function e(){(0,r._)(this,e),this._initialized=!1,this._etParams={},this._readyReported=!1}var t=e.prototype;return t.init=function(){var e=this;this._initialized||(this._initialized=!0,this._pageSwitchActualFMPReporter=new f(function(t){c({page_name:e._etParams.page_name,prev_page:e._etParams.prev_page,duration:t})}),this._pageSwitchFirstFrameVideoReporter=new f(function(t){s({page_name:e._etParams.page_name,prev_page:e._etParams.prev_page,duration:t})}),this._videoSwitchActualFMPReporter=new f(function(t){u((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._videoSwitchFirstFrameVideoReporter=new f(function(t){l((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._videoSwitchInteractionReporter=new f(function(t){d((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._videoSwitchTotalLatencyReporter=new f(function(t){_((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._pageReadyReporter=new f(function(t){m({page_name:e._etParams.page_name})}),this._browserModeOpeningLatencyReporter=new f(function(t){h((0,o._)((0,i._)({},e._etParams),{duration:t}))}),this._pageReadyReporter.resetStartTime())},t.setPage=function(e){var t=e.pageName;this._initialized&&this._etParams.page_name!==t&&(this._etParams.prev_page=this._etParams.page_name,this._etParams.page_name=t)},t.setEnterMethod=function(e){var t=e.enterMethod;this._initialized&&(this._etParams.enter_method=t)},t.setPlayStatusAndTriggerVideoSwitch=function(e){var t=e.index,n=e.playMode;this._initialized&&((void 0!==this._etParams.index&&this._etParams.index!==t||void 0!==this._etParams.play_mode&&this._etParams.play_mode!==n)&&this.videoSwitch(),this._etParams.prev_index=this._etParams.index,this._etParams.index=t,this._etParams.prev_play_mode=this._etParams.play_mode,this._etParams.play_mode=n)},t.pageSwitch=function(){var e,t,n,r,i,o,a,c;this._initialized&&(null==(e=this._pageSwitchActualFMPReporter)||e.resetStartTime(),null==(t=this._pageSwitchFirstFrameVideoReporter)||t.resetStartTime(),null==(n=this._videoSwitchActualFMPReporter)||n.deInit(),null==(r=this._videoSwitchFirstFrameVideoReporter)||r.deInit(),null==(i=this._videoSwitchInteractionReporter)||i.deInit(),null==(o=this._videoSwitchTotalLatencyReporter)||o.deInit(),null==(a=this._browserModeOpeningLatencyReporter)||a.deInit(),this._readyReported=!1,null==(c=this._pageReadyReporter)||c.resetStartTime())},t.videoSwitch=function(){var e,t;this._initialized&&(null==(e=this._videoSwitchActualFMPReporter)||e.resetStartTime(),null==(t=this._videoSwitchFirstFrameVideoReporter)||t.resetStartTime())},t.videoSwitchInteractionStart=function(){var e,t;this._initialized&&(null==(e=this._videoSwitchInteractionReporter)||e.resetStartTime(),null==(t=this._videoSwitchTotalLatencyReporter)||t.resetStartTime())},t.videoSwitchInteractionEnd=function(e){var t=e.index,n=e.playMode;this._initialized&&(void 0!==this._etParams.index&&this._etParams.index!==t||void 0!==this._etParams.play_mode&&this._etParams.play_mode!==n)&&this.handleVideoSwitchInteractionReport()},t.handleActualFMP=function(){var e,t,n;this._initialized&&(null==(e=this._pageSwitchActualFMPReporter)||e.report(),null==(t=this._videoSwitchActualFMPReporter)||t.report(),this._readyReported||null==(n=this._pageReadyReporter)||n.report(),this._readyReported=!0)},t.handlePageReadyForEdgeCase=function(){var e;this._initialized&&!this._readyReported&&(this._readyReported=!0,null==(e=this._pageReadyReporter)||e.report())},t.handleFirstFrameVideo=function(){var e,t,n;this._initialized&&(null==(e=this._pageSwitchFirstFrameVideoReporter)||e.report(),null==(t=this._videoSwitchFirstFrameVideoReporter)||t.report(),null==(n=this._videoSwitchTotalLatencyReporter)||n.report())},t.handleVideoSwitchInteractionReport=function(){var e;this._initialized&&(null==(e=this._videoSwitchInteractionReporter)||e.report())},t.browserModeOpeningInteractionStart=function(){var e;this._initialized&&(null==(e=this._browserModeOpeningLatencyReporter)||e.resetStartTime())},t.browserModeOpeningInteractionAbort=function(){var e;this._initialized&&(null==(e=this._browserModeOpeningLatencyReporter)||e.deInit())},t.handleBrowserModeOpeningReport=function(){var e;this._initialized&&(null==(e=this._browserModeOpeningLatencyReporter)||e.report())},e}())},10354:function(e,t,n){n.d(t,{Q:function(){return v}});var r=n(48748),i=n(95170),o=n(7120),a=n(54333),c=n(79262),s=n(19293),u=n(62564),l=n(54161),d=n(78990),_=n(82379),m=n(1455),h=n(59952);function f(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(("undefined"==typeof Reflect?"undefined":(0,c._)(Reflect))==="object"&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function p(e,t){if(("undefined"==typeof Reflect?"undefined":(0,c._)(Reflect))==="object"&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var v=function(e){function t(){for(var e,n=arguments.length,o=Array(n),c=0;c<n;c++)o[c]=arguments[c];return(0,i._)(this,t),(e=(0,r._)(this,t,(0,a._)(o))).defaultState=(0,h.$V)(),e}return(0,o._)(t,e),t.prototype.updateVideo=function(e){var t=this;return e.pipe((0,u.T)(function(e){return(0,h.LM)().updateVideo(e),t.noop()}))},t}(d.E);v.jotaiAtom=h.yA,f([(0,_.Mj)(),p("design:type",Function),p("design:paramtypes",[void 0===s.c?Object:s.c]),p("design:returntype",void 0)],v.prototype,"updateVideo",null),v=f([(0,m.nV)("VideoPlayerJotai")],v),h.yA.__SIGI_MODULE__=v,(0,l.y)(v)},39950:function(e,t,n){n.d(t,{ao:function(){return _},uO:function(){return d}});var r,i=n(5377),o=n(45996),a=n(16327),c=n(90542),s=n(67503),u=n(60724),l=n(47149),d=((r={})[r.Loading=0]="Loading",r[r.Loaded=1]="Loaded",r),_={handleCommentClick:function(e){c.f.sendEvent("click_comment_button",e)},handleCommentLike:function(e){var t=e.isLike,n=(0,a._)(e,["isLike"]);c.f.sendEvent(t?"like_comment":"cancel_like_comment",n)},handlePostComment:function(e){var t=(0,s.Hd)(u.DK);c.f.sendEvent("post_comment",(0,o._)((0,i._)({},e),{from_group_id:t}))},handleShowMoreReply:function(e){c.f.sendEvent("show_more_reply",e)},handleCommentShow:function(e){c.f.sendEvent("video_comment_show",e)},handleSearchAt:function(e){c.f.sendEvent("search_comment_at",e)},handleSelectAt:function(e){c.f.sendEvent("add_comment_at",e)},handleEmojiSelect:function(e){c.f.sendEvent("search_comment_emoji",e)},handleClose:function(e){c.f.sendEvent("close_comment",e)},handleLeaveComment:function(e){c.f.sendEvent("leave_commet_page",e)},handleKeepComment:function(e){c.f.sendEvent("keep_editing_comment",e)},handleCopyCommentUrl:function(e){c.f.sendEvent("web_comment_url",e)},handleTapComment:function(e){c.f.sendEvent("tap_comment",e)},handleCloseCommentTab:function(){c.f.sendEvent("close_comment_tab",{enter_method:l.c.ClickCancel})},handleCloseCommentPanel:function(e){c.f.sendEvent("close_comment",e)},handleMentionItemShow:function(e){c.f.sendEvent("tag_mention_head_show",(0,o._)((0,i._)({},e),{function:"mention"}))},handleClickBackToTop:function(e){c.f.sendEvent("click_back_to_top",e)},handleCommentModuleExpose:function(e){c.f.sendEvent("reply_module_show",{type:e.type})},handleCommentExpose:function(e){c.f.sendEvent("reply_show",(0,i._)({},e))},handleCommentIconClick:function(e){c.f.sendEvent("comment_icon_click",e)},handleCommentPanelClose:function(e){c.f.sendEvent("comment_panel_close",e)},handleCommentSeeMoreClick:function(){c.f.sendEvent("comment_see_more_click")},handleCommentLoadComplete:function(e){c.f.sendEvent("comments_load_complete",e)},handleCommentLoadMore:function(e){c.f.sendEvent("comment_load_more",e)},handleCommentPreload:function(e){c.f.sendEvent("comments_preload",e)}}},90059:function(e,t,n){n.d(t,{$G:function(){return A},Cy:function(){return b},HT:function(){return F},Kq:function(){return w},M2:function(){return R},TI:function(){return O},VQ:function(){return P},ez:function(){return C},fk:function(){return T},fo:function(){return L},k0:function(){return S},ks:function(){return E},n:function(){return M},nX:function(){return k},rU:function(){return I}});var r,i,o,a,c,s,u,l,d,_,m,h,f,p,v=n(5377),g=n(45996),y=n(90542),w=((r={}).ClickEnter="click_enter",r.ClickIcon="click_icon",r.ClickViewAll="click_view_all",r.ClickSearch="homepage_click_search",r.ClickMoreGeneralList="click_more_general_list",r.ClickSearchResult="click_search_result",r.SearchHistory="search_history",r.RecomSearch="recom_search",r.ManagePersonalise="manage_personalise",r),C=((i={}).Hot="hot",i.Sav="top",i.Music="music",i.SearchBar="search_bar_outer",i.ExploreAll="explore_all",i),S=((o={}).EnrichSug="enrich_sug",o.NormalSug="normal_sug",o),k=((a={}).User="user",a.Video="video",a.General="general",a.Live="live",a.Photo="photo",a),R=((c={}).RecomSearchFeedback="recom_search_feedback",c),b=((s={}).RecomSearch="recom_search",s.SearchHistory="search_history",s.videoTitleChallenge="video_title_challenge",s.NormalSearch="normal_search",s.SearchOuter="search_outer",s.SwitchTab="switch_tab",s.ClickMoreGeneralList="click_more_general_list",s.SearchSug="search_sug",s.DefaultSearchKeyword="default_search_keyword",s.CommentRelatedSearch="comment_related_search",s.CommentHighlightedWords="comment_highlighted_words",s.RelatedSearch="related_search",s),I=((u={}).Sug="sug",u.RecomSearch="recom_search",u.SearchBar="related_search_anchor_v2",u.CommentRelatedSearch="comment_related_search",u.CommentHighlightedWords="comment_highlighted_words",u.RelatedSearch="related_search",u.ExploreAll="explore_all",u),E=((l={}).Tag="tag",l.Person="person",l.LiveCard="live_card",l.HotUser="hot_user",l),P=((d={}).ClickIntoLive="click_into_live",d.ClickInfo="click_info",d.ClickClose="click_close",d.ClickBlankSpace="click_blank_space",d.ClickDone="click_done",d),T=((_={}).Report="report",_.NotRelevant="not_relevant",_.Close="close",_),F=((m={}).Enter="enter",m.Cancel="cancel",m),O=((h={}).NotInterested="Not interested",h.UnrelatedContent="Unrelated content",h.InappropriateContent="Inappropriate content",h.Others="others",h.Cancel="cancel",h),M=((f={})[f.OnToOff=1]="OnToOff",f[f.OffToOn=2]="OffToOn",f[f.RemainOff=3]="RemainOff",f[f.RemainOn=4]="RemainOn",f),L=((p={}).On="on",p.Off="off",p),A={handleSugClick:function(e){y.f.sendEvent("trending_words_click",e)},handleSugImpression:function(e){y.f.sendEvent("trending_words_show",e)},handleSugGroupImpression:function(e){y.f.sendEvent("trending_show",e)},handleSearchEntry:function(e){y.f.sendEvent("enter_search",e)},handleSearchImpression:function(e){y.f.sendEvent("search_result_show",(0,v._)({token_type:"person"},e))},handleSearchVideoImpression:function(e){y.f.sendEvent("search_result_show_video",(0,v._)({},e))},handleSearch:function(e){y.f.sendEvent("search",(0,g._)((0,v._)({},e),{is_success:1}))},handleSearchResultClick:function(e){y.f.sendEvent("search_result_click",(0,v._)({},e))},handleSearchSessionFinish:function(e){y.f.sendEvent("search_session_finish",e)},handleSearchResultEmpty:function(e){y.f.sendEvent("empty_search",(0,v._)({},e))},handleClickSearch:function(e){var t=e.target;y.f.sendEvent("click_search",{target:void 0===t?"homepage_click_search":t})},handleEnterSearchPage:function(e){var t=e.enter_method;y.f.sendEvent("enter_search_page",{enter_method:void 0===t?"homepage_click_search":t})},handleEnterSearchBlankPage:function(e){y.f.sendEvent("enter_search_blankpage",e)},handleSearchHistory:function(e){y.f.sendEvent("search_history",e)},handleTrendingWordsShow:function(e){y.f.sendEvent("trending_words_show",e)},handleTrendingWordsClick:function(e){y.f.sendEvent("trending_words_click",e)},handleTrendingShow:function(e){y.f.sendEvent("trending_show",e)},handleCommentRelatedSearchBoardShow:function(e){y.f.sendEvent("comment_related_search_board_show",e)},handleCommentRelatedSearchBoardClick:function(e){y.f.sendEvent("comment_related_search_board_click",e)},handleSugReportConfirm:function(e){y.f.sendEvent("sug_report_confirm",e)},handleSugReportLaunch:function(e){y.f.sendEvent("sug_report_launch",e)},handleChallengeTitleClick:function(e){y.f.sendEvent("challenge_title_click",e)},handleClickSearchFeedback:function(e){y.f.sendEvent("click_search_feedback",e)},handleSearchTextSubmit:function(e){y.f.sendEvent("search_text_submit",e)},handleSearchFeedbackStatus:function(e){y.f.sendEvent("search_feedback_status",e)},handleManageSearchPopupShow:function(e){y.f.sendEvent("manage_search_popup_show",e)},handleManageSearchPopupClick:function(e){y.f.sendEvent("manage_search_popup_click",e)},handleSearchNonPersonalizationEntranceShow:function(e){y.f.sendEvent("search_non_personalization_entrance_show",e)}}}}]);