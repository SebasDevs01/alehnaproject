"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["87051"],{44975:function(e,t,n){var r=n(5377),o=n(45996),i=n(2787);n(40099),t.A=function(e){return(0,i.Y)("svg",(0,o._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"currentColor"},e),{children:(0,i.Y)("path",{d:"M9 9.31v17.75c5.27-1.73 11.45-2.05 16.16 1.31 4.03 2.88 9.52 2.01 13.84.32V10.94c-5.27 1.73-11.45 2.05-16.16-1.31-4-2.86-9.53-2.01-13.84-.32M43 8v22a2 2 0 0 1-1.1 1.79c-5.83 2.9-13.5 3.82-19.06-.16C18.8 28.75 13.32 29.6 9 31.3V44a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8c0-.75.44-1.45 1.1-1.79 5.75-2.87 13.62-3.73 19.06.16 4.37 3.13 10.43 2.04 14.95-.16C41.4 5.56 43 6.54 43 8"})}))}},1573:function(e,t,n){var r=n(5377),o=n(45996),i=n(2787);n(40099),t.A=function(e){return(0,i.Y)("svg",(0,o._)((0,r._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"currentColor"},e),{children:(0,i.Y)("path",{d:"M45.08 25.84a4.5 4.5 0 0 0 0-3.67 4.8 4.8 0 0 0-1.75-1.91c-.7-.5-1.64-1.04-2.78-1.69L18.87 6.14c-1.12-.65-2.06-1.19-2.83-1.54a4.8 4.8 0 0 0-2.52-.55 4.5 4.5 0 0 0-3.16 1.84c-.53.73-.7 1.6-.78 2.45s-.08 1.93-.08 3.22v24.88c0 1.3 0 2.37.08 3.22.08.86.25 1.73.78 2.45a4.5 4.5 0 0 0 3.16 1.84c.9.1 1.74-.2 2.52-.55.77-.35 1.7-.89 2.83-1.53l21.68-12.44c1.14-.65 2.08-1.2 2.78-1.69.7-.5 1.38-1.08 1.75-1.9"})}))}},17407:function(e,t,n){n.d(t,{$4:function(){return T},Mu:function(){return M},o$:function(){return E}});var r=n(79066),o=n(5377),i=n(45996),u=n(72516),a=n(18499),l=n(4676),c=n(10625),s=n(64781),d=n(1366),f=n(39950),m=n(50173),v=n(77060),p=n(35702),_=n(57007),y=n(55453),h=n(31847),g=n(7871),C=n(72702),w=n(31097),I={nickname:"",replyId:void 0,replyToReplyId:void 0,position:-1},S=(0,c.p)("commentInputAtom@tiktok/webapp-atoms",{reply:(0,o._)({},I),replyToOtherComment:(0,o._)({},I),mentionUserList:[],isInputEmpty:!0,isReplyInputEmpty:!0,isInputFocus:!1,needClearInput:!1,needResetKeyword:!1,replyCid:""}),b=(0,l.i)(S,function(e,t){return{setReplyCid:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{replyCid:e})})},setReply:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{reply:null===e?(0,o._)({},I):e})})},setReplyOptimize:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{replyToOtherComment:e})})},setMentionUserList:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{mentionUserList:null===e?[]:e})})},setIsReplyInputEmpty:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{isReplyInputEmpty:e})})},setIsInputEmpty:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{isInputEmpty:e})})},setIsInputFocus:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{isInputFocus:e})})},setNeedClearInput:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{needClearInput:e})})},setNeedResetKeyword:function(e){t(S,function(t){return(0,i._)((0,o._)({},t),{needResetKeyword:e})})},publishComment:function(t){return(0,r._)(function(){var n,r,l,c,I,b,M,T,E,k,P,L,A,R,x,O,F,D,U,V,B,W,N,j,q,H,G,Y,K,X,Z;return(0,u.__generator)(this,function(u){switch(u.label){case 0:n=this,r=(0,g.T)(),l=e(S),c=e(C.Pu),I=t.awemeId,b=t.inputText,M=t.textExtra,T=t.teaParams,E=t.isReplyComment,k=t.shouldOptimizeReply,P=t.isCommentRedesign,L=l.reply,A=l.replyToOtherComment,x=(R=E?A:L).replyId,O=R.replyToReplyId,F=R.nickname,D=R.position,U=c[I],V={aweme_id:I,text:b,reply_id:x,reply_to_reply_id:O,text_extra:JSON.stringify(M)},B=!!F&&!k||E,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(0,w.lG)(V)];case 2:return N=(W=u.sent()).status_code,j=W.comment,N===_.s.Ok?(q=B?"0"===O?"reply":"reply_to_reply":"original",H=F?r("comment_reply_success"):r("comment_post_success"),p.F.destroy(),p.F.open({content:H,duration:3,getContainer:y.M,getContainerPosition:"fixed"}),f.ao.handlePostComment((0,i._)((0,o._)({},T),{comment_category:q,comment_id:j.cid})),(G=null==U?void 0:U.ad_info)&&(Y=(0,m.n5)({ad_info:G,play_mode:T.play_mode}),v.pg.handleComment(Y))):N===_.s.CommentBanCode?(p.F.destroy(),p.F.open({content:r("comment_banned_toast"),duration:3,getContainer:y.M,getContainerPosition:"fixed"})):N?(p.F.destroy(),p.F.open({content:r("comment_post_failed"),duration:3,getContainer:y.M,getContainerPosition:"fixed"})):(p.F.destroy(),p.F.open({content:r("comment_nointernet_toast"),duration:3,getContainer:y.M,getContainerPosition:"fixed"})),N===_.s.Ok&&(K=(0,h.OL)(),X=["comment","reply",j.reply_id],Z=["comment",j.aweme_id],(0,a.unstable_batchedUpdates)(function(){E&&k?(P&&((0,d.performManualOptimisticUpdate)(X,(0,s.qZ)({reply:j,parentCid:null!=x?x:""})),(0,d.performManualOptimisticUpdate)(Z,(0,s.uv)({awemeId:I,parentCid:null!=x?x:""}))),n.setReplyCid(""),K.handleReplySuccess({comment:j,position:D})):B?(P&&((0,d.performManualOptimisticUpdate)(X,(0,s.qZ)({reply:j,parentCid:null!=x?x:""})),(0,d.performManualOptimisticUpdate)(Z,(0,s.uv)({awemeId:I,parentCid:null!=x?x:""}))),n.setNeedClearInput(!0),K.handleReplySuccess({comment:j,position:D})):(n.setNeedClearInput(!0),P&&(0,d.performManualOptimisticUpdate)(Z,(0,s.nK)({comment:j})),K.handlePostSuccess(j))})),[3,4];case 3:return u.sent(),[3,4];case 4:return[2]}})}).call(this)}}}),M=b.useAtomService,T=b.useServiceDispatchers,E=b.useServiceState},31097:function(e,t,n){n.d(t,{dj:function(){return s},fM:function(){return l},i_:function(){return c},lG:function(){return d}});var r=n(79066),o=n(35383),i=n(72516),u=n(42646),a=n(56904);function l(){return(0,r._)(function(){return(0,i.__generator)(this,function(e){return[2,u.h.get("/api/at/default/list/",{query:{cursor:0,count:25},baseUrlType:a.Z4.FixedWww})]})})()}function c(e){return(0,r._)(function(){return(0,i.__generator)(this,function(t){return[2,u.h.get("/api/mention/recent/contact/list/v1/",{query:{mentionType:3,secUid:e},baseUrlType:a.Z4.FixedWww})]})})()}function s(e,t){return(0,r._)(function(){return(0,i.__generator)(this,function(n){return[2,u.h.get("/api/comment/search/sug/user/",{query:{keyword:e,count:30,mention_type:3,uid_filter_list:t},baseUrlType:a.Z4.FixedWww})]})})()}function d(e){return(0,r._)(function(){return(0,i.__generator)(this,function(t){return[2,u.h.post("/api/comment/publish/",{query:e,baseUrlType:a.Z4.CommentTest,headers:(0,o._)({},a.nk,u.h.csrfToken)})]})})()}},45755:function(e,t,n){n.d(t,{vZ:function(){return w},kh:function(){return S},Z9:function(){return I}});var r=n(5377),o=n(45996),i=n(4676),u=n(10625),a=n(76446),l=n(48859),c=n(59952),s=n(34412),d=n(38306),f=n(20386),m=n(78662),v=n(72702),p=function(e,t){var n=t(v.Pu);return e.flatMap(function(e){var t=n[e];return!t||t.showNotPass||6===t.takeDown?[]:e})},_=(0,u.p)("immersivePlayerItemListConfigAtom@tiktok/webapp-atoms",null),y=(0,u.p)("immersivePlayerItemListAtom@tiktok/webapp-atoms",function(e){var t=e(_);if(!t)return[];if("single"===t.mode){var n=(0,f.D)(t.itemListKey);return n?p(e(n).list,e):[]}return"id"===t.mode&&"user-playlist"===t.source?p(e(m.DB)[t.id].list,e):[]},function(e,t,n){t(_,n)}),h=(0,u.p)("immersivePlayerStateAtom@tiktok/webapp-atoms",{index:-1,isOpen:!1,isCommentsOpen:!1}),g=(0,u.p)("immersivePlayerAtom@tiktok/webapp-atoms",function(e){var t=e(h),n=e(y),o=e(_);return(0,r._)({itemList:n,itemListSourceConfig:o},t)},function(e,t,n){console.warn("Tried to set immersivePlayerAtom with:",n)}),C=(0,i.i)(g,function(e,t){return{syncStateToPlayerAtom:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=e(_),o=e(g).index,i=null!=n?n:e(y)[o],u=e(s.jD)[i],f=(null==u?void 0:u.contentType)==="video"?u.currentTime:void 0,m={currentVideo:{index:o,id:i,mode:l.ey.ImmersivePlayer},playProgress:null!=f?f:0,pageType:(null==r?void 0:r.mode)==="single"?d.FB[r.itemListKey]:a.g.Unknown};(0,c.LM)().updateVideo(m),(null==u?void 0:u.contentType)==="video"?(0,s.Q3)().setVideoInfo({itemId:i,currentTime:f}):(null==u?void 0:u.contentType)==="photo"&&(0,s.Q3)().setPhotoInfo({itemId:i})},openImmersivePlayer:function(e){var n=e.id,r=e.index,o=e.itemListSourceConfig,i=e.teaParams,u=e.isCommentsOpen;t(_,o),t(h,{index:r,isOpen:!0,isCommentsOpen:u,teaParams:i}),this.syncStateToPlayerAtom({id:n})},closeImmersivePlayer:function(){this.syncStateToPlayerAtom(),t(h,{index:-1,isOpen:!1,isCommentsOpen:!1,teaParams:void 0}),t(_,null)},setIndex:function(e,n){t(h,function(t){return(0,o._)((0,r._)({},t),{index:e})}),this.syncStateToPlayerAtom({id:n})},setIsCommentsOpen:function(e){t(h,function(t){return(0,o._)((0,r._)({},t),{isCommentsOpen:e})})}}}),w=C.useAtomService,I=C.useServiceState,S=C.useServiceDispatchers;C.getStaticApi},78662:function(e,t,n){n.d(t,{DB:function(){return S},V6:function(){return M}});var r=n(79066),o=n(35383),i=n(5377),u=n(45996),a=n(6586),l=n(72516),c=n(73455),s=n(4676),d=n(10625),f=n(80514),m=n(35144),v=n(75434),p=n(91402),_=n(42646),y=n(56904),h=n(89671),g=n(65030),C=n(89458),w=(0,p.M)({csr:function(e){return(0,r._)(function(){var t;return(0,l.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,f.e)()];case 1:return t=n.sent(),[2,_.h.get("/api/mix/item_list/",{query:(0,u._)((0,i._)({},e),{clientABVersions:t.join(",")}),baseUrlType:y.Z4.FixedWww})]}})})()},ssr:function(e){return(0,r._)(function(){var t,n,r,o,i,u,c,s,d,f,m,p,_,y,C,w;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return t=(0,v.yK)(),r=void 0===(n=e.mixId)?"":n,i=void 0===(o=e.count)?24:o,[4,Promise.all([t.service.location.getUserCountryCode(),t.service.sharedUtil.appId(),t.i18n.getLanguage(),t.service.sharedSeo.isGoogleBot(),t.service.sharedSeo.isSearchEngineBot()])];case 1:return c=(u=a._.apply(void 0,[l.sent(),5]))[0],s=u[1],d=u[2],f=u[3],m=u[4]?f?h.IC.WebScene_BOT_GOOGLE_ITEMLIST_MIX:h.IC.GENERAL_BOT_ITEMLIST_MIX:h.IC.WebScene_WEBAPP_ITEMLIST_MIX,[4,t.service.webapp.data.getItemList({Id:r,MaxCursor:"0",MinCursor:"0",Count:i,AppId:s,Region:c,Language:d,Source:m,Extra:{user_agent:t.headers[g.UA]||""}})];case 2:return _=(p=l.sent()).statusCode,y=p.statusMsg,C=p.hasMore,w=p.items,[2,{statusCode:_,statusMsg:y,hasMore:C,cursor:p.maxCursor,itemList:w}]}})})()}}),I=(0,d.p)("activePlaylistItemListAtom@tiktok/webapp-atoms",g.hA),S=(0,c._)((0,d.p)("playlistItemListAtom@tiktok/webapp-atoms",{}),{rehydrationKey:"desktop.playlistPage.playlistItemList"}),b=(0,s.i)(S,function(e,t){return{fetchPlaylistItemList:function(n){return(0,r._)(function(){var r,a,c,s,d,f,v,p,_;return(0,l.__generator)(this,function(l){switch(l.label){case 0:if(r=e(S),a=n.mixId,(s=(c=n.itemListKey)||a)in r&&!r[s].hasMore)return[2,void t(I,r[s])];l.label=1;case 1:return l.trys.push([1,3,,4]),v=null!=(f=null==(d=r[s])?void 0:d.cursor)?f:"0",p=(0,m.x)().language,[4,w({mixId:a,language:p,cursor:v,aid:g.xE,count:g.vu})];case 2:return _=l.sent(),t(I,function(e){var t;return null!=(t=r[s])?t:e}),(0,C.Tj)(e,t,I,s,_,{isPlayList:!0}),t(S,function(t){return(0,i._)((0,u._)((0,i._)({},t),(0,o._)({},a,e(I))),c&&(0,o._)({},c,e(I)))}),[3,4];case 3:return l.sent(),(0,C.e_)(t,I),[3,4];case 4:return[2]}})})()}}}),M=(b.useAtomService,b.useServiceDispatchers);b.useServiceState},32991:function(e,t,n){n.d(t,{f:function(){return m}});var r=n(5377),o=n(6586),i=n(2787),u=n(40099),a=n(55169),l=n(77443),c=(n(15305),n(83980)),s=n(41150),d=n(80599),f=(0,a.Rq)({resolved:{},chunkName:function(){return"ad-report-loadable"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e("41685"),n.e("84673"),n.e("71522"),n.e("18233")]).then(n.bind(n,22357))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 22357}},(0,r._)({},s.bu));function m(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onClose,t=(0,c.g9)().hideModal,n=(0,o._)((0,l.S)(d.y7,{selector:function(e){return e.showing},dependencies:[]}),2),r=n[0],a=n[1],s=(0,u.useCallback)(function(){null==e||e(),t(),a.hideReport()},[a,t,e]);return(0,i.Y)(f,{onClose:s,visible:r})}},32906:function(e,t,n){n.d(t,{ZC:function(){return l},_g:function(){return u},d7:function(){return a}});var r=n(96057),o=n(59510),i=n(40099);function u(e,t,n){return(0,i.useMemo)(function(){return(0,r.A)(e,n)},t)}function a(e,t,n,r){return(0,i.useMemo)(function(){return(0,o.A)(e,n,r)},t)}function l(e){var t=(0,i.useRef)(e);return(0,i.useEffect)(function(){t.current=e},[e]),t.current}},4923:function(e,t,n){n.d(t,{B:function(){return p}});var r=n(5377),o=n(6586),i=n(2787),u=n(40099),a=n(77443),l=n(15305),c=n(32991),s=n(83980),d=n(83168),f=n(55169),m=n(41150),v=(0,f.Rq)({resolved:{},chunkName:function(){return"report"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e("41685"),n.e("84673"),n.e("20853"),n.e("79447"),n.e("18008"),n.e("35784"),n.e("71522"),n.e("49750"),n.e("11054"),n.e("85439"),n.e("38778"),n.e("98905"),n.e("45464"),n.e("52861"),n.e("89828"),n.e("1353"),n.e("23322")]).then(n.bind(n,9675))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then(function(e){return t.resolved[n]=!0,e})},requireSync:function(e){return n(this.resolve(e))},resolve:function(){return 9675}},(0,r._)({},m.bu));function p(e){var t=function(t){var n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onClose,t=(0,s.g9)().hideModal,n=(0,o._)((0,a.S)(d.hf,{selector:function(e){return e.showing},dependencies:[]}),2),r=n[0],l=n[1],c=(0,u.useCallback)(function(){null==e||e(),t(),l.hideReport()},[l,t,e]);return(0,i.Y)(v,{onClose:c,visible:r})}(),l=(0,c.f)();return(0,i.FD)(i.FK,{children:[(0,i.Y)(e,(0,r._)({},t)),n,l]})};return t.displayName="WithReport(".concat((0,l.x)(e),")"),t}},89130:function(e,t,n){n.d(t,{D:function(){return o}});var r,o=((r={})[r.Backspace=8]="Backspace",r[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Esc=27]="Esc",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.Left=37]="Left",r[r.Up=38]="Up",r[r.Right=39]="Right",r[r.Down=40]="Down",r[r.F=70]="F",r[r.Two=50]="Two",r[r.L=76]="L",r[r.M=77]="M",r[r.Clear=144]="Clear",r[r.T=84]="T",r[r.R=82]="R",r[r.C=67]="C",r)},63737:function(e,t,n){n.d(t,{Lj:function(){return a},QI:function(){return l},T5:function(){return u},cb:function(){return c}});var r,o=n(35383),i=n(48859),u=(r={},(0,o._)(r,i.ey.OneColumn,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.ThreeColumn,{forceMute:!1,defaultMute:!0}),(0,o._)(r,i.ey.BrowserMode,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.VideoDetail,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.Pip,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.FullscreenMode,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.CreatorTab,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.MiniPlayer,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.ImmersivePlayer,{forceMute:!1,defaultMute:!1}),(0,o._)(r,i.ey.TiktokStories,{forceMute:!1,defaultMute:!1}),r),a=.8,l=.05,c=5},19660:function(e,t,n){n.d(t,{O9:function(){return i},hG:function(){return u},yE:function(){return a}});var r=n(40099),o=n(32906);function i(e){var t=e.elemRef,n=e.onHitBottom,i=e.bottomThreshold,u=void 0===i?10:i,a=e.throttle,l=e.isFirstRender,c=(0,o._g)(function(){if(t.current&&!l){var e=t.current;e.offsetHeight+e.scrollTop+u>=e.scrollHeight&&(null==n||n())}},[u,t,n,l],void 0===a?100:a);(0,r.useEffect)(function(){var e=t.current;return null==e||e.addEventListener("scroll",c),function(){null==e||e.removeEventListener("scroll",c)}},[t,t.current,c])}function u(e){var t=e.elemRef,n=e.boundingElemRef,i=e.onHitBottom,u=e.bottomThreshold,a=void 0===u?10:u,l=e.throttle,c=(0,o._g)(function(){t.current&&t.current.getBoundingClientRect().bottom-a<=((null==n?void 0:n.current)?n.current.getBoundingClientRect().bottom:window.innerHeight)&&(null==i||i())},[n,a,t,i],void 0===l?100:l);(0,r.useEffect)(function(){var e,t=null!=(e=null==n?void 0:n.current)?e:window;return t.addEventListener("scroll",c),function(){t.removeEventListener("scroll",c)}},[n,c])}function a(e){var t=e.elemRef,n=e.onHitTop,i=e.scrollTopRef,u=e.throttle,a=e.isFirstRender,l=e.onScrollDown,c=(0,o._g)(function(){if(t.current&&!a){var e=t.current,r=e.scrollTop,o=e.scrollHeight,u=r<=0;if(i){var c=r<=i.current;i.current=r,u&&c&&(null==n||n(),t.current.scrollTop=t.current.scrollHeight-o)}else u&&(null==n||n());r>0&&(null==l||l())}},[t,n,a],void 0===u?100:u);(0,r.useEffect)(function(){var e=t.current;return null==e||e.addEventListener("scroll",c),null==e||e.addEventListener("wheel",c),function(){null==e||e.removeEventListener("scroll",c),null==e||e.removeEventListener("wheel",c)}},[t,t.current,c])}},19298:function(e,t,n){n.d(t,{TL:function(){return A},Ux:function(){return k},ah:function(){return T},au:function(){return R},eM:function(){return x},iJ:function(){return b},jj:function(){return M},rq:function(){return E},tW:function(){return L}});var r=n(5377),o=n(45996),i=n(6586),u=n(40099),a=n(73580),l=n(23680),c=n(47149),s=n(78256),d=n(35702),f=n(89241),m=n(19642),v=n(95794),p=n(93844),_=n(65362),y=n(33611),h=n(17505),g=n(729),C=n(63737),w=n(48772),I=n(89379),S=n(81314);function b(e){var t=e.loadingThreshold,n=void 0===t?1e3:t,r=e.isCurrentVideo,o=(0,i._)((0,u.useState)(!1),2),a=o[0],l=o[1],c=(0,u.useRef)(0),s=(0,u.useCallback)(function(){c.current&&window.clearTimeout(c.current),l(!1)},[]),d=(0,u.useCallback)(function(){n?(c.current&&window.clearTimeout(c.current),c.current=window.setTimeout(function(){l(!0)},n)):l(!0)},[n]);return(0,u.useEffect)(function(){return r||(window.clearTimeout(c.current),l(!1)),function(){return window.clearTimeout(c.current)}},[r]),{loading:a,handleCanPlayWithLoading:s,handlePauseWithLoading:s,handlePlayingWithLoading:s,handleErrorWithLoading:s,handleWaitingWithLoading:d}}function M(){var e=(0,i._)((0,u.useState)(!0),2),t=e[0],n=e[1],r=(0,u.useCallback)(function(){n(!1)},[]),o=(0,u.useCallback)(function(){n(!0)},[]);return(0,u.useEffect)(function(){var e=(0,v.Gz)(r,o);return function(){null==e||e()}},[o,r]),t}function T(e){var t=e.playMode,n=e.itemMute,i=void 0!==n&&n,a=(0,p.s)(),l=(0,w.y)(),m=l.mute,v=l.volume,_=i||m,y=(0,f.S4)(),g=(0,h.W4t)(),C=(0,u.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.c.Click,u=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;if(i||l)return d.F.destroy(),d.F.open({content:a("music_detail_unavailable_1"),duration:3,widthType:"half"}),!1;if(s.p.handleSwitchSound((0,o._)((0,r._)({},u),{muted:e,playMode:t,enter_method:n})),s.p.handleVolumeChange({volume_to:v,click_mute:!0}),S.lA.setItem("muted",e),y.setMute(e),!e&&0===S.lA.getItem("volume")){var f=.6;"v2"===g?f=.7:"v3"===g?f=.75:"v4"===g?f=.5:"v5"===g&&(f=.4),S.lA.setItem("volume",f),y.setVolume(f)}return!0},[y,t,g,v,a,i]);return{mute:_,volume:v,setMute:C}}function E(){var e=(0,w.y)(),t=e.mute,n=e.volume,r=(0,f.S4)();return{mute:t,volume:n,setVolume:(0,u.useCallback)(function(e,t){S.lA.setItem("volume",e),r.setVolume(e),0===e?(S.lA.setItem("muted",!0),r.setMute(!0)):t&&(S.lA.setItem("muted",!1),r.setMute(!1))},[r])}}function k(e,t){var n,r,o=(0,f.S4)(),i=o.setMute,a=o.setVolume,l=(0,h.W4t)(),c=(0,h.QFN)(),s=c.isInDefaultVolumeExperiment,d=c.isDefaultVolumeV1,m=c.isDefaultVolumeV2,v=c.isDefaultVolumeV3,p=c.isDefaultVolumeV4,_=!1,y=.6;t||("v2"===l?y=.7:"v3"===l?y=.75:"v4"===l?y=.5:"v5"===l&&(y=.4),s&&(d?y=.4:m?y=.5:v?y=.75:p&&(y=1)),_=null!=(n=S.lA.getItem("muted",!0))?n:C.T5[e].defaultMute,y=null!=(r=S.lA.getItem("volume",!0))?r:y),(0,u.useEffect)(function(){if(t){var n,r,o=.6;"v2"===l?o=.7:"v3"===l?o=.75:"v4"===l?o=.5:"v5"===l&&(o=.4),s&&(d?o=.4:m?o=.5:v?o=.75:p&&(o=1)),_=null!=(n=S.lA.getItem("muted",!0))?n:C.T5[e].defaultMute,o=null!=(r=S.lA.getItem("volume",!0))?r:o}i(_),a(y)},[])}var P="video_playback_error";function L(){var e=(0,a.Nj)(I.V$);return(0,u.useCallback)(function(t){var n,r,o,i=null!=(o=null==t||null==(n=t.nativeEvent)?void 0:n.target)?o:null==t||null==(r=t.nativeEvent)?void 0:r.srcElement;if(i){var u=i.error,a=void 0===u?{}:u,l=a.code,c=void 0===l?-1:l,s=a.message,d=i.networkState,f=i.readyState;e.emitEvent(P,{code:c},{errorMessage:void 0===s?"Empty message":s,errorCode:c,readyState:f,networkState:d,isXgPlayer:"0"})}},[e])}function A(){var e=(0,a.Nj)(I.V$);return(0,u.useCallback)(function(t){if(t)try{var n,r,o,i=t.error,u=t.readyState,a=t.networkState,l=t.codecType,c=null!=i?i:{},s=c.code,d=void 0===s?-1:s,f=c.message,m=(0,_.mY)();e.emitEvent(P,{code:d},{errorMessage:void 0===f?"Empty message":f,errorCode:String(d),readyState:String(u),networkState:String(a),hevcRobustness:m.supportRobustness||"-100",hevcBase:m.isSupportBase?"1":"-100",is_bytevc1:null!=(r=String(+((void 0===l?"h264":l).indexOf("h265")>-1)))?r:"-100",cpu_core:null!=(o=String(null==(n=navigator)?void 0:n.hardwareConcurrency))?o:"0"})}catch(e){}},[e])}function R(e){var t=(0,l.P)(g.k);return(0,u.useMemo)(function(){var n=[];return e.forEach(function(e){var r,o,i=null==(r=t[null!=(o=e.id)?o:""])?void 0:r.video;i&&n.push((0,y.WB)(i))}),n},[t,e])}var x=function(){var e=(0,m.J3)(),t=(0,h.HLh)(),n=(0,h.W8W)().isInAutoplayUnmuteExperiment,r=(0,u.useRef)(!1);return(0,u.useCallback)(function(o){var i,u=e.getStaticPlayerUIState(),a=null!=(i=null==u?void 0:u.showUnmuteTooltip)&&i;if(o&&!(o<3)&&!a&&t)if(n){if(r.current)return;r.current=!0,e.updateShowUnmuteTooltip(!0),setTimeout(function(){e.updateShowUnmuteTooltip(!1)},5e3)}else{var l=S.lA.getItem("unmuteTooltipTimestamp");if(l&&Date.now()-l<6048e5)return;e.updateShowUnmuteTooltip(!0),setTimeout(function(){e.updateShowUnmuteTooltip(!1),S.lA.setItem("unmuteTooltipTimestamp",Date.now())},5e3)}},[n,e,t])}},72845:function(e,t,n){n.d(t,{A5:function(){return p},M2:function(){return v},Zy:function(){return m},zW:function(){return f}});var r=n(5377),o=n(45996),i=n(11854),u=n(23680),a=n(50173),l=n(48859),c=n(77060),s=n(17832),d=n(729),f=function(e){if(e){var t,n=null!=(t=e.log_extra)?t:"";try{var r=JSON.parse(n);return{charge_type:r.charge_type,req_id:r.req_id,system_origin:r.system_origin}}catch(e){return}}},m=function(e){var t=e.adInfo,n=e.refer,i=e.tag;if(t.web_url){var u=t.web_url,s=(0,a.n5)({ad_info:t,play_mode:l.Tk.OneColumn});window.open(u,"_blank"),c.pg.handleRealtimeClick((0,o._)((0,r._)({},s),{refer:n,tag:i}))}},v=function(e,t){var n,r,o=(0,s.Lu)(function(e){return null==e?void 0:e.list},i.bN),a=(0,u.P)(d.k,{selector:function(e){return e},dependencies:[e,t]});if(!(null==(n=a[e])?void 0:n.ad_info)||!o||t>=o.length)return 0;for(var l=t-1;l>=0;l--)if(null==(r=a[o[l]])?void 0:r.ad_info)return t-l;return 0},p=function(e){var t,n,r=(0,s.Lu)(function(e){return null==e?void 0:e.list},i.bN),o=(0,u.P)(d.k,{selector:function(e){return e},dependencies:[e]});if(!(null==(t=o[e])?void 0:t.ad_info)||!r)return 0;for(var a=0;a<=r.length;a++)if(null==(n=o[r[a]])?void 0:n.ad_info)return a+1;return 0}},48772:function(e,t,n){n.d(t,{O:function(){return i},y:function(){return o}});var r=n(89241),o=function(){return{mute:(0,r.i3)(),volume:(0,r.R4)()}},i=function(e){var t=(0,r.Jz)(function(t){return{mute:e||t.mute,volume:t.volume,playing:t.playing}});return{mute:t.mute,volume:t.volume,playing:t.playing}}},44482:function(e,t,n){n.d(t,{G:function(){return o}});var r=n(8561),o=function(e){if(!e)return r.Xu.JPEG;var t=e.split("?")[0];return t.endsWith(".avif")?r.Xu.AVIF:t.endsWith(".webp")?r.Xu.WEBP:r.Xu.JPEG}},24373:function(e,t,n){n.d(t,{x:function(){return S}});var r,o=n(5377),i=n(45996),u=n(16327),a=n(6586),l=n(2787),c=n(12751),s=n(40099),d=n(80677),f=n(8561),m=n(76794),v=n(43264),p=n(13610),_=n(41919),y=n(44482),h=["240","480","720","960"],g=(0,c.default)("div",{target:"ee46mhe0",label:"0be0dc34--Box"})("width:100%;height:100%;position:relative;& img{object-fit:",function(e){var t;return null!=(t=e.objectFit)?t:"cover"},";}"),C=(0,c.default)("img",{target:"ee46mhe1",label:"0be0dc34--Img"})("width:100%;height:100%;object-fit:",function(e){var t;return null!=(t=e.objectFit)?t:"cover"},";"),w=(r=0,function(){return r++}),I=(0,s.forwardRef)(function(e,t){var n,r,i=e.className,c=e.objectFit,_=e.style,C=e.video,I=e.imagexSsrMode,S=void 0===I||I,b=e.onLoad,M=(e.useDynamic,e["data-fmp"]),T=(0,u._)(e,["className","objectFit","style","video","imagexSsrMode","onLoad","useDynamic","data-fmp"]),E=C.zoomCover,k=C.cover,P=void 0===k?"":k,L=C.quality,A=C.loading,R=(0,y.G)(null==E?void 0:E["240"]),x=(null!=(n=(0,v.W)(function(){return["userAgent"]},[]))?n:{}).userAgent,O=null!=(r=(0,p.U)(function(){return["isIOS","videoCoverSettings"]},[]))?r:{},F=O.isIOS,D=O.videoCoverSettings,U=/^((?!chrome|android).)*safari/i.test(null!=x?x:""),V="undefined"==typeof window,B=S&&V&&D;B&&D._ssrCount++;var W=V?0:w(),N=(0,a._)((0,m.Dh)("video-cover-viewer-ssr-count"),3),j=N[0],q=(N[1],N[2]),H=!!S&&(V||W<Number(j)),G=(0,a._)((0,s.useState)(!1),2),Y=G[0],K=G[1],X=(0,a._)((0,s.useState)(!1),2),Z=X[0],z=X[1],J=(0,s.useCallback)(function(e){if((e.target.naturalWidth<=1||e.target.naturalHeight<=1)&&!Z)return void z(!0);e.target.currentSrc.startsWith("data:image")||(null==b||b(e),K(!0))},[Z,b]);return(0,l.FD)(g,{className:i,style:_,objectFit:c,ref:t,children:[B&&(0,l.Y)(q,{data:D._ssrCount}),(0,l.Y)(d.j,(0,o._)({ssr:H,ua:x,src:P,formats:R===f.Xu.AVIF?["avif"]:R===f.Xu.WEBP?["webp"]:[],imageSizes:h.map(function(e){return Number(e)}),layout:"fill",loader:function(e){if(Z||"image"===e.format&&R!==f.Xu.JPEG)return P;if(E){var t;t=E[null!=L?L:e.width||"720"]}return!t&&(t=P).startsWith("http://")&&(t=t.replace("http://","https://")),t},loading:U||F?"eager":void 0===A?"lazy":A,error:(0,l.Y)("div",{}),onLoad:J,"data-fmp":V||Y?M:void 0},T))]})}),S=(0,s.memo)((0,s.forwardRef)(function(e,t){var n=e.useDynamic,r=e.video,c=(0,u._)(e,["useDynamic","video"]),d=r.dynamicCover,m=r.loading,v=(0,a._)((0,s.useState)(!!d),2),p=v[0],h=v[1];return((0,s.useEffect)(function(){n&&(0,y.G)(d)===f.Xu.WEBP&&h((0,_.PD)().supportWebp)},[]),n&&p)?(0,l.Y)(C,(0,o._)({loading:m,src:d,ref:t},c)):(0,l.Y)(I,(0,i._)((0,o._)({},e),{ref:t}))}),function(e,t){var n,r;return e.video.cover===t.video.cover&&e.video.quality===t.video.quality&&(null==(n=e.video)?void 0:n.loading)===(null==(r=t.video)?void 0:r.loading)&&e.objectFit===t.objectFit})},11196:function(e,t,n){n.d(t,{S:function(){return r},a:function(){return o}});var r=3,o=-3},80366:function(e,t,n){n.d(t,{Em:function(){return a},WA:function(){return u},f8:function(){return o},mo:function(){return i}});var r=n(17407),o=function(){return(0,r.o$)(function(e){return e.needClearInput})},i=function(){return(0,r.o$)(function(e){return e.replyCid})},u=function(){return(0,r.o$)(function(e){return e.isInputFocus})},a=function(e){var t=(0,r.o$)(function(e){return{isCommentInputEmpty:e.isInputEmpty,isReplyInputEmpty:e.isReplyInputEmpty}}),n=t.isCommentInputEmpty,o=t.isReplyInputEmpty;return e?o:n&&o}},43691:function(e,t,n){n.d(t,{V:function(){return o}});var r=n(90542),o={handleVideoControlChange:function(e){r.f.sendEvent("video_play_control",e)},handleToggleCommentPanel:function(e){r.f.sendEvent("comments_panel_toggle",e)},handleCommentPanelShow:function(e){r.f.sendEvent("comments_panel_show",e)},handleVideoControlReport:function(e){r.f.sendEvent("show_video_controls",e)}}},78256:function(e,t,n){n.d(t,{p:function(){return l}});var r,o=n(35383),i=n(90542),u=n(48859),a=(r={},(0,o._)(r,u.ey.OneColumn,"one-column"),(0,o._)(r,u.ey.ThreeColumn,"three-column"),(0,o._)(r,u.ey.BrowserMode,"browser-mode"),(0,o._)(r,u.ey.VideoDetail,"video-detail"),(0,o._)(r,u.ey.Pip,"pip"),(0,o._)(r,u.ey.FullscreenMode,"fullscreen"),(0,o._)(r,u.ey.CreatorTab,"creator_tab"),(0,o._)(r,u.ey.MiniPlayer,"mini_player"),(0,o._)(r,u.ey.ImmersivePlayer,"immersive_player"),(0,o._)(r,u.ey.TiktokStories,"tiktok_stories"),r),l={handleSwitchSound:function(e){var t=e.muted,n=e.playMode,r=e.enter_method,o=void 0===r?"click":r,u=e.volume_from,l=e.volume_to,c=e.aweme_type,s=e.pic_cnt;void 0!==u&&void 0!==l?i.f.sendEvent("switch_sound",{sound_mode:l>u?"adjust_up":"adjust_down",play_mode:a[n],enter_method:o,volume_from:u,volume_to:l,aweme_type:null!=c?c:0,pic_cnt:s}):i.f.sendEvent("switch_sound",{sound_mode:t?"off":"on",play_mode:a[n],enter_method:o,aweme_type:null!=c?c:0,pic_cnt:s})},handleVideoUnmuteButtonShow:function(){i.f.sendEvent("unmute_show")},handleVideoUnmuteButtonClicked:function(){i.f.sendEvent("unmute_click")},handleVolumeChange:function(e){var t=e.volume_from,n=e.volume_to,r=void 0===n?0:n,o=e.click_mute,u=void 0!==o&&o;i.f.sendEvent("volume_change",{volume_change:u?0:Number((r-(void 0===t?0:t)).toFixed(4)),volume_level:r,click_mute:u})}}}}]);